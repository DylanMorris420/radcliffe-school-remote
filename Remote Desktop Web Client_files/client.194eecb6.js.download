function FeedData(){return{loading:!0,loadFailed:!1,multiTenant:!1,numRetry:0,workspaces:[]}}var PlatformInfo=function(a,b,c){"use strict";var d=this,e=a.getResultObject();d.isMac=navigator.platform.indexOf("Mac")>-1,d.isFirefox=void 0!==b.mozInnerScreenX,d.isChrome="Chrome"===e.browser.name,d.isIE="IE"===e.browser.name,d.isSafari="Safari"===e.browser.name,d.isEdge="Edge"===e.browser.name,d.isTouchDevice=function(){return"ontouchstart"in b||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},d.getWindowWidth=function(){return b.innerWidth},d.getWindowHeight=function(){return b.innerHeight},d.getWindowScale=function(){return b.devicePixelRatio},d.getLocale=function(){return c.use()},d.isHardwareModeEnabled=function(){return Module.IsWebGLSupported()};var f=function(a){return a&&a.toString().trim()?a:"<>"};return d.clientVersion="1.0.21.0",d.clientTarget="Live",d.clientOS=function(a){switch(a){case"Mac OS":return"macOS";case"Chromium OS":return"CrOS";default:return a}}(a.getOSInfo().name),d.clientOSAndBrowserWithVersions=d.clientOS+" "+f(a.getOSInfo().version)+" "+a.getBrowserInfo().name+" "+f(a.getBrowserInfo().version),d.deviceInfo=a,d.clientUserAgent="com.microsoft.rdc.html/"+d.clientVersion,d},LogLevel={All:0,Debug:1,Info:2,Warn:3,Error:4},Logger=function(){"use strict";var a={},b=LogLevel.All,c=function(a){var b=(new Date).toISOString()+" ";return 1===a.length?b+a[0]:b+Array.prototype.slice.call(arguments).join(" ")},d=function(a){return 1===a.length?a[0]:Array.prototype.slice.call(arguments).join(" ")},e=!1,f=[],g=function(a){f.push(a+"\r\n")};return a.getConsoleRecordingStatus=function(){return e},a.getListOfLogs=function(){return f},a.startRecording=function(){console.log((new Date).toISOString()+" Started console recording"),f=[],e=!0},a.stopRecording=function(){console.log((new Date).toISOString()+" Stopped console recording"),e=!1},a.debugWithoutTimestamp=function(){var a;b!==LogLevel.All&&b!==LogLevel.Debug||(a=d(arguments),!0===e&&g(a),console.debug(a))},a.debug=function(){var a;b!==LogLevel.All&&b!==LogLevel.Debug||(a=c(arguments),!0===e&&g(a),console.debug(a))},a.logWithoutTimestamp=function(){var a;b!==LogLevel.All&&b!==LogLevel.Debug&&b!==LogLevel.Info||(a=d(arguments),!0===e&&g(a),console.log(a))},a.log=function(){var a;b!==LogLevel.All&&b!==LogLevel.Debug&&b!==LogLevel.Info||(a=c(arguments),!0===e&&g(a),console.log(a))},a.warnWithoutTimestamp=function(){var a;b!==LogLevel.All&&b!==LogLevel.Debug&&b!==LogLevel.Info&&b!==LogLevel.Warn||(a=d(arguments),!0===e&&g(a),console.warn(a))},a.warn=function(){var a;b!==LogLevel.All&&b!==LogLevel.Debug&&b!==LogLevel.Info&&b!==LogLevel.Warn||(a=c(arguments),!0===e&&g(a),console.warn(a))},a.errorWithoutTimestamp=function(){var c,f;b!==LogLevel.All&&b!==LogLevel.Debug&&b!==LogLevel.Info&&b!==LogLevel.Warn&&b!==LogLevel.Error||(c=d(arguments),f=a.stackTrace(),!0===e&&(g(c),g(f)),console.error(c),console.error(f))},a.error=function(){var d,f;b!==LogLevel.All&&b!==LogLevel.Debug&&b!==LogLevel.Info&&b!==LogLevel.Warn&&b!==LogLevel.Error||(d=c(arguments),f=a.stackTrace(),!0===e&&(g(d),g(f)),console.error(d),console.error(f))},a.stackTrace=function(){var a;try{throw new Error("")}catch(b){a=b.stack||""}return a=a.split("\n").map(function(a){return a.trim()}),a.splice("Error"===a[0]?2:1)},a.setLogLevel=function(a){b=a},a},ObjectHelper=function(){"use strict";var a=window.crypto||window.msCrypto;if(!a)throw new Error("Strong random numbers are not available.");this.cloneObject=function(a){var b,c=Object.create(null);if(null===a)return null;for(b in a)void 0!==a[b]&&(c[b]=a[b]);return c},this.createGuid=function(){var b=new Uint8Array(16);a.getRandomValues(b),b[6]=79&(64|b[6]),b[8]=191&(128|b[8]);var c,d="";for(c=0;c<16;c++){4!=c&&6!=c&&8!=c&&10!=c||(d+="-");var e=b[c].toString(16);1==e.length&&(e="0"+e),d+=e}return d}};!function(){String.prototype.startsWith=String.prototype.startsWith||function(a,b){return b=b||0,this.indexOf(a,b)===b},String.prototype.endsWith=String.prototype.endsWith||function(a,b){var c=this.toString();("number"!=typeof b||!isFinite(b)||Math.floor(b)!==b||b>c.length)&&(b=c.length),b-=a.length;var d=c.indexOf(a,b);return-1!==d&&d===b}}();var KeyCodes={F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Return:13,Esc:27,Backspace:8,Tab:9,Left:37,Up:38,Right:39,Down:40,CapsLock:20,Delete:46,End:35,Home:36,Insert:45,NumLock:144,Spacebar:32,PageUp:33,PageDown:34,Shift:16,Windows:91,RWindows:93,Ctrl:17,Alt:18,Pause:19,ScrollLock:145,PrintScreen:44,Cmd1:91,Cmd2:93,Cmd3:224},ASCIICodes={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122},NumericPadKeyCodes={144:"NumLock",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",111:"NumpadDivide",108:'"NumpadComma" inputting "," or "."',188:'"NumpadComma" inputting ","',194:'"NumpadComma" inputting ",", "NumpadComma" inputting "."',190:'"NumpadComma" inputting "."',110:'"NumpadDecimal" inputting "."',12:"NumpadEqual",187:"NumpadEqual",61:"NumpadEqual"},CtrlAltCharacterShortCuts={86:"Ctrl + Alt + V Excel paste special",107:'Ctrl + Alt + "+" Excel zoom in NumpadAdd',192:'Ctrl + Alt + "+" Excel zoom in Equal with shift Linux / Mac on Chromium 34',222:'Ctrl + Alt + "+" Excel zoom in Equal with shift Japanese',187:'Ctrl + Alt + "-"  Excel zoom out Minus Japanese keyboards, Excel zoom in Equal with shift non-Japanese',189:'Ctrl + Alt + "-" Excel zoom out',109:'Ctrl + Alt + "-"  Excel zoom out NumpadSubtract'},CodesToKeycodes={Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,Digit0:48,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,Comma:188,Period:190,Semicolon:186,Quote:222,BracketLeft:219,BracketRight:221,Backquote:192,Backslash:220,Minus:189,Equal:187,IntlRo:193,IntlYen:255,NumLock:144,Numpad0:96,Numpad1:97,Numpad2:98,Numpad3:99,Numpad4:100,Numpad5:101,Numpad6:102,Numpad7:103,Numpad8:104,Numpad9:105,NumpadAdd:107,NumpadComma:194,NumpadDecimal:110,NumpadDivide:111,NumpadEnter:13,NumpadEqual:12,NumpadMultiply:106,NumpadSubtract:109},ErrorInfo=function(a,b,c,d,e){return this.errorSource=a,this.errorOperation=b,this.errorCode=c,this.errorCodeSymbolic=d,this.errorMessage=e,this},DebugInfo=function(){return this.TIMESTAMP=(new Date).toISOString(),this.Env="",this.ClientType="HTML",this.ClientInstance=null,this.ClientOS=null,this.Level=null,this.Pid=0,this.Tid=0,this.EventId=0,this.TaskName=null,this.ChannelName="",this.ActivityId=null,this.Msg=null,this.Ex="",this},FeedCounts=function(a,b,c){return this.total=a,this.failed=b,this.download=c,this},FeedCountswithCache=function(a,b,c,d){var e=new FeedCounts(a,b,c);return e.cached=d,e},timeZones={"Africa/Abidjan":"Greenwich Standard Time","Africa/Accra":"Greenwich Standard Time","Africa/Addis_Ababa":"E. Africa Standard Time","Africa/Algiers":"W. Central Africa Standard Time","Africa/Asmera":"E. Africa Standard Time","Africa/Bamako":"Greenwich Standard Time","Africa/Bangui":"W. Central Africa Standard Time","Africa/Banjul":"Greenwich Standard Time","Africa/Bissau":"Greenwich Standard Time","Africa/Blantyre":"South Africa Standard Time","Africa/Brazzaville":"W. Central Africa Standard Time","Africa/Bujumbura":"South Africa Standard Time","Africa/Cairo":"Egypt Standard Time","Africa/Casablanca":"Morocco Standard Time","Africa/Ceuta":"Romance Standard Time","Africa/Conakry":"Greenwich Standard Time","Africa/Dakar":"Greenwich Standard Time","Africa/Dar_es_Salaam":"E. Africa Standard Time","Africa/Djibouti":"E. Africa Standard Time","Africa/Douala":"W. Central Africa Standard Time","Africa/El_Aaiun":"Morocco Standard Time","Africa/Freetown":"Greenwich Standard Time","Africa/Gaborone":"South Africa Standard Time","Africa/Harare":"South Africa Standard Time","Africa/Johannesburg":"South Africa Standard Time","Africa/Juba":"E. Africa Standard Time","Africa/Kampala":"E. Africa Standard Time","Africa/Khartoum":"Sudan Standard Time","Africa/Kigali":"South Africa Standard Time","Africa/Kinshasa":"W. Central Africa Standard Time","Africa/Lagos":"W. Central Africa Standard Time","Africa/Libreville":"W. Central Africa Standard Time","Africa/Lome":"Greenwich Standard Time","Africa/Luanda":"W. Central Africa Standard Time","Africa/Lubumbashi":"South Africa Standard Time","Africa/Lusaka":"South Africa Standard Time","Africa/Malabo":"W. Central Africa Standard Time","Africa/Maputo":"South Africa Standard Time","Africa/Maseru":"South Africa Standard Time","Africa/Mbabane":"South Africa Standard Time","Africa/Mogadishu":"E. Africa Standard Time","Africa/Monrovia":"Greenwich Standard Time","Africa/Nairobi":"E. Africa Standard Time","Africa/Ndjamena":"W. Central Africa Standard Time","Africa/Niamey":"W. Central Africa Standard Time","Africa/Nouakchott":"Greenwich Standard Time","Africa/Ouagadougou":"Greenwich Standard Time","Africa/Porto-Novo":"W. Central Africa Standard Time","Africa/Sao_Tome":"Sao Tome Standard Time","Africa/Tripoli":"Libya Standard Time","Africa/Tunis":"W. Central Africa Standard Time","Africa/Windhoek":"Namibia Standard Time","America/Adak":"Aleutian Standard Time","America/Anchorage":"Alaskan Standard Time","America/Anguilla":"SA Western Standard Time","America/Antigua":"SA Western Standard Time","America/Araguaina":"Tocantins Standard Time","America/Argentina/Buenos_Aires":"Argentina Standard Time","America/Argentina/Catamarca":"Argentina Standard Time","America/Argentina/Cordoba":"Argentina Standard Time","America/Argentina/Jujuy":"Argentina Standard Time","America/Argentina/La_Rioja":"Argentina Standard Time","America/Argentina/Mendoza":"Argentina Standard Time","America/Argentina/Rio_Gallegos":"Argentina Standard Time","America/Argentina/Salta":"Argentina Standard Time","America/Argentina/San_Juan":"Argentina Standard Time","America/Argentina/San_Luis":"Argentina Standard Time","America/Argentina/Tucuman":"Argentina Standard Time","America/Argentina/Ushuaia":"Argentina Standard Time","America/Aruba":"SA Western Standard Time","America/Asuncion":"Paraguay Standard Time","America/Atikokan":"SA Pacific Standard Time","America/Bahia":"Bahia Standard Time","America/Bahia_Banderas":"Central Standard Time (Mexico)","America/Barbados":"SA Western Standard Time","America/Belem":"SA Eastern Standard Time","America/Belize":"Central America Standard Time","America/Blanc-Sablon":"SA Western Standard Time","America/Boa_Vista":"SA Western Standard Time","America/Bogota":"SA Pacific Standard Time","America/Boise":"Mountain Standard Time","America/Buenos_Aires":"Argentina Standard Time","America/Cambridge_Bay":"Mountain Standard Time","America/Campo_Grande":"Central Brazilian Standard Time","America/Cancun":"Eastern Standard Time (Mexico)","America/Caracas":"Venezuela Standard Time","America/Catamarca":"Argentina Standard Time","America/Cayenne":"SA Eastern Standard Time","America/Cayman":"SA Pacific Standard Time","America/Chicago":"Central Standard Time","America/Chihuahua":"Mountain Standard Time (Mexico)","America/Coral_Harbour":"SA Pacific Standard Time","America/Cordoba":"Argentina Standard Time","America/Costa_Rica":"Central America Standard Time","America/Creston":"US Mountain Standard Time","America/Cuiaba":"Central Brazilian Standard Time","America/Curacao":"SA Western Standard Time","America/Danmarkshavn":"UTC","America/Dawson":"Pacific Standard Time","America/Dawson_Creek":"US Mountain Standard Time","America/Denver":"Mountain Standard Time","America/Detroit":"Eastern Standard Time","America/Dominica":"SA Western Standard Time","America/Edmonton":"Mountain Standard Time","America/Eirunepe":"SA Pacific Standard Time","America/El_Salvador":"Central America Standard Time","America/Fort_Nelson":"US Mountain Standard Time","America/Fortaleza":"SA Eastern Standard Time","America/Glace_Bay":"Atlantic Standard Time","America/Godthab":"Greenland Standard Time","America/Goose_Bay":"Atlantic Standard Time","America/Grand_Turk":"Turks And Caicos Standard Time","America/Grenada":"SA Western Standard Time","America/Guadeloupe":"SA Western Standard Time","America/Guatemala":"Central America Standard Time","America/Guayaquil":"SA Pacific Standard Time","America/Guyana":"SA Western Standard Time","America/Halifax":"Atlantic Standard Time","America/Havana":"Cuba Standard Time","America/Hermosillo":"US Mountain Standard Time","America/Indiana/Indianapolis":"US Eastern Standard Time","America/Indiana/Knox":"Central Standard Time","America/Indiana/Marengo":"US Eastern Standard Time","America/Indiana/Petersburg":"Eastern Standard Time","America/Indiana/Tell_City":"Central Standard Time","America/Indiana/Vevay":"US Eastern Standard Time","America/Indiana/Vincennes":"Eastern Standard Time","America/Indiana/Winamac":"Eastern Standard Time","America/Indianapolis":"US Eastern Standard Time","America/Inuvik":"Mountain Standard Time","America/Iqaluit":"Eastern Standard Time","America/Jamaica":"SA Pacific Standard Time","America/Jujuy":"Argentina Standard Time","America/Juneau":"Alaskan Standard Time","America/Kentucky/Louisville":"Eastern Standard Time","America/Kentucky/Monticello":"Eastern Standard Time","America/Kralendijk":"SA Western Standard Time","America/La_Paz":"SA Western Standard Time","America/Lima":"SA Pacific Standard Time","America/Los_Angeles":"Pacific Standard Time","America/Louisville":"Eastern Standard Time","America/Lower_Princes":"SA Western Standard Time","America/Maceio":"SA Eastern Standard Time","America/Managua":"Central America Standard Time","America/Manaus":"SA Western Standard Time","America/Marigot":"SA Western Standard Time","America/Martinique":"SA Western Standard Time","America/Matamoros":"Central Standard Time","America/Mazatlan":"Mountain Standard Time (Mexico)","America/Mendoza":"Argentina Standard Time","America/Menominee":"Central Standard Time","America/Merida":"Central Standard Time (Mexico)","America/Metlakatla":"Alaskan Standard Time","America/Mexico_City":"Central Standard Time (Mexico)","America/Miquelon":"Saint Pierre Standard Time","America/Moncton":"Atlantic Standard Time","America/Monterrey":"Central Standard Time (Mexico)","America/Montevideo":"Montevideo Standard Time","America/Montreal":"Eastern Standard Time","America/Montserrat":"SA Western Standard Time","America/Nassau":"Eastern Standard Time","America/New_York":"Eastern Standard Time","America/Nipigon":"Eastern Standard Time","America/Nome":"Alaskan Standard Time","America/Noronha":"UTC-02","America/North_Dakota/Beulah":"Central Standard Time","America/North_Dakota/Center":"Central Standard Time","America/North_Dakota/New_Salem":"Central Standard Time","America/Ojinaga":"Mountain Standard Time","America/Panama":"SA Pacific Standard Time","America/Pangnirtung":"Eastern Standard Time","America/Paramaribo":"SA Eastern Standard Time","America/Phoenix":"US Mountain Standard Time","America/Port_of_Spain":"SA Western Standard Time","America/Port-au-Prince":"Haiti Standard Time","America/Porto_Velho":"SA Western Standard Time","America/Puerto_Rico":"SA Western Standard Time","America/Punta_Arenas":"Magallanes Standard Time","America/Rainy_River":"Central Standard Time","America/Rankin_Inlet":"Central Standard Time","America/Recife":"SA Eastern Standard Time","America/Regina":"Canada Central Standard Time","America/Resolute":"Central Standard Time","America/Rio_Branco":"SA Pacific Standard Time","America/Santa_Isabel":"Pacific Standard Time (Mexico)","America/Santarem":"SA Eastern Standard Time","America/Santiago":"Pacific SA Standard Time","America/Santo_Domingo":"SA Western Standard Time","America/Sao_Paulo":"E. South America Standard Time","America/Scoresbysund":"Azores Standard Time","America/Sitka":"Alaskan Standard Time","America/St_Barthelemy":"SA Western Standard Time","America/St_Johns":"Newfoundland Standard Time","America/St_Kitts":"SA Western Standard Time","America/St_Lucia":"SA Western Standard Time","America/St_Thomas":"SA Western Standard Time","America/St_Vincent":"SA Western Standard Time","America/Swift_Current":"Canada Central Standard Time","America/Tegucigalpa":"Central America Standard Time","America/Thule":"Atlantic Standard Time","America/Thunder_Bay":"Eastern Standard Time","America/Tijuana":"Pacific Standard Time (Mexico)","America/Toronto":"Eastern Standard Time","America/Tortola":"SA Western Standard Time","America/Vancouver":"Pacific Standard Time","America/Whitehorse":"Pacific Standard Time","America/Winnipeg":"Central Standard Time","America/Yakutat":"Alaskan Standard Time","America/Yellowknife":"Mountain Standard Time","Antarctica/Casey":"W. Australia Standard Time","Antarctica/Davis":"SE Asia Standard Time","Antarctica/DumontDUrville":"West Pacific Standard Time","Antarctica/Macquarie":"Central Pacific Standard Time","Antarctica/Mawson":"West Asia Standard Time","Antarctica/McMurdo":"New Zealand Standard Time","Antarctica/Palmer":"Magallanes Standard Time","Antarctica/Rothera":"SA Eastern Standard Time","Antarctica/Syowa":"E. Africa Standard Time","Antarctica/Vostok":"Central Asia Standard Time","Arctic/Longyearbyen":"W. Europe Standard Time","Asia/Aden":"Arab Standard Time","Asia/Almaty":"Central Asia Standard Time","Asia/Amman":"Jordan Standard Time","Asia/Anadyr":"Russia Time Zone 11","Asia/Aqtau":"West Asia Standard Time","Asia/Aqtobe":"West Asia Standard Time","Asia/Ashgabat":"West Asia Standard Time","Asia/Atyrau":"West Asia Standard Time","Asia/Baghdad":"Arabic Standard Time","Asia/Bahrain":"Arab Standard Time","Asia/Baku":"Azerbaijan Standard Time","Asia/Bangkok":"SE Asia Standard Time","Asia/Barnaul":"Altai Standard Time","Asia/Beirut":"Middle East Standard Time","Asia/Bishkek":"Central Asia Standard Time","Asia/Brunei":"Singapore Standard Time","Asia/Calcutta":"India Standard Time","Asia/Chita":"Transbaikal Standard Time","Asia/Choibalsan":"Ulaanbaatar Standard Time","Asia/Colombo":"Sri Lanka Standard Time","Asia/Damascus":"Syria Standard Time","Asia/Dhaka":"Bangladesh Standard Time","Asia/Dili":"Tokyo Standard Time","Asia/Dubai":"Arabian Standard Time","Asia/Dushanbe":"West Asia Standard Time","Asia/Famagusta":"GTB Standard Time","Asia/Gaza":"West Bank Standard Time","Asia/Hebron":"West Bank Standard Time","Asia/Ho_Chi_Minh":"SE Asia Standard Time","Asia/Hong_Kong":"China Standard Time","Asia/Hovd":"W. Mongolia Standard Time","Asia/Irkutsk":"North Asia East Standard Time","Asia/Jakarta":"SE Asia Standard Time","Asia/Jayapura":"Tokyo Standard Time","Asia/Jerusalem":"Israel Standard Time","Asia/Kabul":"Afghanistan Standard Time","Asia/Kamchatka":"Russia Time Zone 11","Asia/Karachi":"Pakistan Standard Time","Asia/Kathmandu":"Nepal Standard Time","Asia/Katmandu":"Nepal Standard Time","Asia/Khandyga":"Yakutsk Standard Time","Asia/Kolkata":"India Standard Time","Asia/Krasnoyarsk":"North Asia Standard Time","Asia/Kuala_Lumpur":"Singapore Standard Time","Asia/Kuching":"Singapore Standard Time","Asia/Kuwait":"Arab Standard Time","Asia/Macau":"China Standard Time","Asia/Magadan":"Magadan Standard Time","Asia/Makassar":"Singapore Standard Time","Asia/Manila":"Singapore Standard Time","Asia/Muscat":"Arabian Standard Time","Asia/Nicosia":"GTB Standard Time","Asia/Novokuznetsk":"North Asia Standard Time","Asia/Novosibirsk":"N. Central Asia Standard Time","Asia/Omsk":"Omsk Standard Time","Asia/Oral":"West Asia Standard Time","Asia/Phnom_Penh":"SE Asia Standard Time","Asia/Pontianak":"SE Asia Standard Time","Asia/Pyongyang":"North Korea Standard Time","Asia/Qatar":"Arab Standard Time","Asia/Qyzylorda":"Central Asia Standard Time","Asia/Rangoon":"Myanmar Standard Time","Asia/Riyadh":"Arab Standard Time","Asia/Saigon":"SE Asia Standard Time","Asia/Sakhalin":"Sakhalin Standard Time","Asia/Samarkand":"West Asia Standard Time","Asia/Seoul":"Korea Standard Time","Asia/Shanghai":"China Standard Time","Asia/Singapore":"Singapore Standard Time","Asia/Srednekolymsk":"Russia Time Zone 10","Asia/Taipei":"Taipei Standard Time","Asia/Tashkent":"West Asia Standard Time","Asia/Tbilisi":"Georgian Standard Time","Asia/Tehran":"Iran Standard Time","Asia/Thimphu":"Bangladesh Standard Time","Asia/Tokyo":"Tokyo Standard Time","Asia/Tomsk":"Tomsk Standard Time","Asia/Ulaanbaatar":"Ulaanbaatar Standard Time","Asia/Urumqi":"China Standard Time","Asia/Ust-Nera":"Vladivostok Standard Time","Asia/Vientiane":"SE Asia Standard Time","Asia/Vladivostok":"Vladivostok Standard Time","Asia/Yakutsk":"Yakutsk Standard Time","Asia/Yangon":"Myanmar Standard Time","Asia/Yekaterinburg":"Ekaterinburg Standard Time","Asia/Yerevan":"Caucasus Standard Time","Atlantic/Azores":"Azores Standard Time","Atlantic/Bermuda":"Atlantic Standard Time","Atlantic/Canary":"GMT Standard Time","Atlantic/Cape_Verde":"Cape Verde Standard Time","Atlantic/Faeroe":"GMT Standard Time","Atlantic/Faroe":"GMT Standard Time","Atlantic/Madeira":"GMT Standard Time","Atlantic/Reykjavik":"Greenwich Standard Time","Atlantic/South_Georgia":"UTC-02","Atlantic/St_Helena":"Greenwich Standard Time","Atlantic/Stanley":"SA Eastern Standard Time","Australia/Adelaide":"Cen. Australia Standard Time","Australia/Brisbane":"E. Australia Standard Time","Australia/Broken_Hill":"Cen. Australia Standard Time","Australia/Currie":"Tasmania Standard Time","Australia/Darwin":"AUS Central Standard Time","Australia/Eucla":"Aus Central W. Standard Time","Australia/Hobart":"Tasmania Standard Time","Australia/Lindeman":"E. Australia Standard Time","Australia/Lord_Howe":"Lord Howe Standard Time","Australia/Melbourne":"AUS Eastern Standard Time","Australia/Perth":"W. Australia Standard Time","Australia/Sydney":"AUS Eastern Standard Time",CST6CDT:"Central Standard Time",EST5EDT:"Eastern Standard Time","Etc/GMT":"UTC","Etc/GMT+1":"Cape Verde Standard Time","Etc/GMT+10":"Hawaiian Standard Time","Etc/GMT+11":"UTC-11","Etc/GMT+12":"Dateline Standard Time","Etc/GMT+2":"UTC-02","Etc/GMT+3":"SA Eastern Standard Time","Etc/GMT+4":"SA Western Standard Time","Etc/GMT+5":"SA Pacific Standard Time","Etc/GMT+6":"Central America Standard Time","Etc/GMT+7":"US Mountain Standard Time","Etc/GMT+8":"UTC-08","Etc/GMT+9":"UTC-09","Etc/GMT-1":"W. Central Africa Standard Time","Etc/GMT-10":"West Pacific Standard Time","Etc/GMT-11":"Central Pacific Standard Time","Etc/GMT-12":"UTC+12","Etc/GMT-13":"UTC+13","Etc/GMT-14":"Line Islands Standard Time","Etc/GMT-2":"South Africa Standard Time","Etc/GMT-3":"E. Africa Standard Time","Etc/GMT-4":"Arabian Standard Time","Etc/GMT-5":"West Asia Standard Time","Etc/GMT-6":"Central Asia Standard Time","Etc/GMT-7":"SE Asia Standard Time","Etc/GMT-8":"Singapore Standard Time","Etc/GMT-9":"Tokyo Standard Time","Etc/UTC":"UTC","Europe/Amsterdam":"W. Europe Standard Time","Europe/Andorra":"W. Europe Standard Time","Europe/Astrakhan":"Astrakhan Standard Time","Europe/Athens":"GTB Standard Time","Europe/Belgrade":"Central Europe Standard Time","Europe/Berlin":"W. Europe Standard Time","Europe/Bratislava":"Central Europe Standard Time","Europe/Brussels":"Romance Standard Time","Europe/Bucharest":"GTB Standard Time","Europe/Budapest":"Central Europe Standard Time","Europe/Busingen":"W. Europe Standard Time","Europe/Chisinau":"E. Europe Standard Time","Europe/Copenhagen":"Romance Standard Time","Europe/Dublin":"GMT Standard Time","Europe/Gibraltar":"W. Europe Standard Time","Europe/Guernsey":"GMT Standard Time","Europe/Helsinki":"FLE Standard Time","Europe/Isle_of_Man":"GMT Standard Time","Europe/Istanbul":"Turkey Standard Time","Europe/Jersey":"GMT Standard Time","Europe/Kaliningrad":"Kaliningrad Standard Time","Europe/Kiev":"FLE Standard Time","Europe/Kirov":"Russian Standard Time","Europe/Lisbon":"GMT Standard Time","Europe/Ljubljana":"Central Europe Standard Time","Europe/London":"GMT Standard Time","Europe/Luxembourg":"W. Europe Standard Time","Europe/Madrid":"Romance Standard Time","Europe/Malta":"W. Europe Standard Time","Europe/Mariehamn":"FLE Standard Time","Europe/Minsk":"Belarus Standard Time","Europe/Monaco":"W. Europe Standard Time","Europe/Moscow":"Russian Standard Time","Europe/Oslo":"W. Europe Standard Time","Europe/Paris":"Romance Standard Time","Europe/Podgorica":"Central Europe Standard Time","Europe/Prague":"Central Europe Standard Time","Europe/Riga":"FLE Standard Time","Europe/Rome":"W. Europe Standard Time","Europe/Samara":"Russia Time Zone 3","Europe/San_Marino":"W. Europe Standard Time","Europe/Sarajevo":"Central European Standard Time","Europe/Saratov":"Saratov Standard Time","Europe/Simferopol":"Russian Standard Time","Europe/Skopje":"Central European Standard Time","Europe/Sofia":"FLE Standard Time","Europe/Stockholm":"W. Europe Standard Time","Europe/Tallinn":"FLE Standard Time","Europe/Tirane":"Central Europe Standard Time","Europe/Ulyanovsk":"Astrakhan Standard Time","Europe/Uzhgorod":"FLE Standard Time","Europe/Vaduz":"W. Europe Standard Time","Europe/Vatican":"W. Europe Standard Time","Europe/Vienna":"W. Europe Standard Time","Europe/Vilnius":"FLE Standard Time","Europe/Volgograd":"Russian Standard Time","Europe/Warsaw":"Central European Standard Time","Europe/Zagreb":"Central European Standard Time","Europe/Zaporozhye":"FLE Standard Time","Europe/Zurich":"W. Europe Standard Time","Indian/Antananarivo":"E. Africa Standard Time","Indian/Chagos":"Central Asia Standard Time","Indian/Christmas":"SE Asia Standard Time","Indian/Cocos":"Myanmar Standard Time","Indian/Comoro":"E. Africa Standard Time","Indian/Kerguelen":"West Asia Standard Time","Indian/Mahe":"Mauritius Standard Time","Indian/Maldives":"West Asia Standard Time","Indian/Mauritius":"Mauritius Standard Time","Indian/Mayotte":"E. Africa Standard Time","Indian/Reunion":"Mauritius Standard Time",MST7MDT:"Mountain Standard Time","Pacific/Apia":"Samoa Standard Time","Pacific/Auckland":"New Zealand Standard Time","Pacific/Bougainville":"Bougainville Standard Time","Pacific/Chatham":"Chatham Islands Standard Time","Pacific/Chuuk":"West Pacific Standard Time","Pacific/Easter":"Easter Island Standard Time","Pacific/Efate":"Central Pacific Standard Time","Pacific/Enderbury":"UTC+13","Pacific/Fakaofo":"UTC+13","Pacific/Fiji":"Fiji Standard Time","Pacific/Funafuti":"UTC+12","Pacific/Galapagos":"Central America Standard Time","Pacific/Gambier":"UTC-09","Pacific/Guadalcanal":"Central Pacific Standard Time","Pacific/Guam":"West Pacific Standard Time","Pacific/Honolulu":"Hawaiian Standard Time","Pacific/Johnston":"Hawaiian Standard Time","Pacific/Kiritimati":"Line Islands Standard Time","Pacific/Kosrae":"Central Pacific Standard Time","Pacific/Kwajalein":"UTC+12","Pacific/Majuro":"UTC+12","Pacific/Marquesas":"Marquesas Standard Time","Pacific/Midway":"UTC-11","Pacific/Nauru":"UTC+12","Pacific/Niue":"UTC-11","Pacific/Norfolk":"Norfolk Standard Time","Pacific/Noumea":"Central Pacific Standard Time","Pacific/Pago_Pago":"UTC-11","Pacific/Palau":"Tokyo Standard Time","Pacific/Pitcairn":"UTC-08","Pacific/Pohnpei":"Central Pacific Standard Time","Pacific/Ponape":"Central Pacific Standard Time","Pacific/Port_Moresby":"West Pacific Standard Time","Pacific/Rarotonga":"Hawaiian Standard Time","Pacific/Saipan":"West Pacific Standard Time","Pacific/Tahiti":"Hawaiian Standard Time","Pacific/Tarawa":"UTC+12","Pacific/Tongatapu":"Tonga Standard Time","Pacific/Truk":"West Pacific Standard Time","Pacific/Wake":"UTC+12","Pacific/Wallis":"UTC+12",PST8PDT:"Pacific Standard Time"},AudioPlaybackType={PlayOnDevice:0,PlayOnRemotePC:1,NoSound:2},BookmarkType={Desktop:0,RemoteApp:1},Bookmark=function(){"use strict";this.id=null,this.hostName=null,this.port=null,this.friendlyName=null,this.audioPlaybackType=AudioPlaybackType.PlayOnDevice,this.swapMouseButtons=!1,this.adminMode=!1,this.bookmarkType=BookmarkType.Desktop,this.thumbnail=null,this.defaultThumbnai="assets/images/defaultIcon.807effe8.png",this.rdpFileString="",this.folderNames=[],this.tenantId="",this.multiTenantMode=!1,this.endpointCert=null,this.workspaceName=null,this.desktopName=null,this.label=function(){return this.friendlyName||this.hostName},this.clippedDisplayLabel=function(){var a=this.label(),b=a.split(" "),c="",d="";if(b.length<1)return a;if(b[0].length>10){var e=b[0].substring(0,9)+"-";b[0]=b[0].substring(10),b.unshift(e)}for(var f=0;f<b.length;f++){var g=b[f];(c+" "+g).trim().length<=10?c=(c+" "+g).trim():d=(d+" "+g).trim()}return d.length>10&&(d=d.substring(0,7).trim()+"..."),c+" "+d},this.desktopLabel=function(){return this.desktopName||this.label()},this.validate=function(){return!0}},ConnectionProperties=function(a){"use strict";this.hostName=null,this.port=3389,this.gatewayHostName=null,this.gatewayPort=443,this.remoteApplicationMode=!1,this.remoteApplicationProgram="",this.remoteApplicationCmdLine="",this.connectionSettings=null,this.tenantId=null,this.properties=null,this.applyProperties=function(a){if(a){this.connectionSettings=Module.RdpConnectionSettings.CreateFromString(a),this.connectionSettings.AzureRemoteApp=!1,this.connectionSettings.UseGraphicsWebWorkers=!1,this.connectionSettings.UseConnectionWebWorkers=!0,this.connectionSettings.TimeZoneBias=(new Date).getTimezoneOffset();var b=Intl&&Intl.DateTimeFormat&&new Intl.DateTimeFormat;this.connectionSettings.TimeZoneName=b&&b.resolvedOptions().timeZone||"",this.connectionSettings.TimeZoneName=timeZones[this.connectionSettings.TimeZoneName]||this.connectionSettings.TimeZoneName,this.hostName=this.connectionSettings.HostName,this.port=this.connectionSettings.Port,this.gatewayHostName=this.connectionSettings.GatewayHostName,this.gatewayPort=this.connectionSettings.GatewayPort,this.remoteApplicationProgram=this.connectionSettings.RemoteAppProgram,this.remoteApplicationMode=this.connectionSettings.RemoteAppMode,this.remoteApplicationCmdLine=this.connectionSettings.RemoteAppCmdLine,this.EventLogUploadAddress=this.connectionSettings.EventLogUploadAddress,this.GatewayCertLogonAuthority=this.connectionSettings.GatewayCertLogonAuthority,this.properties=this.connectionSettings}},this.isEqual=function(a){var b,c=this.properties||{},d=a.properties||{};return b=c.HostPoolID||d.HostPoolID?c.HostPoolID===d.HostPoolID:c.LBInfo===d.LBInfo,this.hostName===a.hostName&&this.remoteApplicationMode===a.remoteApplicationMode&&b&&c.GatewayUsageMethod===d.GatewayUsageMethod&&c.GatewayProfileUsageMethod===d.GatewayProfileUsageMethod&&c.GatewayCredentialsSource===d.GatewayCredentialsSource&&c.GatewayHostName===d.GatewayHostName};var b=this;!function(){b.tenantId=a&&a.tenantId||null,b.applyProperties(a&&a.rdpFileString||null),b.connectionSettings&&(b.connectionSettings.MultiTenant=a.multiTenantMode,a.endpointCert&&b.connectionSettings.SetEndpointCertificate(a.endpointCert))}()},Credential=function(){"use strict";this.id=null,this.userName=null,this.password=null,this.label=function(){return this.userName},this.validate=function(){return!0}},CredentialRequest=function(a){"use strict";this.credentialHint=function(){var b="",c="";return a.getAuthType()===Module.IAuthCompletion_AuthType.UsernameAndPassword&&(b=a.GetUserNameHint(),c=a.GetDomainHint()),b||(b=""),c?c+="\\":c="",c+b},this.complete=function(b){var c=b.userName,d="",e=b.password||"",f=-1;(f=b.userName.indexOf("\\"))>-1&&(d=b.userName.substring(0,f),c=b.userName.substring(f+1));try{a.complete(c,d,e),a.delete(),a=null}catch(b){a=null}},this.completeWithToken=function(b){try{a.complete(b),a.delete(),a=null}catch(b){a=null}},this.isTokenRequired=function(){return a.getAuthType()===Module.IAuthCompletion_AuthType.ClaimsToken}(),this.cancel=function(){try{a.cancel(),a.delete(),a=null}catch(b){a=null}}},EventProvider=function(){"use strict";var a={},b=[];return a.filter=function(a){return b.filter(function(b){return b.event===a})},
a.fireEventCallback=function(b){var c,d=a.filter(b),e=Array.prototype.splice.call(arguments,1);if(d.length>0)for(c=0;c<d.length;c++)e=e.concat(d[c].arg),d[c].callback.apply(this,e)},a.subscribe=function(a,c){var d,e,f=[];for(d in b)if(b.hasOwnProperty(d)&&b[d].event===a&&b[d].callback===c)return;for(e=2;e<arguments.length;e++)f.push(arguments[e]);b.push({event:a,callback:c,arg:f})},a.unsubscribe=function(a,c){var d;for(d=0;d<b.length;d++)if(b[d].event===a&&b[d].callback===c){b.splice(d,1);break}},a},Redirections=function(){"use strict";this.id=null,this.clipboard=!1,this.printer=!1,this.rememberCollection=!1},SessionState={Initialized:0,Connecting:1,Connected:2,Disconnecting:3,Disconnected:4},SessionType={Desktop:0,RemoteApp:1},SessionDelegate=function(){"use strict";this.canvasNeeded=null,this.retireCanvas=null,this.monitorBounds=null},SessionEvent={ViewSizeChanged:0,WillConnect:1,DidConnect:2,WillDisconnect:3,DidDisconnect:4,LoginCompleted:5,ConnectionHealthStateChanged:6,MousePointerChanged:7,ShowDefaultMousePointer:8,GetRemoteClipboardContent:9,ClipboardContentRequest:10,SetRemoteClipboardFormatsComplete:11,FocusChanged:12,WindowIconChanged:13,WindowTitleChanged:14,WindowLaunched:15,ApplicationIdChanged:16,CredentialsNeeded:17,Error:18,TrustChallenge:19,DisplayDesktopBackground:20},Session=function(a,b,c,d){"use strict";var e={events:new EventProvider,id:(new ObjectHelper).createGuid(),sessionType:c,windowId:null,connection:b},f=null,g=null,h=null,i=new Credential,j=function(){return e.delegate.canvasNeeded?e.delegate.canvasNeeded(e.getConnectionId()):null},k=function(){return e.delegate.monitorBounds?e.delegate.monitorBounds():null},l=function(a,b){e.events.fireEventCallback(SessionEvent.ViewSizeChanged,e,a,b)},m=function(a,b){i.password?setTimeout(function(){a.complete(i)}):(a.cred=i,i.userName||(i.userName=a.credentialHint()),e.events.fireEventCallback(SessionEvent.CredentialsNeeded,a,b))},n=function(a){e.events.fireEventCallback(SessionEvent.TrustChallenge,a)},o=function(a,b){e.events.fireEventCallback(SessionEvent.WillConnect,e.id,a,b)},p=function(){e.state=SessionState.Connected,e.events.fireEventCallback(SessionEvent.DidConnect,e.id),i={}},q=function(){e.events.fireEventCallback(SessionEvent.WillDisconnect)},r=function(a){e.state=SessionState.Disconnected,e.delegate.retireCanvas&&e.delegate.retireCanvas(e.getConnectionId()),e.events.fireEventCallback(SessionEvent.DidDisconnect,e.id,a),i={}},s=function(a,b){e.state=SessionState.Disconnected,e.events.fireEventCallback(SessionEvent.DidDisconnect,e.id,b)},t=function(a,b){e.state=SessionState.Disconnected,e.events.fireEventCallback(SessionEvent.DidDisconnect,e.id,b)},u=function(){e.events.fireEventCallback(SessionEvent.LoginCompleted)},v=function(){e.events.fireEventCallback(SessionEvent.ConnectionHealthStateChanged)},w=function(a,b,c){e.events.fireEventCallback(SessionEvent.MousePointerChanged,a,b,c)},x=function(a){e.events.fireEventCallback(SessionEvent.ShowDefaultMousePointer,a)},y=function(a,b){d.log("[Session] Remote clipboard data received "+b),e.events.fireEventCallback(SessionEvent.GetRemoteClipboardContent,a,b)},z=function(a){d.log("[Session] Remote Clipboard format set complete with result "+a),e.events.fireEventCallback(SessionEvent.SetRemoteClipboardFormatsComplete,a)},A=function(a){d.log("[Session] Request for clipboard content received for format "+a.GetFormat()),e.events.fireEventCallback(SessionEvent.ClipboardContentRequest,a)},B=function(a){a===e.id&&e.events.fireEventCallback(SessionEvent.DidDisconnect,e.id)},C=function(a,b,c){if(d.log("[Session] Window icon changed for window: "+a),a===e.windowId)if(c)f=b,e.events.fireEventCallback(SessionEvent.WindowIconChanged);else if(null===f){var g=e.getBookmark();f=g?g.thumbnail:b,e.events.fireEventCallback(SessionEvent.WindowIconChanged)}},D=function(a,b){d.log("[Session] Window title changed to "+b),a===e.windowId&&(g=b),e.events.fireEventCallback(SessionEvent.WindowTitleChanged)},E=function(a,b){d.log("[Session] Application id changed to: "+b+" for Window: "+a),a===e.windowId&&(h=b),e.events.fireEventCallback(SessionEvent.ApplicationIdChanged)},F=function(a,b){d.log("[Session] Window launched successfully with result "+b),e.events.fireEventCallback(SessionEvent.WindowLaunched,e,a,b)},G=function(a){e.events.fireEventCallback(SessionEvent.Error,e.id,a)},H=function(a){e.events.fireEventCallback(SessionEvent.DisplayDesktopBackground,a,e.id)};return e.state=SessionState.Initialized,e.connection.getState()===ConnectionState.Connected&&(e.state=SessionState.Connected),e.connection&&(e.connection.events.subscribe(ConnectionEvent.ConnectionConnectFailed,t),e.connection.events.subscribe(ConnectionEvent.ConnectionDestroyed,s),e.connection.events.subscribe(ConnectionEvent.WindowDeleted,B),e.connection.events.subscribe(ConnectionEvent.WindowIconChanged,C),e.connection.events.subscribe(ConnectionEvent.WindowTitleChanged,D),e.connection.events.subscribe(ConnectionEvent.WindowApplicationIdChanged,E),e.connection.events.subscribe(ConnectionEvent.WindowLaunched,F)),e.delegate=new SessionDelegate,e.connect=function(){e.state!==SessionState.Connecting&&(e.state=SessionState.Connecting,e.connection.delegate.displayDesktopBackground=H,e.connection.delegate.canvasNeeded=j,e.connection.delegate.monitorBounds=k,e.connection.delegate.viewSizeChanged=l,e.connection.delegate.credentialsNeeded=m,e.connection.delegate.trustChallenge=n,e.connection.delegate.willConnect=o,e.connection.delegate.didConnect=p,e.connection.delegate.willDisconnect=q,e.connection.delegate.didDisconnect=r,e.connection.delegate.loginCompleted=u,e.connection.delegate.connectionHealthStateChanged=v,e.connection.delegate.mousePointerChanged=w,e.connection.delegate.showDefaultMousePointer=x,e.connection.delegate.getRemoteClipboardContent=y,e.connection.delegate.setRemoteClipboardFormatsComplete=z,e.connection.delegate.clipboardContentRequest=A,e.connection.delegate.error=G,e.connection.connect())},e.disconnect=function(a){e.state!==SessionState.Disconnecting&&(e.state=SessionState.Disconnecting,e.windowId&&(e.connection.closeWindow(e.windowId),e.windowId=null),e.connection.events.unsubscribe(ConnectionEvent.WindowIconChanged,C),!0!==a?setTimeout(function(){e.connection.disconnect()},1):setTimeout(function(){e.connection.disconnect(!0)},1))},e.mouseMove=function(a,b){e.connection.mouseMove(a,b)},e.mouseDown=function(a,b,c){e.connection.mouseDown(a,b,c)},e.mouseUp=function(a,b,c){e.connection.mouseUp(a,b,c)},e.mouseWheel=function(a,b){e.connection.mouseWheel(a,b)},e.keyDown=function(a){e.connection.keyDown(a)},e.keyUp=function(a){e.connection.keyUp(a)},e.keyUnicodeDown=function(a){e.connection.keyUnicodeDown(a)},e.keyUnicodeUp=function(a){e.connection.keyUnicodeUp(a)},e.sendTouchEvents=function(a,b){e.connection.sendTouchEvents(a,b)},e.setRemoteClipboardFormats=function(){e.connection.clipboardHandler.setRemoteClipboardFormats()},e.isClipboardReady=function(){return e.connection.isClipboardReady()},e.getBookmark=function(){return a},e.setFocus=function(a,b){d.log("[Session] Session focus changed to "+a+" id:"+e.id+" window id:"+e.windowId),c===SessionType.RemoteApp&&a&&e.windowId&&e.connection.activateWindow(e.windowId,b),e.connection.setFocus(a),e.events.fireEventCallback(SessionEvent.FocusChanged,a)},e.getFocus=function(){return e.connection.getFocus()},e.getThumbnail=function(){return null!==f?f:null!==a?a.thumbnail:null},e.getLabel=function(){return g||a&&a.label()||"no title"},e.getApplicationId=function(){return null!==h?h:e.id},e.invalidateCanvas=function(){e.connection.invalidateCanvas()},e.getConnectionId=function(){return e.connection.id},e.getSiblingCount=function(){return e.connection.getWindowCount()},e.getDisconnectReason=function(){return e.connection.disconnectReason&&!e.connection.isAutoReconnecting()?SessionDisconnectCode.locKey(e.connection.disconnectReason):null},e},StoreTransactionMode={Immediate:0,Transactional:1},StoreType={Memory:1,Persistent:2},StoreEvent={RecordAdded:0,RecordRemoved:1,RecordUpdated:2,CommitComplete:3,RollbackComplete:4},Store=function(a,b,c,d,e,f){"use strict";var g={events:new EventProvider},h=[],i=[],j={},k=function(){var a,c;if(b===StoreType.Persistent){if(!("sessionStorage"in window)||null===window.sessionStorage)throw new Error("Session storage is not supported");j={};for(a in sessionStorage)sessionStorage.hasOwnProperty(a)&&0===a.indexOf(e)&&(c=d(sessionStorage[a]))&&(i[c.id]=c,j[c.id]=c)}},l=function(a){return j.hasOwnProperty(a)},m=function(a){b===StoreType.Persistent&&delete sessionStorage[e+a],delete j[a],g.events.fireEventCallback(StoreEvent.RecordRemoved,a)},n=function(a){var d=!1;void 0!==a.id&&!0===l(a.id)&&(d=!0),b===StoreType.Persistent&&(sessionStorage[e+a.id]=c(a)),j[a.id]=a,d?g.events.fireEventCallback(StoreEvent.RecordUpdated,a.id):g.events.fireEventCallback(StoreEvent.RecordAdded,a.id)},o=function(a){var b;for(b=h.length-1;b>=0;b--)h[b].obj.id===a&&h.splice(b,1)};return g.findExcludingCommit=function(a){return l(a)?(new ObjectHelper).cloneObject(j[a]):null},g.find=function(b){var c;return k(),c=j,a===StoreTransactionMode.Transactional?(c=i,(new ObjectHelper).cloneObject(c[b])):c.hasOwnProperty(b)?(new ObjectHelper).cloneObject(c[b]):null},g.list=function(b){var c,d,e=j,f=[],g=function(a,b){for(c in b)b.hasOwnProperty(c)&&(d=b[c].id,f.hasOwnProperty(d)?(a.push(f[d]),delete f[d]):a.push((new ObjectHelper).cloneObject(b[c])));return a};if(k(),void 0===b||null===b)b=[];else{for(c in b)f[b[c].id]=b[c];b.splice(0,b.length)}return a===StoreTransactionMode.Transactional?g(b,i):g(b,e)},g.remove=function(b){a===StoreTransactionMode.Transactional?(o(b),l(b)&&(h.push({obj:{id:b},type:"Delete"}),delete i[b])):m(b)},g.removeAll=function(){var a;for(a in j)j.hasOwnProperty(a)&&g.remove(j[a].id)},g.findAllKeys=function(){return Object.keys(j)},g.save=function(b){var c;c=f?(new ObjectHelper).cloneObject(b):b,a===StoreTransactionMode.Transactional?(o(b.id),h.push({obj:c,type:"Add"}),void 0!==b.id&&(i[c.id]=c)):n(c)},g.commit=function(){var b;if(a===StoreTransactionMode.Transactional)for(b in h)if(h.hasOwnProperty(b)){var c=h[b];"Add"===c.type?n(c.obj):m(c.obj.id)}h=[],g.events.fireEventCallback(StoreEvent.CommitComplete)},g.rollback=function(){var a;i=[];for(a in j)i[j[a].id]=j[a];h=[],g.events.fireEventCallback(StoreEvent.RollbackComplete)},function(){"function"==typeof c&&c||(c=function(){return""}),"function"==typeof d&&c||(d=function(){return null}),k()}(),g},SessionStore=function(){"use strict";var a=new Store(StoreTransactionMode.Immediate,StoreType.Memory,null,null,null,!1),b=a.save;return a.save=function(a){null===a.id&&(a.id=(new ObjectHelper).createGuid()),b(a)},a},ConnectionPropertiesRejectedReason={GatewayNotSpecified:1},ConnectionPropertiesRejectedError=function(a,b){"use strict";var c=this;return this.message="Connection creation failed due to a problem with the connection properties, error="+a,this.propertiesRejectedReason=a,this.name="ConnectionPropertiesRejectedError",this.bookmark=b,this.toString=function(){return c.name+": "+c.message},this},SessionFactoryEvent={SessionCreated:0,SessionDestroyed:1,SessionFocused:2,ConnectionCreated:3,ConnectionDestroyed:4,ConnectionCreateFailed:5,RedirectionsRequest:6},RedirectionsRequest=function(a,b){"use strict";var c=this;c.properties=b,c.complete=function(b){var d=a;a=null,d&&(b.rememberCollection||(b.clipboard||(c.properties.connectionSettings.EnableClipboard=!1),b.printer||(c.properties.connectionSettings.EnablePrinting=!1)),d.complete(c.properties,b.rememberCollection))},c.cancel=function(){var b=a;a=null,b&&b.cancel()}},SessionFactory=function(a,b,c,d){"use strict";var e={},f={events:new EventProvider},g=function(a){for(var b=c.getFeedData(),d=0;d<b.workspaces.length;d++)for(var e=b.workspaces[d],f=0;f<e.bookmarks.length;f++){var g=e.bookmarks[f];if(g.id===a)return g}return null},h=function(a,c){var d,h=g(a.bookmarkId);d=new Session(h,a,SessionType.RemoteApp,b),d.windowId=c,e[c]=d.id,f.events.fireEventCallback(SessionFactoryEvent.SessionCreated,d)},i=function(a){var c=e[a];c&&(b.log("[SessionFactory] Connection destroyed window"),delete e[a],f.events.fireEventCallback(SessionFactoryEvent.SessionDestroyed,c))},j=function(a){var c=e[a];c&&(b.log("[SessionFactory] Connection activated window"),f.events.fireEventCallback(SessionFactoryEvent.SessionFocused,c))},k=function(a){f.events.fireEventCallback(SessionFactoryEvent.ConnectionDestroyed,a),a.events.unsubscribe(ConnectionEvent.ConnectionDestroyed,k),a.events.unsubscribe(ConnectionEvent.WindowCreated,h),a.events.unsubscribe(ConnectionEvent.WindowDeleted,i),a.events.unsubscribe(ConnectionEvent.WindowActivated,j)},l=function(a,c){b.log("[SessionFactory] Redirections request");var d=new RedirectionsRequest(a,c);f.events.fireEventCallback(SessionFactoryEvent.RedirectionsRequest,d)};return f.completeConnectionCreation=function(a,c,e,g,l){var m=null;a.bookmarkId=g.id,a.isExistingConnection||f.events.fireEventCallback(SessionFactoryEvent.ConnectionCreated,g.id,a),d&&e&&(b.debug("[SessionFactory] Trusting collection"),d.trustCollection(c)),a.events.subscribe(ConnectionEvent.ConnectionDestroyed,k),c.remoteApplicationMode?(b.debug("[SessionFactory] Launching remote app: "+c.remoteApplicationProgram),a.events.subscribe(ConnectionEvent.WindowCreated,h),a.events.subscribe(ConnectionEvent.WindowDeleted,i),a.events.subscribe(ConnectionEvent.WindowActivated,j),l||a.launchApplication(c.remoteApplicationProgram,c.remoteApplicationCmdLine,""),a.getState()!==ConnectionState.Connected&&(g.desktopName=g.workspaceName,m=new Session(g,a,SessionType.Desktop,b),f.events.fireEventCallback(SessionFactoryEvent.SessionCreated,m))):(m=new Session(g,a,SessionType.Desktop,b),f.events.fireEventCallback(SessionFactoryEvent.SessionCreated,m))},f.createSession=function(e,g){var h=function(b,c){try{a.createConnection(b,function(a){f.completeConnectionCreation(a,b,c,e,g)})}catch(a){return void(b.connectionSettings.UseGatewayProtocol?f.events.fireEventCallback(SessionFactoryEvent.ConnectionCreateFailed,a):f.events.fireEventCallback(SessionFactoryEvent.ConnectionCreateFailed,new ConnectionPropertiesRejectedError(ConnectionPropertiesRejectedReason.GatewayNotSpecified,e)))}};if(e)if(e.rdpFileString){var i=new ConnectionProperties(e,null),j=i.connectionSettings.EnableClipboard,k=a.findConnection(i);if(i.gatewayHostName||(i.connectionSettings.UseGatewayProtocol=!1,i.connectionSettings.UseSecureWebSockets=!0,i.connectionSettings.GatewayHostName=i.hostName,i.connectionSettings.GatewayPort=3392,i.connectionSettings.GatewayPath="rdp"),!j||k&&k.getState()!==ConnectionState.Disconnected||d&&d.isCollectionTrusted(i))h(i,!1);else{var m={complete:h,cancel:function(){b.error("[SessionFactory] Redirection confirmation cancelled")}};l(m,i)}}else b.debug("[SessionFactory] Retrieving RDP file: "+e.rdpFileURL),c.getFeedFile(e.rdpFileURL,e.tenantId).then(function(a){e.rdpFileString=a.data,f.createSession(e,g)},function(a){var b=new Error("Retrieving the RDP file for the connection failed.");b.httpResponse=a,f.events.fireEventCallback(SessionFactoryEvent.ConnectionCreateFailed,b)})},f},SessionProviderEvent={SessionCreated:0,SessionDestroyed:1,SessionFocused:2,SessionCreateFailed:3,SessionOrderChanged:4,SessionsLoaded:5,SessionGroupingChanged:6,RedirectionsRequest:7,SessionIconChanged:8},SessionProviderDelegate=function(){"use strict";this.canvasNeeded=null,this.retireCanvas=null,this.monitorBounds=null},reconnecting=!1,SessionProvider=function(a,b,c,d,e,f){"use strict";var g,h={events:new EventProvider},i={},j=function(a){var b,c=0;i={};for(b in a)a.hasOwnProperty(b)&&(i[a[b]]=c++);h.events.fireEventCallback(SessionProviderEvent.SessionOrderChanged)},k=function(a){return h.delegate.canvasNeeded?h.delegate.canvasNeeded(a):null},l=function(a){h.delegate.retireCanvas&&h.delegate.retireCanvas(a)},m=function(){return h.delegate.monitorBounds?h.delegate.monitorBounds():null},n=function(){h.activeSession&&h.activeSession.setFocus(!1),h.activeSession=null},o=function(){var a;if(h.activeSession&&h.activeSession.sessionType===SessionType.RemoteApp&&0===h.activeSession.getSiblingCount()){var b;for(a=c.list(),b=0;b<a.length;b++)if(a[b].sessionType===SessionType.Desktop&&a[b].getConnectionId()===h.activeSession.getConnectionId()){h.focusToSession(a[b].id);break}}else h.activeSession&&h.activeSession.sessionType===SessionType.Desktop&&!c.find(h.activeSession.id)&&(a=c.list(),n(),a.length>0&&h.focusToSession(a[0].id))},p=function(){var a,b=c.list();for(a=0;a<b.length;a++){var d=b[a];d.connection.getState()===ConnectionState.Dismissed&&(c.remove(d.id),h.events.fireEventCallback(SessionProviderEvent.SessionDestroyed,d.id))}},q=function(a){f.log("[SessionProvider] Session created received in provider"),p();var b=a;if(b.sessionType===SessionType.Desktop&&b.connection.isExistingConnection){var c=[];h.sessionList(c);for(var d in c)if(c[d].getConnectionId()===b.getConnectionId()){f.log("[SessionProvider] Relaunch of an existing remote desktop connection"),b=c[d];break}}else g(b);h.focusToSession(b.id)},r=function(){f.log("[SessionProvider] Session disconnect received in provider"),p(),o()},s=function(){h.events.fireEventCallback(SessionProviderEvent.SessionGroupingChanged)},t=function(){h.events.fireEventCallback(SessionProviderEvent.SessionsLoaded)},u=function(){h.events.fireEventCallback(SessionProviderEvent.SessionIconChanged)},v=function(a,b){f.log("[SessionProvider] Connection created event received."),h.setReconnecting(!1),b.events.subscribe(ConnectionEvent.WindowOrderChanged,j),b.events.subscribe(ConnectionEvent.WindowsLoaded,t),b.events.subscribe(ConnectionEvent.WindowIconChanged,u)},w=function(a){f.error("[SessionProvider] Connection create failed event received."),f.error(a.message),h.events.fireEventCallback(SessionProviderEvent.SessionCreateFailed,a)},x=function(a){a.events.unsubscribe(ConnectionEvent.WindowOrderChanged,j),a.events.unsubscribe(ConnectionEvent.WindowsLoaded,t),a.events.unsubscribe(ConnectionEvent.WindowIconChanged,u),p(),o(),f.log("[SessionProvider] Connection destroyed event received.")},y=function(a){c.find(a)&&(f.log("[SessionProvider] Session destroyed received in provider"),c.remove(a),o(),h.events.fireEventCallback(SessionProviderEvent.SessionDestroyed,a))},z=function(a){var b=c.find(a);b&&(f.log("[SessionProvider] Session focused received in provider"),h.activeSession=b,h.events.fireEventCallback(SessionProviderEvent.SessionFocused,a))},A=function(a){h.events.fireEventCallback(SessionProviderEvent.RedirectionsRequest,a)};return g=function(a){return c.save(a),a.delegate.canvasNeeded=k,a.delegate.retireCanvas=l,a.delegate.monitorBounds=m,a.events.subscribe(SessionEvent.DidDisconnect,r),a.events.subscribe(SessionEvent.ApplicationIdChanged,s),h.events.fireEventCallback(SessionProviderEvent.SessionCreated,a.id),a.id},function(){a.events.subscribe(SessionFactoryEvent.SessionCreated,q),a.events.subscribe(SessionFactoryEvent.SessionDestroyed,y),a.events.subscribe(SessionFactoryEvent.SessionFocused,z),a.events.subscribe(SessionFactoryEvent.ConnectionCreated,v),a.events.subscribe(SessionFactoryEvent.ConnectionCreateFailed,w),a.events.subscribe(SessionFactoryEvent.ConnectionDestroyed,x),a.events.subscribe(SessionFactoryEvent.RedirectionsRequest,A)}(),h.sessionList=function(a){return c.list(a)},h.connectionList=function(){return b.listActiveConnections()},h.getConnection=function(a){return b.findConnectionById(a)},h.desktopSessionList=function(a){var b,d=c.list();for(void 0===a||null===a?a=[]:a.splice(0),b=0;b<d.length;b++)d[b].sessionType===SessionType.Desktop&&0===d[b].getSiblingCount()&&a.push(d[b]);return a},h.sessionListGrouped=function(a){var b,d,e,f,g,h=c.list();if(void 0===a||null===a)a={};else for(b in a)a.hasOwnProperty(b)&&delete a[b];for(b in h)h.hasOwnProperty(b)&&h[b].sessionType===SessionType.RemoteApp&&(d=h[b],e=d.getApplicationId(),g=a[e],void 0===g&&(g={},g.thumbnail=d.getThumbnail(),a[e]=g),f=g.sessionList,void 0===f&&(f=[],g.sessionList=f),f.length>0&&i[d.windowId]<i[f[0].windowId]?f.unshift(d):f.push(d));return a},h.disconnect=function(){c.removeAll(),b.disconnectAllConnections()},h.activeSession=null,h.delegate=new SessionProviderDelegate,h.createSession=function(b,c){a.createSession(b,c)},h.find=function(a){return c.find(a)},h.focusToSession=function(a,b){var d=c.find(a);d&&d!==h.activeSession&&(h.activeSession&&h.activeSession.getConnectionId()!==d.getConnectionId()&&n(),d.setFocus(!0,b),h.activeSession=d,h.events.fireEventCallback(SessionProviderEvent.SessionFocused,d.id))},h.dismissSession=function(a){var d=c.find(a);d&&(d.state===SessionState.Disconnected?(b.removeConnection(d.connection),p(),o()):d.disconnect())},h.invalidateCanvasForActiveConnections=function(){b.invalidateCanvasForActiveConnections()},h.hasActiveConnections=function(){return b.hasActiveConnections()},h.windowsLoaded=function(){return b.windowsLoaded()},h.getReconnecting=function(){return reconnecting},h.setReconnecting=function(a){reconnecting=a},h},Module={logger:null,preRun:[],postRun:[],print:function(a){"use strict";a="[EmscriptenModule] "+Array.prototype.slice.call(arguments).join(" "),this.logger?this.logger.log(a):console.log(a)},printErr:function(a){"use strict";a="[EmscriptenModule] "+Array.prototype.slice.call(arguments).join(" "),this.logger?this.logger.error(a):console.error(a)}},CanvasGraphicsSinkFactory=function(a){"use strict";var b={};return b.createGraphicsSink=function(b,c){return new function(b){var d=b,e=document.createElement("canvas");e.width=d.width,e.height=d.height;var f=null,g=null;this.isFocused=c,this.setCanvas=function(a){f=a},this.Destroy=function(){d&&(d.delete(),d=null),g&&(g.delete(),g=null),e&&(e=null)},this.GetCanvas=function(a){return a?f:e},this.Present=function(b){if(e&&f&&g){for(var c=b.get(0),d=1;d<b.size();d++){var h=b.get(d);c.extend_rect(h),h.delete()}c.intersects(g)&&(c.clip(g),this.refreshCanvas(c,g)),c.delete()}else a.error("[CanvasGraphicsSinkFactory] Not attached to a canvas");b.delete()},this.refreshCanvas=function(a,b){if(this.isFocused){var c=f.getContext("2d");c&&c.drawImage(e,a.left,a.top,a.width(),a.height(),a.left-b.left,a.top-b.top,a.width(),a.height())}},this.refreshWholeCanvas=function(){e&&f&&g&&this.refreshCanvas(g,g)},this.GetDescriptor=function(){return d},this.SetViewport=function(b){b?a.debug("[CanvasGraphicsSinkFactory] Setting graphics sink viewport: width = "+b.width()+" height = "+b.height()):a.debug("[CanvasGraphicsSinkFactory] Removing graphics sink viewport"),g=b}}(b)},b},ConnectionState={OpeningRemotePort:0,EstablishingSecureConnection:1,ConfiguringRemoteConnection:2,DetectingNetworkQuality:3,SessionBrokerFindingDestination:4,SessionBrokerLoadingDestination:5,SessionBrokerBringingSessionOnline:6,SessionBrokerRedirectingToDestination:7,VirtualMachineLoading:8,VirtualMachineWaking:9,VirtualMachineStarting:10,VirtualMachineStartingSessionMonitoring:11,VirtualMachineRetryingSessionMonitoring:12,Connected:13,Disconnected:14,Initialized:15,Dismissed:16},ConnectionEvent={ConnectionDestroyed:0,WindowIconChanged:1,WindowDeleted:2,WindowActivated:3,WindowTitleChanged:4,WindowCreated:5,WindowApplicationIdChanged:6,WindowLaunched:7,ConnectionConnectFailed:8,WindowOrderChanged:9,WindowsLoaded:10},MouseButton={Left:0,Right:1,Middle:2,Button4:3,Button5:4},TouchState={Start:0,Move:1,End:2,Cancel:3},ConnectionDelegate=function(){"use strict";this.canvasNeeded=null,this.viewSizeChanged=null,this.credentialsNeeded=null,this.trustChallenge=null,this.willConnect=null,this.didConnect=null,this.willDisconnect=null,this.didDisconnect=null,this.loginCompleted=null,this.connectionHealthStateChanged=null,this.mousePointerChanged=null,this.showDefaultMousePointer=null,this.mousePositionChanged=null,this.multiTouchEnabled=null,this.error=null,this.getRemoteClipboardContent=null,this.clipboardContentRequest=null,this.monitorBounds=null,this.displayDesktopBackground=null},ClipboardHandler=function(a,b,c){"use strict";var d,e={};return e.clipboardReady=!1,e.clipboardOwner=Module.ClipboardOwner.Unknown,e.clipboardProtocolReady=function(a){e.clipboardReady=a},e.clipboardOwnerChanged=function(a){e.clipboardOwner=a},e.onClipboardContentRequest=function(b){a.delegate.clipboardContentRequest(b)},e.setRemoteClipboardFormats=function(){a.telemetry.clipboardUsed=!0;var b=new Module.ClipboardFormatList;b.push_back(new Module.ClipboardFormat(Module.ClipboardFormatType.Text)),b.push_back(new Module.ClipboardFormat(Module.ClipboardFormatType.UnicodeText)),d.SetRemoteClipboardFormats(b),b.delete()},e.getRemoteClipboardContent=function(b){a.telemetry.clipboardUsed=!0,d.GetRemoteClipboardContent(b)},e.getRemoteClipboardContentComplete=function(b,d,e){if(b.value===Module.ClipboardResponse.ResponseOk.value)switch(d.value){case Module.ClipboardFormatType.Text.value:break;case Module.ClipboardFormatType.UnicodeText.value:a.delegate.getRemoteClipboardContent(d,e);break;default:c.debug("[Connection] Unknown clipboard format received!")}else c.debug("[Connection] Clipboard getClipboardContent result invalid.")},e.remoteClipboardChanged=function(a){for(var b=0;b<a.size();b++){var c=a.get(b);switch(c.Type&&c.Type.value){case Module.ClipboardFormatType.UnicodeText.value:e.getRemoteClipboardContent(Module.ClipboardFormatType.UnicodeText);break;case Module.ClipboardFormatType.Text.value:e.getRemoteClipboardContent(Module.ClipboardFormatType.Text)}}a.delete()},e.setRemoteClipboardFormatsComplete=function(b){a.delegate.setRemoteClipboardFormatsComplete(b)},e.setClipboardController=function(a){d=a},e},ConnectionTelemetry=function(){"use strict";this.timeLaunched=null,this.timeConnected=null,this.timeDisconnected=null,this.initialWidth=0,this.initialHeight=0,this.initialScale=0,this.arcAttempts=0,this.arcSuccess=0,this.totalArcTime=0,this.resolutionChanged=0,this.clipboardUsed=!1,this.audioUsed=!1,this.sessionSwitchedCount=0,this.appSwitchedCount=0},Connection=function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n,o,p={id:null,correlationId:null,lastSuccessConnectionId:null,tenantId:null,bookmarkId:null,eventLogUploadAddress:null,isExistingConnection:!1,hadSuccessfulConnection:!1,disconnectReason:null,isRail:d,events:new EventProvider,telemetry:new ConnectionTelemetry,diagnosticActivityinProgress:!1},q=ConnectionState.Initialized,r=!0,s=0,t=null,u=!1,v=[],w=[],x=!1,y=null,z=0,A=function(){s=0,null!==t&&clearTimeout(t),t=null},B=function(c){var d={code:Module.DisconnectCode.UnknownError};b.debug("[Connection] Cleaning up connection"),q=ConnectionState.Disconnected,p.events&&(c||(d=null),p.events.fireEventCallback(ConnectionEvent.ConnectionDestroyed,p,d),p.events=new EventProvider),o&&o.cancel(),a&&(a.delete(),a=null),z=0,A()},C=function(a){e&&e.onException(a),i&&i.onException(p.id,a)},D=function(a){switch(a){case Module.ConnectionStatusUpdates.OpeningRemotePort:q=ConnectionState.OpeningRemotePort,b.debug("[Connection] Connection state changed to: Opening remote port");break;case Module.ConnectionStatusUpdates.EstablishingSecureConnection:q=ConnectionState.EstablishingSecureConnection,b.debug("[Connection] Connection state changed to: Establishing secure connection");break;case Module.ConnectionStatusUpdates.ConfiguringRemoteConnection:q=ConnectionState.ConfiguringRemoteConnection,b.debug("[Connection] Connection state changed to: Configuring remote connection");break;case Module.ConnectionStatusUpdates.DetectingNetworkQuality:q=ConnectionState.DetectingNetworkQuality,b.debug("[Connection] Connection state changed to: Detecting network quality");break;case Module.ConnectionStatusUpdates.SessionBrokerFindingDestination:q=ConnectionState.SessionBrokerFindingDestination,b.debug("[Connection] Connection state changed to: Session broker finding session");break;case Module.ConnectionStatusUpdates.SessionBrokerLoadingDestination:q=ConnectionState.SessionBrokerLoadingDestination,b.debug("[Connection] Connection state changed to: Session broker loading destination");break;case Module.ConnectionStatusUpdates.SessionBrokerBringingSessionOnline:q=ConnectionState.SessionBrokerBringingSessionOnline,b.debug("[Connection] Connection state changed to: Session broker bringing session online");break;case Module.ConnectionStatusUpdates.SessionBrokerRedirectingToDestination:q=ConnectionState.SessionBrokerRedirectingToDestination,b.debug("[Connection] Connection state changed to: Session broker redirecting to destination");break;case Module.ConnectionStatusUpdates.VirtualMachineLoading:q=ConnectionState.VirtualMachineLoading,b.debug("[Connection] Connection state changed to: Virtual machine loading");break;case Module.ConnectionStatusUpdates.VirtualMachineWaking:q=ConnectionState.VirtualMachineWaking,b.debug("[Connection] Connection state changed to: Virtual machine waking");break;case Module.ConnectionStatusUpdates.VirtualMachineStarting:q=ConnectionState.VirtualMachineStarting,b.debug("[Connection] Connection state changed to: Virtual machine starting");break;case Module.ConnectionStatusUpdates.VirtualMachineRetryingSessionMonitoring:q=ConnectionState.VirtualMachineRetryingSessionMonitoring,b.debug("[Connection] Connection state changed to: Virtual machine retrying session monitoring");break;case Module.ConnectionStatusUpdates.VirtualMachineStartingSessionMonitoring:q=ConnectionState.VirtualMachineStartingSessionMonitoring,b.debug("[Connection] Connection state changed to: Virtual machine starting session monitoring")}p.delegate.willConnect&&p.delegate.willConnect(q,s),!p.hadSuccessfulConnection&&p.delegate.displayDesktopBackground&&p.delegate.displayDesktopBackground(!1)},E=function(){b.debug("[Connection] Connected"),p.disconnectReason=null,A(),p.hadSuccessfulConnection=!0,p.lastSuccessConnectionId=p.correlationId&&p.correlationId.ToString(),0===p.telemetry.arcAttempts?p.telemetry.timeConnected=(new Date).getTime():(p.telemetry.arcSuccess++,p.telemetry.totalArcTime+=(new Date).getTime()-p.telemetry.timeDisconnected),p.telemetry.timeDisconnected=null,e&&e.onConnected(p),i&&i.onConnected(p),h&&h.triggerConnectionCheckPointEvent(p,"OnConnected"),q=ConnectionState.Connected,p.delegate.didConnect&&p.delegate.didConnect()},F=function(){b.debug("[Connection] Disconnecting"),p.delegate.willDisconnect&&p.delegate.willDisconnect()},G=function(c){s>0&&q===ConnectionState.OpeningRemotePort?p.disconnectReason={code:Module.DisconnectCode.AutoReconnectFailed}:p.disconnectReason=c,p.triggerConnectionEndDiagnosticEvent();var d=!1;if(i&&i.onDisconnected(p.id,c),s<20&&p.hadSuccessfulConnection&&c&&c.code&&(0===s?c.code.value!==Module.DisconnectCode.ConnectionBroken.value&&c.code.value!==Module.DisconnectCode.GatewayProtocolError.value||(d=!0,p.telemetry.timeDisconnected=(new Date).getTime()):q===ConnectionState.OpeningRemotePort&&(d=!0)),d){p.telemetry.arcAttempts++,s++,b.debug("[Connection] Autoreconnecting... "+s+" / 20");var f=1e3*(3+Math.pow(1.4,s)*Math.random());b.log("Reconnecting after "+f+" ms"),t=setTimeout(function(){p.correlationId.IncrementConnectionID(),p.triggerConnectionStartDiagnosticEvent(),a.Reconnect()},f)}else b.debug("[Connection] Disconnected"),p.telemetry.timeDisconnected=(new Date).getTime(),e&&e.onDisconnected(p),p.delegate.didDisconnect&&p.delegate.didDisconnect(c),B(!1)},H=function(a,c,d,e){b.debug("[Connection] Login completed for server: "+a+":"+c+" username: "+e+"\\"+d),p.delegate.loginCompleted&&p.delegate.loginCompleted()},I=function(a){b.debug("[Connection] Connection health state changed: "+a),p.delegate.connectionHealthStateChanged&&p.delegate.connectionHealthStateChanged(a)},J=function(a){b.debug("[Connection] Auth challenge"),a.getAuthType()!==Module.IAuthCompletion_AuthType.UsernameAndPassword&&a.getAuthType()!==Module.IAuthCompletion_AuthType.ClaimsToken&&(b.error("Only username & password authentication is currently supported."),p.delegate.error&&p.delegate.error("Only username & password authentication is currently supported."),B(!1)),o=new CredentialRequest(a),p.delegate.credentialsNeeded&&p.delegate.credentialsNeeded(o,p)
},K=function(a){b.debug("[Connection] Certificate trust challenge"),p.delegate.trustChallenge&&p.delegate.trustChallenge(a)},L=function(a){b.debug("[Connection] Request graphics sink delegate");var c=a.getSinkDescriptor();try{c.sinkType!==Module.GraphicsSinkDescriptor_SinkType.Canvas&&(b.error("Only canvas graphics sinks are currently supported."),p.delegate.error&&p.delegate.error("Only canvas graphics sinks are currently supported."));var d=new CanvasGraphicsSinkFactory(b);n=d.createGraphicsSink(c,r),n.isFocused=r,p.invalidateCanvas(),a.complete(n)}catch(a){p.delegate.error&&(b.error(a.message),p.delegate.error&&p.delegate.error(a.message)),c.delete(),B(!0)}finally{a.delete()}},M=function(a,c,d){b.debug("[Connection] Associating graphics sink with monitor");try{0!==c&&(b.error("Only one monitor is implemented"),p.delegate.error&&p.delegate.error("Only one monitor is implemented.")),p.delegate.viewSizeChanged&&p.delegate.viewSizeChanged(d.width(),d.height()),a.SetViewport(d)}catch(a){b.error(a.message),p.delegate.error&&p.delegate.error(a.message),B(!0)}},N=function(a,c){b.debug("[Connection] Unassociating graphics sink with monitor");try{0!==c&&(b.error("Only one monitor is implemented."),p.delegate.error&&p.delegate.error("Only one monitor is implemented")),a.SetViewport(null)}catch(a){b.error(a.message),p.delegate.error&&p.delegate.error(a.message),B(!0)}},O=function(a){var c;if(b.log("[Connection] Rail activated message received: "+a),u=a,a)for(p.delegate.displayDesktopBackground&&p.delegate.displayDesktopBackground(!0);v.length>0;)c=v.pop(),b.log("[Connection] Launching pending app: "+c.applicationName),p.launchApplication(c.applicationName,c.applicationArguments,c.applicationWorkingDirectory)},P=function(a){w.push(a),k.RequestApplicationId(a),p.events.fireEventCallback(ConnectionEvent.WindowCreated,p,a)},Q=function(a){var b=w.indexOf(a);b>-1&&w.splice(b,1),p.events.fireEventCallback(ConnectionEvent.WindowDeleted,a)},R=function(a,b,c){p.events.fireEventCallback(ConnectionEvent.WindowIconChanged,a,b,c)},S=function(a){y=a,p.events.fireEventCallback(ConnectionEvent.WindowActivated,a)},T=function(a,b){p.events.fireEventCallback(ConnectionEvent.WindowTitleChanged,a,b)},U=function(a,c){b.debug("[Connection] Server reports that "+a+" has been launched with result "+c.value),p.events.fireEventCallback(ConnectionEvent.WindowLaunched,p.isExistingConnection,c.value),0!==c.value&&p.delegate.error&&p.delegate.error("Launching application failed with code "+c.value)},V=function(a,c){b.debug("[Connection] Window ID: "+a+" belongs to application id: "+c),p.events.fireEventCallback(ConnectionEvent.WindowApplicationIdChanged,a,c)},W=function(){return c},X=function(a){b.debug("[Connection] ZOrder changed"),b.debug(a),p.events.fireEventCallback(ConnectionEvent.WindowOrderChanged,a)},Y=function(a){(x=!a)&&setTimeout(function(){p.events.fireEventCallback(ConnectionEvent.WindowsLoaded,p.id)},1500)},Z=function(a){b.debug("[Connection] Audio state changed to "+a)},$=function(){p.delegate.showDefaultMousePointer&&p.delegate.showDefaultMousePointer(!0)},_=function(){p.delegate.showDefaultMousePointer&&p.delegate.showDefaultMousePointer(!1)},aa=function(){z++,f.onPrintStart&&f.onPrintStart()},ba=function(a){z>0&&z--,f.onPrintUrl&&f.onPrintUrl(a)},ca=function(a){var b=0;return a===MouseButton.Left?b=Module.ButtonMask.Left:a===MouseButton.Middle?b=Module.ButtonMask.Middle:a===MouseButton.Right?b=Module.ButtonMask.Right:a===MouseButton.Button4?b=Module.ButtonMask.Button4:a===MouseButton.Button5&&(b=Module.ButtonMask.Button5),b},da=function(a){var b;return a===TouchState.Start?b=Module.TouchState.Began:a===TouchState.Move?b=Module.TouchState.Moved:a===TouchState.End?b=Module.TouchState.Ended:a===TouchState.Cancel&&(b=Module.TouchState.Cancelled),b},ea=function(a,b){for(var c=new Module.TouchList,d=da(a),e=0;e<b.length;e++){var f=b[e].adjustedTouchPos,g=new Module.HTML5TouchEvent(d,b[e].identifier,f.clientX,f.clientY);void 0!==b[e].radiusX&&void 0!==b[e].radiusY&&g.SetRadius(b[e].radiusX,b[e].radiusY),void 0!==b[e].rotationAngle&&g.SetOrientation(b[e].rotationAngle),void 0!==b[e].force&&g.SetForce(b[e].force),c.push_back(g),g.delete()}return c},fa=function(b,c){var d=new Module.MonitorList,e=new Module.Monitor,f=new Module.MonitorBounds;f.left=0,f.top=0,f.width=b,f.height=c,e.monitorBounds=f,e.fPrimary=!0,d.push_back(e),e.delete(),f.delete(),a&&a.SetMonitorLayout(d),d.delete()};return p.delegate=new ConnectionDelegate,function(){a.SetOnException(C),a.SetOnConnecting(D),a.SetOnConnected(E),a.SetOnDisconnecting(F),a.SetOnDisconnected(G),a.SetOnLoginCompleted(H),a.SetOnConnectionHealthStateChanged(I),a.SetOnAuthChallenge(J),a.SetOnTrustChallenge(K),a.SetRequestGraphicsSinkDelegate(L),a.SetAssociateGraphicsSinkWithMonitorDelegate(M),a.SetUnassociateGraphicsSinkWithMonitor(N),f&&(a.SetPrintStartDelegate(aa),a.SetPrintURLDelegate(ba)),p.telemetry.timeLaunched=(new Date).getTime()}(),p.updateMonitorLayout=function(){var a={width:800,height:448};p.delegate.monitorBounds?a=p.delegate.monitorBounds()||a:b.error("[Connection] Monitorbounds delegate not found, falling back to default monitor bounds"),q===ConnectionState.Initialized?(p.telemetry.initialWidth=a.width,p.telemetry.initialHeight=a.height,g&&(p.telemetry.initialScale=g.getWindowScale())):p.telemetry.resolutionChanged++,fa(a.width,a.height)},p.connect=function(){if(p.triggerConnectionStartDiagnosticEvent(),b.debug("[Connection] Connection.connect called"),q===ConnectionState.Disconnected||q===ConnectionState.Initialized)try{p.updateMonitorLayout(),p.clipboardHandler=new ClipboardHandler(p,e,b),j=a.QueryInputController({OnMousePointerPositionChanged:p.delegate.mousePositionChanged,OnMousePointerShapeChanged:p.delegate.mousePointerChanged,OnShowDefaultMousePointer:$,OnHideDefaultMousePointer:_,OnMultiTouchEnabled:p.delegate.multiTouchEnabled}),d&&(k=a.QueryRailController({OnWindowCreated:P,OnWindowDeleted:Q,OnWindowIconChanged:R,OnWindowTitleChanged:T,OnWindowActivated:S,OnRailActivated:O,OnApplicationLaunched:U,OnWindowIdToApplicationIdChanged:V,OnZOrderChanged:X,OnArcStateChanged:Y})),m=null,m=a.QueryClipboardController({OnClipboardProtocolReady:p.clipboardHandler.clipboardProtocolReady,OnClipboardOwnerChanged:p.clipboardHandler.clipboardOwnerChanged,OnRemoteClipboardChanged:p.clipboardHandler.remoteClipboardChanged,OnGetRemoteClipboardContentComplete:p.clipboardHandler.getRemoteClipboardContentComplete,OnSetRemoteClipboardFormatsComplete:p.clipboardHandler.setRemoteClipboardFormatsComplete,OnClipboardContentRequest:p.clipboardHandler.onClipboardContentRequest}),l=null,l=a.QueryAudioController({GetAudioContext:W,OnAudioStateChanged:Z}),p.clipboardHandler.setClipboardController(m),a.Connect()}catch(a){b.error("[Connection] Connection connect throws following exception"),b.error(a),p.disconnectReason={code:Module.DisconnectCode.UnknownError},p.telemetry.timeDisconnected=(new Date).getTime(),e&&e.onDisconnected(p),p.triggerConnectionEndDiagnosticEvent(),p.events.fireEventCallback(ConnectionEvent.ConnectionConnectFailed,p,{code:Module.DisconnectCode.UnknownError})}else b.log("[Connection] Not calling rdpConnection.Connect since connection is in state: "+q)},p.disconnect=function(c){0===w.length||c?a.Disconnect()&&B(!1):b.log("[Connection] Connection has open windows, skipping disconnection until all windows closed")},p.dismiss=function(){q=ConnectionState.Dismissed},p.mouseMove=function(a,b){j.SendMouseMove(a,b)},p.mouseDown=function(a,b,c){j.SendMouseButton(a,b,ca(c),Module.MouseEvent.Down)},p.mouseUp=function(a,b,c){j.SendMouseButton(a,b,ca(c),Module.MouseEvent.Up)},p.mouseWheel=function(a,b){j.SendMouseWheel(a,b)},p.keyDown=function(a){j.SendKeycode(a,Module.KeyEvent.Press)},p.keyUp=function(a){j.SendKeycode(a,Module.KeyEvent.Release)},p.keyUnicodeDown=function(a){j.SendUnicode(a,Module.KeyEvent.Press)},p.keyUnicodeUp=function(a){j.SendUnicode(a,Module.KeyEvent.Release)},p.sendTouchEvents=function(a,b){var c=ea(a,b);j.SendTouchEvents(c),c.delete()},p.setRemoteClipboardsFormats=function(a){m.SetRemoteClipboardFormats(a)},p.getRemoteClipboardContent=function(a){m.GetRemoteClipboardContent(a)},p.isClipboardReady=function(){return p.clipboardHandler.clipboardReady},p.setFocus=function(c){r!==c&&(r=c,a&&(r?a.EnableGraphicsUpdates():a.DisableGraphicsUpdates()),p.telemetry.sessionSwitchedCount++,n?(n.isFocused=r,r&&n.refreshWholeCanvas()):b.log("[Connection] Graphics sink not set yet, cannot set focus to: "+r))},p.getFocus=function(){return r},p.launchApplication=function(a,c,d){var e={};u?(k.LaunchApplication(a,c,d),h&&h.triggerConnectionCheckPointEvent(p,"ClientApplicationLaunch",a)):(b.log("[Connection] Rail is not active adding application to pending list: "+a),e.applicationName=a,e.applicationArguments=c,e.applicationWorkingDirectory=d,v.push(e))},p.maximizeWindow=function(a){k.WindowAction(a,Module.RailAction.Maximize)},p.minimizeWindow=function(a){k.WindowAction(a,Module.RailAction.Minimize)},p.restoreWindow=function(a){k.WindowAction(a,Module.RailAction.Restore)},p.closeWindow=function(a){k.WindowAction(a,Module.RailAction.Close)},p.activateWindow=function(a,b){b&&a!==y&&p.telemetry.appSwitchedCount++,k.WindowAction(a,Module.RailAction.Activate)},p.getState=function(){return q},p.invalidateCanvas=function(){var a;p.delegate.canvasNeeded&&(a=p.delegate.canvasNeeded(),n&&(n.GetCanvas(!0)||n.setCanvas(a),n.refreshWholeCanvas()))},p.getWindowCount=function(){return w.length},p.getPendingPrintJobCount=function(){return z},p.isAutoReconnecting=function(){return s>0},p.triggerConnectionEndDiagnosticEvent=function(a){a=a||!1,h&&(h.triggerConnectionEndEvent(p,a),p.diagnosticActivityinProgress=!1)},p.triggerConnectionStartDiagnosticEvent=function(){h&&(h.triggerConnectionStartEvent(p),p.diagnosticActivityinProgress=!0)},window.addEventListener("beforeunload",function(){h&&!0===p.diagnosticActivityinProgress&&(h.triggerConnectionCheckPointEvent(p,"OnLocalSessionEnding"),p.disconnectReason={code:Module.DisconnectCode.UserInitiated},p.triggerConnectionEndDiagnosticEvent(!0))}),p},ConnectionFactoryType={RdpConnection:0,MockConnection:1,MockDefectConnection:2},ConnectionFactory=function(a,b,c,d,e,f,g,h,i){"use strict";var j=this,k=[],l=function(a){var b,c;for(c=0;c<k.length;c++)if(b=k[c].properties,b.isEqual(a))return k[c].connection;return null},m=function(a){j.removeConnection(a)},n=function(a){a.disconnectReason&&a.disconnectReason.code!==Module.DisconnectCode.UserInitiated||j.removeConnection(a)},o=function(a){var c;for(b.log("[SessionProvider] All windows loaded for connection: "+a),c=0;c<k.length;c++)if(k[c].connection.id===a){k[c].windowsLoaded=!0;break}};this.findConnection=function(a){return l(a)},this.findConnectionById=function(a){var b;for(b=0;b<k.length;b++)if(k[b].connection.id===a)return k[b].connection;return null},this.createConnection=function(p,q){var r,s,t,u=null,v=function(a,h){p.connectionSettings.ADFSToken=a,p.connectionSettings.ClientUserAgent=f.clientUserAgent,t=Module.CorrelationID.CreateRandomCorrelationID(),s=Module.IConnection.Create(p.connectionSettings,t);var j=new Connection(s,b,c,p.remoteApplicationMode,d,e,f,g,i);j.id=t.ToString().slice(1,-1),j.correlationId=t,j.tenantId=p.tenantId,j.hostPoolId=p.properties.HostPoolID,p.connectionSettings&&(j.eventLogUploadAddress=p.connectionSettings.EventLogUploadAddress),k.push({connection:j,properties:p,windowsLoaded:!1}),j.events.subscribe(ConnectionEvent.ConnectionDestroyed,n),j.events.subscribe(ConnectionEvent.ConnectionConnectFailed,m),j.events.subscribe(ConnectionEvent.WindowsLoaded,o),j.isExistingConnection=!1,h(j)};if(b.debug("[ConnectionFactory] Creating connection to: "),b.debug(p),r=l(p),r&&r.getState()===ConnectionState.Disconnected&&(j.removeConnection(r),r=null),null===r)if(a===ConnectionFactoryType.RdpConnection)if(h){var w=h.getADFSToken(p);w.then(function(a){v(a,q)},function(){v("",q)})}else v("",q);else{if(a===ConnectionFactoryType.MockConnection)s=new MockRdpConnection(p.connectionSettings),u=new MockConnection(s,b,c,p.remoteApplicationMode,d,e,f,g,i);else{if(a!==ConnectionFactoryType.MockDefectConnection)return b.error("[ConnectionFactory] unexpected connection factory type"),null;s=new MockRdpConnection(p.connectionSettings),s.Connect=function(){throw"Mock connection failure"},u=new MockConnection(s,b,c,p.remoteApplicationMode,d,e,f,g,i)}k.push({connection:u,properties:p,windowsLoaded:!1}),u.events.subscribe(ConnectionEvent.ConnectionDestroyed,n),u.events.subscribe(ConnectionEvent.ConnectionConnectFailed,m),u.events.subscribe(ConnectionEvent.WindowsLoaded,o),u.isExistingConnection=!1,q(u)}else b.log("[ConnectionFactory] Existing connection found "),u=r,u.isExistingConnection=!0,q(u)},this.disconnectAllConnections=function(){for(var a=k.shift();a&&a.connection;)a.connection.disconnect(!0),a=k.shift()},this.removeConnection=function(a){var b;for(b=0;b<k.length;b++)if(k[b].connection===a){k.splice(b,1);break}a.dismiss()},this.invalidateCanvasForActiveConnections=function(){var a;for(a=0;a<k.length;a++)k[a].connection.invalidateCanvas()},this.hasActiveConnections=function(){return 0!==k.length},this.listActiveConnections=function(){var a,b=[];for(a=0;a<k.length;a++)b.push(k[a].connection);return b},this.windowsLoaded=function(){var a;for(a=0;a<k.length;a++)if(!1===k[a].windowsLoaded)return!1;return!0}},SessionDisconnectCode=function(){"use strict";var a={};return a.locKey=function(a){var b=Module.DisconnectCode.UnknownError;switch(a&&a.code&&(b=a.code),b){case Module.DisconnectCode.AccountDisabled:return"SESSION_DISCONNECT_CODE_ACCOUNT_DISABLED";case Module.DisconnectCode.AccountExpired:return"SESSION_DISCONNECT_CODE_ACCOUNT_EXPIRED";case Module.DisconnectCode.AccountLockedOut:return"SESSION_DISCONNECT_CODE_ACCOUNT_LOCKED_OUT";case Module.DisconnectCode.AccountRestricted:return"SESSION_DISCONNECT_CODE_ACCOUNT_RESTRICTED";case Module.DisconnectCode.AutoReconnectFailed:return"SESSION_DISCONNECT_CODE_AUTO_RECONNECT_FAILED";case Module.DisconnectCode.CantUpgradeLicense:return"SESSION_DISCONNECT_CODE_CANT_UPGRADE_LICENSE";case Module.DisconnectCode.CertExpired:return"SESSION_DISCONNECT_CODE_CERT_EXPIRED";case Module.DisconnectCode.CertMismatch:return"SESSION_DISCONNECT_CODE_CERT_MISMATCH";case Module.DisconnectCode.CertValidationFailed:return"SESSION_DISCONNECT_CODE_GENERIC_PROTOCOL_ERROR";case Module.DisconnectCode.ConnectionBroken:return"SESSION_DISCONNECT_CODE_CONNECTION_BROKEN";case Module.DisconnectCode.ConnectionTimeout:return"SESSION_DISCONNECT_CODE_CONNECTION_TIMEOUT";case Module.DisconnectCode.DecompressionFailed:return"SESSION_DISCONNECT_CODE_DECOMPRESSION_FAILED";case Module.DisconnectCode.EncryptionFailed:return"SESSION_DISCONNECT_CODE_ENCRYPTION_FAILED";case Module.DisconnectCode.GenericByServer:return"SESSION_DISCONNECT_CODE_GENERIC_BY_SERVER";case Module.DisconnectCode.GenericLicenseError:return"SESSION_DISCONNECT_CODE_GENERIC_LICENSE_ERROR";case Module.DisconnectCode.GenericNetworkError:return"SESSION_DISCONNECT_CODE_GENERIC_NETWORK_ERROR";case Module.DisconnectCode.GenericProtocolError:return"SESSION_DISCONNECT_CODE_GENERIC_PROTOCOL_ERROR";case Module.DisconnectCode.GenericSecurityError:return"SESSION_DISCONNECT_CODE_GENERIC_SECURITY_ERROR";case Module.DisconnectCode.CredSSPRequired:return"SESSION_DISCONNECT_HYBRID_REQUIRED";case Module.DisconnectCode.IdleTimeout:return"SESSION_DISCONNECT_CODE_IDLE_TIMEOUT";case Module.DisconnectCode.InitFipsFailed:return"SESSION_DISCONNECT_CODE_INIT_FIPS_FAILED";case Module.DisconnectCode.InvalidLicense:return"SESSION_DISCONNECT_CODE_INVALID_LICENSE";case Module.DisconnectCode.InvalidLogonHours:return"SESSION_DISCONNECT_CODE_INVALID_LOGON_HOURS";case Module.DisconnectCode.InvalidWorkStation:return"SESSION_DISCONNECT_CODE_INVALID_WORK_STATION";case Module.DisconnectCode.KerberosUser2UserRequired:return"SESSION_DISCONNECT_CODE_KERBEROS_USER_2_USER_REQUIRED";case Module.DisconnectCode.LogonTimeout:return"SESSION_DISCONNECT_CODE_LOGON_TIMEOUT";case Module.DisconnectCode.LogonTypeNotGranted:return"SESSION_DISCONNECT_CODE_LOGON_TYPE_NOT_GRANTED";case Module.DisconnectCode.LoopbackUnsupported:return"SESSION_DISCONNECT_CODE_LOOPBACK_UNSUPPORTED";case Module.DisconnectCode.NoLicenseAvailable:return"SESSION_DISCONNECT_CODE_NO_LICENSE_AVAILABLE";case Module.DisconnectCode.NoLicenseServer:return"SESSION_DISCONNECT_CODE_NO_LICENSE_SERVER";case Module.DisconnectCode.NoRemoteConnectionLicense:return"SESSION_DISCONNECT_CODE_NO_REMOTE_CONNECTION_LICENSE";case Module.DisconnectCode.NoSuchUser:return"SESSION_DISCONNECT_CODE_NO_SUCH_USER";case Module.DisconnectCode.PasswordExpired:return"SESSION_DISCONNECT_CODE_PASSWORD_EXPIRED";case Module.DisconnectCode.PasswordMustChange:return"SESSION_DISCONNECT_CODE_PASSWORD_MUST_CHANGE";case Module.DisconnectCode.PreAuthLogonFailed:return"SIGNIN_DIALOG_FAILED_TEXT";case Module.DisconnectCode.RemotingDisabled:return"SESSION_DISCONNECT_CODE_REMOTING_DISABLED";case Module.DisconnectCode.ReplacedByOtherConnection:return"SESSION_DISCONNECT_CODE_REPLACED_BY_OTHER_CONNECTION";case Module.DisconnectCode.ServerDeniedConnection:return"SESSION_DISCONNECT_CODE_SERVER_DENIED_CONNECTION";case Module.DisconnectCode.ServerInsufficientPrivileges:return"SESSION_DISCONNECT_CODE_SERVER_INSUFFICIENT_PRIVILEGES";case Module.DisconnectCode.ServerNameLookupFailed:return"SESSION_DISCONNECT_CODE_SERVER_NAME_LOOPUP_FAILED";case Module.DisconnectCode.ServerOutOfMemory:return"SESSION_DISCONNECT_CODE_SERVER_OUT_OF_MEMORY";case Module.DisconnectCode.ServerTool:return"SESSION_DISCONNECT_CODE_SERVER_TOOL";case Module.DisconnectCode.SSLHandshakeFailed:return"SESSION_DISCONNECT_CODE_SSL_HANDSHAKE_FAILED";case Module.DisconnectCode.TimeSkew:return"SESSION_DISCONNECT_CODE_TIME_SKEW";case Module.DisconnectCode.UnknownError:return"SESSION_DISCONNECT_CODE_UNKNOWN_ERROR";case Module.DisconnectCode.UserInitiated:return"SESSION_DISCONNECT_CODE_USER_INITIATED";case Module.DisconnectCode.VersionMismatch:return"SESSION_DISCONNECT_CODE_VERSION_MISMATCH";case Module.DisconnectCode.GatewayProtocolError:case Module.DisconnectCode.PreOrchestrationFailed:case Module.DisconnectCode.PreOrchestrationResponseError:return"SESSION_DISCONNECT_CODE_GATEWAY_PROTOCOL_ERROR";case Module.DisconnectCode.PreOrchestrationResourceNotAvailableError:return"SESSION_DISCONNECT_CODE_NO_RESOURCE_FOUND";case Module.DisconnectCode.GatewayTimeout:return"SESSION_DISCONNECT_CODE_GATEWAY_TIMEOUT";case Module.DisconnectCode.OutOfMemory:return"SESSION_DISCONNECT_CODE_OUT_OF_MEMORY";case Module.DisconnectCode.PipelineDecodeError:return"SESSION_DISCONNECT_PIPELINE_DECODE_ERROR";default:return"SESSION_DISCONNECT_CODE_UNKNOWN_ERROR"}},a}(),DeviceInfo=function(a){"use strict";var b,c,d={},e={CHROME:45,FIREFOX:55,SAFARI:9,IE:11};return function(a){b=void 0===a?new UAParser:new UAParser(a),c=b.getResult()}(a),d.getResultObject=function(){return c},d.getBrowserInfo=function(){return c.browser},d.getDeviceInfo=function(){return c.device},d.getOSInfo=function(){return c.os},d.getEngineInfo=function(){return c.engine},d.getUAString=function(){return c.ua},d.isSupportedBrowser=function(){var a=parseInt(c.browser.major);return"Chrome"===c.browser.name&&a>=e.CHROME||"Safari"===c.browser.name&&a>=e.SAFARI||"IE"===c.browser.name&&a>=e.IE||"Firefox"===c.browser.name&&a>=e.FIREFOX||"Edge"===c.browser.name},d.isWindows=function(){return"Windows"===c.os.name},d.osVersion=function(){return parseInt(c.os.version)},d.isMac=function(){return"Mac OS"===c.os.name},d.isMobile=function(){return"tablet"===c.device.type||"mobile"===c.device.type},d.isChrome=function(){return"Chrome"===c.browser.name},d.isFirefox=function(){return"Firefox"===c.browser.name},d.isSafari=function(){return"Safari"===c.browser.name},d.isIE=function(){return"IE"===c.browser.name},d.isEdge=function(){return"Edge"===c.browser.name},d};angular.module("rdCommon",[]),function(){function a(a){var b=a.localStorage;if(!b)throw new Error("Persistent storage is not available!");var c=function(a,c){try{return JSON.parse(b.getItem("RdWebAppSettings::"+a))}catch(a){return c}},d=function(a,c){b.setItem("RdWebAppSettings::"+a,JSON.stringify(c))},e={InitializeSettings:function(){e.telemetryEnabled=!0,e.IMEEnabled=!1,d("initialized",!0)},get telemetryEnabled(){return!!c("telemetryEnabled",!0)},set telemetryEnabled(a){d("telemetryEnabled",a)},get resourceLaunchMethod(){return c("resourceLaunchMethod","webclient")},set resourceLaunchMethod(a){d("resourceLaunchMethod",a)},get dismissedGDPRBanner(){return!!c("dismissedGDPRBanner",!1)},set dismissedGDPRBanner(a){d("dismissedGDPRBanner",a)},get dismissedUnsupportedBrowser(){return!!c("dismissedUnsupportedBrowser",!1)},set dismissedUnsupportedBrowser(a){d("dismissedUnsupportedBrowser",a)},get dismissedAudioUnsupported(){return!!c("dismissedAudioUnsupported",!1)},set dismissedAudioUnsupported(a){d("dismissedAudioUnsupported",a)},get IMEEnabled(){return!!c("IMEEnabled",!1)},set IMEEnabled(a){d("IMEEnabled",a)}};return c("initialized",!1)||e.InitializeSettings(),!0===DeploymentSettings.launchResourceInBrowser?e.resourceLaunchMethod="webclient":!1===DeploymentSettings.launchResourceInBrowser?e.resourceLaunchMethod="nativeclient":e.resourceLaunchMethod=e.resourceLaunchMethod||"webclient",d("resourceLaunchMethod",e.resourceLaunchMethod),e}angular.module("rdCommon").factory("appSettingsStore",["$window",a])}(),function(){function a(){var a=!(void 0===window.AudioContext&&void 0===window.webkitAudioContext),b=function(a){function b(a,b){a.map(function(c){c.idx<b&&c.idx++,a[b].idx=0})}function c(){d.isSupportedBrowser()||(f=!0)}var d=new DeviceInfo(a),e=(d.getResultObject(),[{idx:0,name:"Internet Explorer",show:!0,url:"http://windows.microsoft.com/en-us/internet-explorer/download-ie"},{idx:1,name:"Microsoft Edge",show:!0,url:"https://www.microsoft.com/en-us/windows/microsoft-edge"},{idx:2,name:"Google Chrome",show:!0,url:"https://www.google.com/chrome/browser/desktop/index.html"},{idx:3,name:"Safari",show:!0,url:"https://support.apple.com/en-us/HT204416"},{idx:4,name:"Mozilla Firefox",show:!0,url:"https://www.mozilla.org/en-US/firefox/new/"}]),f=!1,g={IE:0,EDGE:1,CHROME:2,SAFARI:3,FIREFOX:4};return function(){e[g.EDGE].show=d.isWindows()&&d.osVersion()>=10,d.isWindows()||(e[g.IE].show=!1,e[g.EDGE].show=!1),d.isMac()||(e[g.SAFARI].show=!1),c()}(),d.isMobile()?f=!0:d.isChrome()?b(e,g.CHROME):d.isFirefox()?b(e,g.FIREFOX):d.isSafari()?b(e,g.SAFARI):d.isIE()||d.isEdge()||(d.isMac()&&b(e,g.SAFARI),f=!0),{deviceInfo:d,value:f,options:e}},c={isAudioSupported:function(){return a},getBrowserSupportData:b},d=Object.create(c);return d.$get=function(){return c},d}angular.module("rdCommon").provider("browserCapabilities",a)}(),function(){var a=function(){var a;return{storeCreds:function(b,c){a=new Credential,a.userName=b,a.password=c},getSavedCreds:function(){return a&&angular.copy(a)}}};angular.module("rdCommon").service("credentialStore",a)}(),function(){var a=function(a,b,c){var d={},e="RD Console Logs.txt";return b("CONSOLE_LOG_FILE_NAME").then(function(a){e=a},function(a){e=a}),d.downloadLogs=function(){var b=c.getListOfLogs(),d=new Blob(b,{type:"text/plain"}),f=URL.createObjectURL(d);if(a.navigator.msSaveBlob)a.navigator.msSaveBlob(d,e);else{var g=a.document.getElementById("logDownloadLink");g?(g.download=e,g.href=f,g.click()):c.error("The link for downloading logs could not be found.")}},d};angular.module("rdCommon").factory("consoleLogDownloader",["$window","$translate","logger",a])}(),function(){var a=function(a,b){var c={};return c.downloadRdpFile=function(c,d){d=(d||"remoteApp")+".rdp";var e=new Blob([c],{type:"text/plain"});if(a.navigator.msSaveBlob)a.navigator.msSaveBlob(e,d);else{var f=URL.createObjectURL(e),g=a.document.getElementById("rdpFileDownloadLink");g.setAttribute("download",d),g.href=f,g.click(),b(function(){URL.revokeObjectURL(f)},100)}},c};angular.module("rdCommon").factory("rdpFileDownloader",["$window","$timeout",a])}(),function(){function a(a){return{parseWorkspaceFeed:function(b){function c(a,b){const c=a._Title.toUpperCase(),d=b._Title.toUpperCase(),e=a._Type,f=b._Type;var g=0;return e===f?c>d?g=1:d>c&&(g=-1):g="RemoteApp"===f?1:-1,g}var d=new X2JS,e=d.xml_str2json(b),f={publisher:e.ResourceCollection.Publisher._Name,publisherId:e.ResourceCollection.Publisher._ID,bookmarks:[],folders:[],url:null,description:e.ResourceCollection.Publisher._Description,supportInfoPresent:!1,supportObj:{logoURL:null,supportURL:null,supportPhone:null,privacyURL:null}},g=f.description,h=g.indexOf("{");if(h>=0&&(f.description=g.substr(0,h),g=g.substr(h),g=g.trim(),g.search("{*}")))try{f.supportObj=JSON.parse(g),f.supportInfoPresent=!0}catch(b){f.supportObj=null,a.log("Error in reading the following support information JSON : "+g)}var i,j=d.asArray(e.ResourceCollection.Publisher.Resources.Resource);j.sort(c);var k,l,m,n;for(k=0;k<j.length;k++){if(i=new Bookmark,i.id=j[k]._ID,i.friendlyName=j[k]._Title,i.thumbnail=j[k].Icons.Icon32._FileURL,i.rdpFileURL=d.asArray(j[k].HostingTerminalServers.HostingTerminalServer)[0].ResourceFile._URL,i.workspaceName=f.publisher,i.bookmarkType="RemoteApp"===j[k]._Type?BookmarkType.RemoteApp:BookmarkType.RemoteDesktop,j[k].Folders)for(m=d.asArray(j[k].Folders.Folder),l=0;l<m.length;l++)n=m[l]._Name,"/"===n[0]&&n.length>1&&(n=n.substr(1)),f.folders.indexOf(n)<0&&"/"!==n&&f.folders.push(n),i.folderNames.push(n);f.bookmarks.push(i)}return f.folders.sort(function(a,b){return a.localeCompare(b)}),f}}}angular.module("rdCommon").factory("feedParser",["logger",a])}(),angular.module("rdCommon").provider("logger",[function(){var a=new Logger;a.setLogLevel(LogLevel.All);var b=Object.create(a);return b.$get=function(){return a},b}]),angular.module("rdCommon").factory("platformInfo",["$window","$translate",function(a,b){return new PlatformInfo(new DeviceInfo,a,b)}]),function(){var a=function(){return{getRetryInterval:function(){return 5e3},getWorkspaceUpdateInterval:function(){return 72e5},getFeedRetrivalMaxRetry:function(){return 5}}};angular.module("rdCommon").service("rdCommonRuntimeParameters",a)}(),angular.module("rdCommon").factory("telemetrySink",["$window",function(a){return a.awa||null}]),function(){function a(a,b,c,d,e,f,g){var h=function(){var h,i=this,j=!1,k=!1,l=e.localStorage,m=null,n=null,o=null,p={loaded:!1,multiTenant:!1,feedCount:0,publishedFolderCount:0,publishedAppCount:0,publishedDesktopCount:0},q=function(){if(d&&!j){var a={coreData:{appId:"RdWebClient",sendEvents:!0}};l&&(m=l.getItem("RdWebClient::Telemetry::supportID")),m||h(),d.ids.setAppUserId("c:"+m),d.init(a),c.log("Telemetry initialized and enabled."),j=!0}},r=function(){if(d&&j){var a={name:"Microsoft.RDS.Web.Client.DailyDeviceInfo",data:{"Microsoft.RDS.Web.Client.DailyDeviceInfo":{eventVersion:1,appVersion:b.clientVersion,locale:b.getLocale(),hardwareModeEnabled:b.isHardwareModeEnabled()}}};d.writeEvent(a)}},s=function(){if(d&&j){const c=a.resourceLaunchMethod;var e={name:"Microsoft.RDS.Web.Client.DailyResourceLaunchMethod",data:{"Microsoft.RDS.Web.Client.DailyResourceLaunchMethod":{eventVersion:1,appVersion:b.clientVersion,resourceLaunchMethod:c}}};d.writeEvent(e)}},t=function(){if(d&&j){var a=0,c=0,e=0,f=0,g=0,h=0,i=0;p.multiTenant?(a=p.feedCount,e=p.publishedDesktopCount,g=p.publishedAppCount,i=p.publishedFolderCount):(c=p.publishedDesktopCount,f=p.publishedAppCount,h=p.publishedFolderCount);var k={name:"Microsoft.RDS.Web.Client.DailyResourceInfo",data:{"Microsoft.RDS.Web.Client.DailyResourceInfo":{eventVersion:1,appVersion:b.clientVersion,feedCountMT:a,publishedDesktopCount:c,publishedDesktopCountMT:e,publishedAppCount:f,publishedAppCountMT:g,publishedFolderCount:h,publishedFolderCountMT:i}}};d.writeEvent(k)}},u=function(a){if(d&&j){var c,e=0,f=a.telemetry.initialWidth+"x"+a.telemetry.initialHeight,g=Math.round(100*a.telemetry.initialScale);a.telemetry.timeConnected&&(e=Math.round((a.telemetry.timeConnected-a.telemetry.timeLaunched)/1e3)),c=p.multiTenant?a.isRail?"publishedAppMT":"publishedDesktopMT":a.isRail?"publishedApp":"publishedDesktop";var h={name:"Microsoft.RDS.Web.Client.SessionLaunch",data:{"Microsoft.RDS.Web.Client.SessionLaunch":{eventVersion:1,appVersion:b.clientVersion,success:!!a.telemetry.timeConnected,sourceType:c,connectionId:a.bookmarkId,launchTime:e,correlationId:a.id,resolutionUsed:f,scaleUsed:g}}};d.writeEvent(h)}},v=function(a){if(d&&j){var c=a.disconnectReason.code.value===Module.DisconnectCode.UserInitiated.value,e=0,f=a.disconnectReason.code.value,g=a.disconnectReason.extendedCode,h=0;a.telemetry.arcSuccess>0&&(h=Math.round(a.telemetry.totalArcTime/a.telemetry.arcSuccess/1e3)),a.telemetry.timeConnected&&(e=Math.round((a.telemetry.timeDisconnected-a.telemetry.timeConnected)/6e4));var i={name:"Microsoft.RDS.Web.Client.SessionData",data:{"Microsoft.RDS.Web.Client.SessionData":{eventVersion:1,appVersion:b.clientVersion,simpleDisconnectCode:f,userInitiated:c,serverStackDisconnectCode:g,correlationId:a.id,minutes:e,arcTriggered:a.telemetry.arcAttempts,arcSuccess:a.telemetry.arcSuccess,arcAvgTimeToConnect:h}}};d.writeEvent(i)}},w=function(a){var c=a.telemetry.appSwitchedCount,e=a.telemetry.sessionSwitchedCount;if(d&&j){var f={name:"Microsoft.RDS.Web.Client.InSessionActivity",data:{"Microsoft.RDS.Web.Client.InSessionActivity":{eventVersion:1,appVersion:b.clientVersion,correlationId:a.id,sessionSwitched:e,appSwitched:c,resolutionChanged:a.telemetry.resolutionChanged,clipboardUsed:a.telemetry.clipboardUsed,audioUsed:a.telemetry.audioUsed}}};d.writeEvent(f)}},x=function(a){if(d&&j){var c={name:"Microsoft.RDS.Web.Client.CrashStackTrace",data:{"Microsoft.RDS.Web.Client.CrashStackTrace":{eventVersion:1,appVersion:b.clientVersion,exception:a}}};d.writeEvent(c)}},y=function(){if(!n&&l)try{n=parseInt(l.getItem("RdWebClient::Telemetry::dailyEventTimestamp"))}catch(a){c.warn("Could not read the daily event timestamp from local storage: "+a)}return n},z=function(a){if(n=a,l)try{l.setItem("RdWebClient::Telemetry::dailyEventTimestamp",n.toString())}catch(a){c.warn("Could not write the daily event timestamp to local storage: "+a)}},A=function(){r(),t(),s(),z((new Date).getTime()),o=f(A,864e5)},B=function(){if(!o&&p.loaded){var a,b=y(),c=(new Date).getTime();a=!b||c-b>=864e5?0:864e5-(c-b),o=f(A,a)}},C=function(){o&&(f.cancel(o),o=null)},D=function(a){p.loaded=!a.loading&&!a.loadFailed,p.multiTenant=a.multiTenant,p.feedCount=a.workspaces.length,p.publishedFolderCount=0,p.publishedAppCount=0,p.publishedDesktopCount=0;for(var b=0;b<a.workspaces.length;b++){p.publishedFolderCount+=a.workspaces[b].folders.length;for(var c=a.workspaces[b],e=0;e<c.bookmarks.length;e++){c.bookmarks[e].bookmarkType===BookmarkType.RemoteApp?p.publishedAppCount++:p.publishedDesktopCount++}}d&&j&&B()};h=function(){var a=new ObjectHelper;if(m=a.createGuid(),l)try{l.setItem("RdWebClient::Telemetry::supportID",m)}catch(a){c.warn("Could not write support ID to local storage: "+a)}};var E=function(){m=null,l.removeItem("RdWebClient::Telemetry::supportID")};i.disable=function(){j&&(d.getConfig().sendEvents=!1,c.log("Telemetry disabled")),k=!1,E(),C()},i.enable=function(){DeploymentSettings.suppressTelemetry||(j&&!k?(h(),d.getConfig().sendEvents=!0,c.log("Telemetry enabled")):q(),k=!0,B())},i.onConnected=function(a){0===a.telemetry.arcAttempts&&u(a)},i.onDisconnected=function(a){a.telemetry.timeConnected?(v(a),w(a)):(u(a),v(a))},i.onException=function(a){x(a)},i.getSupportID=function(){return k?m:null},g.$on("rdFeedTracker:feedsLoaded",function(a,b){D(b)})},i=new h;return a.telemetryEnabled&&!DeploymentSettings.suppressTelemetry&&i.enable(),i}angular.module("rdCommon").factory("telemetry",["appSettingsStore","platformInfo","logger","telemetrySink","$window","$timeout","$rootScope",a])}(),angular.module("rdWeb",["rdCommon"]),function(){function a(a,b,c){var d,e=!0,f=!1;return function g(){f=!1,a.get("config/brokercert.cer",{rdFeedRequest:!0,responseType:"arraybuffer"}).then(function(a){d=a.data,e=!1,b(g,c.getWorkspaceUpdateInterval())},function(a){
404===a.status?(console.error("The broker certificate was not found on the server. It may not be properly configured."),b(g,c.getRetryInterval())):(console.error("Error while trying to download the broker cert, reason: "+JSON.stringify(a)),b(g,c.getRetryInterval())),e&&(f=!0)})}(),{getBrokerCert:function(){return d},isLoading:function(){return e},didLoadFail:function(){return f}}}angular.module("rdWeb").factory("rdCertTracker",["$http","$timeout","rdCommonRuntimeParameters",a])}(),function(){function a(){return{onRdCoreDebuggingEvent:function(){},onException:function(){},onConnected:function(){},onDisconnected:function(){},onFeedStart:function(){},onFeedSuccess:function(){},onFeedFailure:function(){},onFeedResourceDownloadFailure:function(){}}}angular.module("rdWeb").factory("rdDebuggingEvents",[a])}(),function(){function a(){return{triggerFeedStartEvent:function(){},triggerFeedSuccessEvent:function(){},triggerFeedFailedEvent:function(){},triggerConnectionStartEvent:function(){},triggerConnectionEndEvent:function(){},triggerConnectionCheckPointEvent:function(){}}}angular.module("rdWeb").factory("rdDiagnostics",[a])}(),function(){function a(a,b,c){return{getWorkspace:function(d){var e=a.defer(),f={rdFeedRequest:!0,headers:{Accept:"application/x-msts-radc+xml;radc_schema_version=2.0,text/xml"}};return b.get(d,f).then(function(a){200!==a.status&&e.reject("Unexpected HTTP status: "+a.status);try{e.resolve(c.parseWorkspaceFeed(a.data))}catch(a){e.reject("Web feed processing failed!")}},function(a){e.reject(a)}),e.promise}}}angular.module("rdWeb").factory("rdWebFeedRetriever",["$q","$http","feedParser",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){var j=new ObjectHelper,k=new FeedData;k.multiTenant=!1;var l,m,n=!0,o=!1,p=function(a){return g.get(a,{rdFeedRequest:!0})},q=function(){k.loading=n||e.isLoading(),k.loadFailed=o||e.didLoadFail()},r=function(){var a=e.getBrokerCert();if(a&&k.workspaces&&1===k.workspaces.length&&k.workspaces[0].bookmarks){var b;for(b=0;b<k.workspaces[0].bookmarks.length;b++)k.workspaces[0].bookmarks[b].endpointCert=a}},s=function(a){a.rdpFileURL&&p(a.rdpFileURL).then(function(b){a.rdpFileString=b.data},function(a){i.error("RDP file retrieval failed, reason:"+JSON.stringify(a))})},t=function(){if(k.workspaces&&1===k.workspaces.length&&k.workspaces[0].bookmarks){var a;for(a=0;a<k.workspaces[0].bookmarks.length;a++)s(k.workspaces[0].bookmarks[a])}};a.$watch(e.getBrokerCert,r),a.$watch(e.isLoading,q),a.$watch(e.didLoadFail,q);var u=function(){var b=j.createGuid();h&&h.triggerFeedStartEvent(b),o=!1,q(),d.getWorkspace("/RDWeb/Pages/WebFeed.aspx").then(function(c){i.log("Successfully retrieved feed"),c.url="/RDWeb/Pages/WebFeed.aspx",k.workspaces=[c],n=!1,q(),r(),t(),a.$broadcast("rdFeedTracker:feedsLoaded",k),h&&h.triggerFeedSuccessEvent(b),l()},function(a){var c=401===a.status,d=new ErrorInfo("RDWeb","GetTenantResource",a.status,"WORKSPACE_RTVL_FAIL","Feed retrieval failed, reason:"+JSON.stringify(a));i.error(d.errorMessage),n&&(o=!0,q()),h&&h.triggerFeedFailedEvent(d,b),c?f.login().then(u,function(a){i.error("Attempt to log back in to the site failed, reason:"+JSON.stringify(a)),m()}):m()})};return l=function(){k.numRetry=0,b(u,c.getWorkspaceUpdateInterval())},m=function(){i.log("Retrying feed retrival, Current Retry count = "+k.numRetry),k.numRetry<c.getFeedRetrivalMaxRetry()?(b(u,c.getRetryInterval()),k.numRetry++):k.loading=!1},a.$on("rdFeedTracker:loggedIn",u),{getFeedData:function(){return k},getFeedFile:p}}angular.module("rdWeb").factory("rdFeedTracker",["$rootScope","$timeout","rdCommonRuntimeParameters","rdWebFeedRetriever","rdCertTracker","userAuthInfoService","$http","rdDiagnostics","logger",a])}(),function(){var a=function(a){var b=function(a){var b=!1;if(a.headers("content-type").toLowerCase().startsWith("text/xml;")){(new DOMParser).parseFromString(a.data,"application/xml").querySelector("RDWAPage > HTMLMainContent > form[name=FrmLogin]")&&(b=!0)}return b};return{request:function(a){if(a&&a.rdFeedRequest){var b=angular.copy(a);return b.withCredentials=!0,b}return a},response:function(c){return c&&c.config&&c.config.rdFeedRequest&&b(c)?(c.status=401,c.statusText="Authentication to RD Web Access Failed.",a.reject(c)):c}}},b=function(a){a.interceptors.push("rdWebHttpInterceptor")};angular.module("rdWeb").factory("rdWebHttpInterceptor",["$q",a]).config(["$httpProvider",b])}(),function(){var a=function(a,b,c){var d;return{getUrlPath:function(){var e=b.defer();return d?c(function(){e.resolve(d)}):a.get("/RDWeb/Pages/Default.aspx").then(function(a){var b=new DOMParser,c=b.parseFromString(a.data,"application/xml"),e=c&&c.documentElement&&c.documentElement.getAttribute("baseurl");"RDWAPage"===c.documentElement.tagName&&e&&(d=new URL(e).pathname)},angular.noop).finally(function(){d||(d="/RDWeb/Pages/en-US/"),e.resolve(d)}),e.promise}}};angular.module("rdWeb").service("rdWebLocaleUrlFinder",["$http","$q","$timeout",a])}(),function(){var a=function(a,b,c,d,e,f,g,h){var i=function(){var b=c.defer();return g.getUrlPath().then(function(c){a.get(c+"logoff.aspx",{rdFeedRequest:!0}).then(function(a){b.resolve(a)},function(a){b.reject(a)})},angular.noop),b.promise},j=null,k=!0,l=function(a){try{return(new X2JS).xml_str2json(a).RDWAPage._baseurl+"password.aspx"}catch(a){return f.log("Error in parsing password response xml"+JSON.stringify(a)),null}},m=function(a){var b={message:"SIGNIN_DIALOG_FAILED_TEXT",passwordResetLink:null},c=a.indexOf('style="display:"');if(c>200){var d=a.substring(c-200,c);-1!==d.indexOf("trPasswordExpiredNoChange")?b.message="SESSION_DISCONNECT_CODE_PASSWORD_EXPIRED":-1!==d.indexOf("trPasswordExpired")&&(b.message="SESSION_DISCONNECT_CODE_PASSWORD_EXPIRED_WITH_CHANGE_LINK",b.passwordResetLink=l(a))}return b},n=function(a){try{var b=document.createElement("iframe");b.setAttribute("aria-hidden","true"),b.setAttribute("tabindex","-1"),b.style.visibility="hidden",b.style.position="absolute",b.style.width=b.style.height=b.borderWidth="0px",b.src=a,b.onload=function(){-1===b.contentWindow.location.href.search("password.aspx")&&(k=!1)},document.getElementsByTagName("body")[0].appendChild(b)}catch(a){f.log("Error in checking for PasswordChangeEnabled flag"+JSON.stringify(a))}},o=!1;return{isAuthenticated:function(){return o},isInteractiveLoginRequired:function(){return!0},getUserName:function(){return null},getUPN:function(){return null},getCachedToken:function(){return null},getPasswordResetLink:function(){return j},getPasswordChangeEnabled:function(){return k},login:function(b,i){var k=c.defer(),p=!1;if(!b){var q=h.getSavedCreds();q?(b=q.userName,i=q.password,p=!0):e(function(){k.reject({result:"ReLoginFailedNoSavedCreds"})})}return b&&g.getUrlPath().then(function(c){a.post(c+"login.aspx","DomainUserName="+encodeURIComponent(b)+"&UserPass="+encodeURIComponent(i),{rdFeedRequest:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){p||(d.$broadcast("rdFeedTracker:loggedIn"),o=!0,h.storeCreds(b,i)),j=l(a.data),n(j),f.log("Log in succeeded."),k.resolve()},function(a){f.error("Log in failed."),k.reject(m(a.data))})},angular.noop),k.promise},logout:function(){var a=function(a){401!==a.status&&f.error("Sign out unexpectedly failed, reason:"+JSON.stringify(a)),b.location.reload()};i().then(a,a)}}};angular.module("rdWeb").service("userAuthInfoService",["$http","$window","$q","$rootScope","$timeout","logger","rdWebLocaleUrlFinder","credentialStore",a])}(),angular.module("rdStandalone",["AdalAngular","rdCommon"]),function(){var a=function(a){var b=new Map;return{setActivityHintForCorrelationID:function(a,c){b.has(a)||b.set(a,c)},getActivityHintForCorrelationID:function(c){if(b.has(c))return b.get(c);a.error("Requested correlation ID not found in Map correlation ID-Tenant ID map")},deleteCorrelationIDKey:function(c){if(b.has(c))return b.delete(c);a.log("Deletion failed, requested correlation ID not foundin Map correlation ID-Activity hint map")}}};angular.module("rdStandalone").factory("rdStandaloneActivityHintLookup",["logger",a])}(),function(){var a=function(a,b,c,d,e){var f=this,g="",h=a.getAuthConfig(),i=new ObjectHelper,j=function(a){for(var b={},c=/([^&=]+)=([^&]*)/g,d=c.exec(a);d;)b[decodeURIComponent(d[1])]=decodeURIComponent(d[2]),d=c.exec(a);return b},k=function(a,b,d){var e=[];e.push("?response_type=token"),e.push("client_id="+encodeURIComponent(a.clientId)),b&&e.push("resource="+encodeURIComponent(b));var f=location.href.split("/");f[f.lastIndexOf("webclient")]="webclientsso";var g=f.join("/");e.push("redirect_uri="+encodeURIComponent(g));var h=a.state?a.state:i.createGuid();e.push("state="+encodeURIComponent(h)),a.hasOwnProperty("slice")&&e.push("slice="+encodeURIComponent(a.slice)),d&&e.push("login_hint="+encodeURIComponent(d));var j=a.correlationId?a.correlationId:i.createGuid();e.push("client-request-id="+encodeURIComponent(j));var k=a.instance+"/oauth2/authorize"+e.join("&")+"&prompt=none"+a.extraQueryParameter;return c.log("[GetCertLogonToken] Navigate url:"+k),k};return f.getADFSToken=function(a){var f=d.defer(),i=a.connectionSettings.GatewayCertLogonAuthority,l=function(a){try{var b=document.createElement("iframe");b.setAttribute("aria-hidden","true"),b.setAttribute("tabindex","-1"),b.style.visibility="hidden",b.style.position="absolute",b.style.width=b.style.height=b.borderWidth="0px",b.src=a,b.onload=function(){var a=b.contentWindow.location,d=a.hash;d.indexOf("#/")>-1?d=d.substring(d.indexOf("#/")+2):d.indexOf("#")>-1&&(d=d.substring(1));var e=j(d);e.hasOwnProperty("access_token")?g=e.access_token:e.hasOwnProperty("error_description")&&c.error("error in retrieving cert logon token: "+e.error_description),f.resolve(g)};return document.getElementsByTagName("body")[0].appendChild(b)}catch(a){c.error("[GetCertLogonToken] "+a),f.reject(a)}};if(h.resourceUrl||(c.error("[GetCertLogonToken] resource not found"),f.reject("resourceURL not found")),i)try{var m=b.config;m.instance=i,m.extraQueryParameter="&scope=logon_cert";b.getUser().then(function(b){var c=k(m,h.resourceUrl,b.userName);a.connectionSettings.ADFSUserName=b.userName,c&&l(c)},function(){c.warn("[GetCertLogonToken] User name not retrieved")})}catch(a){c.error("[GetCertLogonToken] "+a),f.reject(a)}else c.error("[GetCertLogonToken] GatewayCertLogonAuthority not found"),f.reject("GatewayCertLogonAuthority not found");return e(function(){c.error("Timeout in retrieving cert logon token"),f.reject("Timeout in retrieving cert logon token")},1e4),f.promise},f};angular.module("rdStandalone").factory("rdStandaloneCertLogonTokenService",["rdStandaloneConfigParameters","adalAuthenticationService","logger","$q","$timeout",a])}(),function(){var a=function(){var a={getDiscoveryUrl:function(){return DeploymentSettings&&DeploymentSettings.multiTenantConfig&&DeploymentSettings.multiTenantConfig.discoveryUrl},getAuthConfig:function(){var a=DeploymentSettings&&DeploymentSettings.multiTenantConfig&&DeploymentSettings.multiTenantConfig.authConfig;return{authority:a&&a.authority,clientID:a&&a.clientID,resourceUrl:a&&a.resourceUrl}},$get:function(){return{getDiscoveryUrl:a.getDiscoveryUrl,getAuthConfig:a.getAuthConfig}}};return a};angular.module("rdStandalone").provider("rdStandaloneConfigParameters",a)}(),function(){var a=function(a,b,c,d,e,f){var g,h,i,j=[],k=null,l=function(){g=a.getDebuggingEventInfoAndToken(),h=g.debuggingLogUploadUrl,i=g.debuggingLogSaSToken},m=function(){if(l(),j.length>0&&i){var a={method:"POST",headers:{Authorization:i,"Content-Type":"application/atom+xml;type=entry;charset=utf-8","X-MS-User-Agent":f.clientUserAgent}};c.post(h,j[0],a).then(function(){j.shift(),k=d(m)},function(a){if(e.error("Debugging logs upload failed, reason:"+JSON.stringify(a)),a&&a.status)switch(a.status){case 429:e.warn("Too many request to the server"),a.headers&&a.headers("retry-after")?(k=d(m,1e3*a.headers("retry-after")),e.log("Will retry debugging log upload after "+a.headers("retry-after")+" seconds")):(e.error("Retry-After attribute is missing from the throtting request"),k=d(m,5e4));break;case 400:e.warn("Discarding an event that has been rejected by the service..."),j.shift(),k=d(m,5e3);break;default:k=d(m,5e3)}else k=d(m,5e3)})}else k=null},n=function(){l();for(var a=0;a<j.length;a++){var b=new XMLHttpRequest;b.open("POST",h,!1),b.withCredentials=!0,b.setRequestHeader("Content-Type","application/json;charset=UTF-8"),b.setRequestHeader("Accept","application/json, text/plain, */*"),b.setRequestHeader("Authorization",i),b.setRequestHeader("X-MS-User-Agent",f.clientUserAgent),b.send(JSON.stringify(j[a]))}j=[]},o=function(a){if(j.length>=1e3){var b=j[j.length-1];if("BufferFull"!==b.TaskName){var c=new DebugInfo;c.ClientInstance=b.clientVersion,c.ClientOS=b.ClientOS,c.Level=4,c.TaskName="BufferFull",c.ChannelName="RDWebClient",c.ActivityId=b.ActivityId,c.Msg="pending events buffer is full, unable to upload more messages",c.Ex="",j.push(c)}}else j.push(a);k||(k=d(m))};return window.addEventListener("beforeunload",function(){n()}),{debuggingEvent:o}};angular.module("rdStandalone").service("rdDebuggingEventUpload",["rdDebuggingEventUploadSaSTokenManager","$rootScope","$http","$timeout","logger","platformInfo",a])}(),function(){function a(a,b,c,d,e){var f=d.clientOSAndBrowserWithVersions,g=function(a){switch(a){case"Exception":return 101;case"connect":return 102;case"disconnect":return 103;case"FeedDiscovery":return 201;case"GetWorkspace":return 202;case"GetRDPFile":return 203;case"GetIconFile":return 204}return 300};return{onRdCoreDebuggingEvent:function(b,c,g,h){var i=new DebugInfo;i.ClientInstance=d.clientVersion,i.ClientOS=f,i.Level=h,i.TaskName=c,i.ChannelName="RDCoreHTML",i.ActivityId=b,i.Msg=g,i.Ex="",i.EventId=100,a.debuggingEvent(i),e.log("Core telemetry event: eventName="+c+", traceMessage="+g)},onException:function(b,c){var h=new DebugInfo;h.ClientInstance=d.clientVersion,h.ClientOS=f,h.Level=2,h.TaskName="Exception",h.ChannelName="RDCoreHTML",h.ActivityId=b,h.Msg="",h.Ex="exceptionDescription",h.ClientInstance=d.clientVersion,h.EventId=g(h.TaskName),a.debuggingEvent(h),e.log("exceptioncaught"+c+h)},onConnected:function(b){var c=new DebugInfo;c.ClientInstance=d.clientVersion,c.ClientOS=f,c.Level=4,c.TaskName="connect",c.ChannelName="RDHTML",c.ActivityId=b.id,c.Msg="",c.Ex="",c.EventId=g(c.TaskName),a.debuggingEvent(c)},onDisconnected:function(b,c){var e=new DebugInfo;e.ClientInstance=d.clientVersion,e.ClientOS=f,e.Level=4,e.TaskName="disconnect",e.ChannelName="RDHTML",e.ActivityId=b,e.Msg=Module.GetDisconnectCodeString(c.code),e.Ex="",e.EventId=g(e.TaskName),a.debuggingEvent(e)},onFeedStart:function(b,c){var e=new DebugInfo;e.ClientInstance=d.clientVersion,e.ClientOS=f,e.Level=4,e.TaskName=c,e.ChannelName="RDHTML",e.ActivityId=b,e.Msg="Start",e.Ex="",e.EventId=g(e.TaskName),a.debuggingEvent(e)},onFeedSuccess:function(b,c){var e=new DebugInfo;e.ClientInstance=d.clientVersion,e.ClientOS=f,e.Level=4,e.TaskName=c,e.ChannelName="RDHTML",e.ActivityId=b,e.Msg="Success",e.Ex="",e.EventId=g(e.TaskName),a.debuggingEvent(e)},onFeedFailure:function(b,c,e){var h=new DebugInfo;h.ClientInstance=d.clientVersion,h.ClientOS=f,h.Level=2,h.TaskName=c,h.ChannelName="RDHTML",h.ActivityId=b,h.Msg=e,h.Ex="",h.EventId=g(h.TaskName),a.debuggingEvent(h)},onFeedResourceDownloadFailure:function(b,c,e){var h=new DebugInfo;h.ClientInstance=d.clientVersion,h.ClientOS=f,h.Level=3,h.TaskName=c,h.ChannelName="RDHTML",h.ActivityId=b,h.Msg=e,h.Ex="",h.EventId=g(h.TaskName),a.debuggingEvent(h)}}}angular.module("rdStandalone").factory("rdDebuggingEvents",["rdDebuggingEventUpload","userAuthInfoService","$location","platformInfo","logger",a])}(),function(){var a=function(a,b,c,d,e,f,g,h){var i,j,k=[],l=null,m=e.getDiscoveryUrl();i=-1!==m.search("api/arm/feeddiscovery")?"/api/arm/diagnosticevents/v1/":"/api/diagnosticevents/v1/";try{j=new URL(i,m).href}catch(a){d.error("Exception: "+a.message),d.error("Invalid diagnostics URL. Diagnostic events will not be sent.")}var n=function(){if(k.length>0){var a=k[0].Attributes.ActivityId,e=g.getActivityHintForCorrelationID(a),h={withCredentials:!0,headers:{"X-MS-User-Agent":f.clientUserAgent,"x-ms-correlation-id":a,"MS-WVD-Activity-Hint":e}};b.post(j,k[0],h).then(function(){"Final"===k[0].Attributes.Type&&g.deleteCorrelationIDKey(k[0].Attributes.ActivityId),k.shift(),l=c(n)},function(a){if(d.error("Diagnostics upload failed, reason:"+JSON.stringify(a)),a&&a.status)switch(a.status){case 429:d.warn("Too many request to the server"),a.headers&&a.headers("retry-after")?(l=c(n,1e3*a.headers("retry-after")),d.log("Will retry diagnostic upload after "+a.headers("retry-after")+" seconds")):(d.error("Retry-After attribute is missing from the throtting request"),l=c(n,5e4));break;case 400:d.warn("Discarding an event that has been rejected by the service..."),k.shift(),l=c(n,5e3);break;default:l=c(n,5e3)}else l=c(n,5e3)})}else l=null},o=function(){for(var a=0;a<k.length;a++){var b=k[a].Attributes.ActivityId,c=g.getActivityHintForCorrelationID(b),d=new XMLHttpRequest;d.open("POST",j,!1),d.withCredentials=!0,d.setRequestHeader("X-MS-User-Agent",f.clientUserAgent),d.setRequestHeader("x-ms-correlation-id",b),d.setRequestHeader("MS-WVD-Activity-Hint",c),d.setRequestHeader("Content-Type","application/json;charset=UTF-8"),d.setRequestHeader("Accept","application/json, text/plain, */*"),d.setRequestHeader("Authorization","Bearer "+h.getCachedToken()),d.send(JSON.stringify(k[a]))}k=[]},p=function(a,b){b=b||!1,j&&(k.push(a),!1===b?l||(l=c(n)):o())};return window.addEventListener("beforeunload",function(){o()}),{triggerEvent:p}};angular.module("rdStandalone").service("rdDiagnosticsUpload",["$rootScope","$http","$timeout","logger","rdStandaloneConfigParameters","platformInfo","rdStandaloneActivityHintLookup","userAuthInfoService",a])}(),function(){function a(a,b,c,d,e){var f=d.clientOSAndBrowserWithVersions,g=function(a){return a===Module.DisconnectCode.ConnectionBroken.value||a===Module.DisconnectCode.ConnectionTimeout.value||a===Module.DisconnectCode.DecompressionFailed.value||a===Module.DisconnectCode.EncryptionFailed.value||a===Module.DisconnectCode.GenericNetworkError.value||a===Module.DisconnectCode.GenericProtocolError.value||a===Module.DisconnectCode.PipelineDecodeError.value||a===Module.DisconnectCode.GenericSecurityError.value||a===Module.DisconnectCode.GatewayProtocolError.value||a===Module.DisconnectCode.PreOrchestrationFailed.value||a===Module.DisconnectCode.UnknownError.value},h=function(a){return a===Module.DisconnectCode.UserInitiated.value||a===Module.DisconnectCode.ServerTool.value||a===Module.DisconnectCode.IdleTimeout.value||a===Module.DisconnectCode.LogonTimeout.value||a===Module.DisconnectCode.ReplacedByOtherConnection.value||a===Module.DisconnectCode.ServerOutOfMemory.value||a===Module.DisconnectCode.ServerDeniedConnection.value||a===Module.DisconnectCode.ServerInsufficientPrivileges.value||a===Module.DisconnectCode.GenericLicenseError.value||a===Module.DisconnectCode.FreshCredsRequired.value||a===Module.DisconnectCode.NoLicenseServer.value||a===Module.DisconnectCode.NoLicenseAvailable.value||a===Module.DisconnectCode.InvalidLicense.value||a===Module.DisconnectCode.CantUpgradeLicense.value||a===Module.DisconnectCode.NoRemoteConnectionLicense.value||a===Module.DisconnectCode.PreOrchestrationResponseError.value||a===Module.DisconnectCode.PreOrchestrationResourceNotAvailableError.value||a===Module.DisconnectCode.GenericNetworkError.value||a===Module.DisconnectCode.ConnectionBroken.value||a===Module.DisconnectCode.PreAuthLogonFailed.value||a===Module.DisconnectCode.AutoReconnectFailed.value},i=function(a){switch(a){case Module.DisconnectCode.UserInitiated.value:return"User initiated the disconnect";case Module.DisconnectCode.ServerTool.value:return"Remote machine initiated disconnect";case Module.DisconnectCode.IdleTimeout.value:return"The connection was closed due to inactivity";case Module.DisconnectCode.LogonTimeout.value:return"The connection was closed due to inactivity during login";case Module.DisconnectCode.ReplacedByOtherConnection.value:return"Connected closed when another connection was started";case Module.DisconnectCode.ServerOutOfMemory.value:return"Server is out of memory";case Module.DisconnectCode.ServerDeniedConnection.value:return"Server denied the connection request";case Module.DisconnectCode.ServerInsufficientPrivileges.value:return"The user does not have privileges on the server to perform this operation";case Module.DisconnectCode.FreshCredsRequired.value:return"Fresh Credentials required";case Module.DisconnectCode.NoLicenseServer.value:return"License server not found";case Module.DisconnectCode.NoLicenseAvailable.value:return"No license available for the user";case Module.DisconnectCode.InvalidLicense.value:return"The license supplied is invalid";case Module.DisconnectCode.CantUpgradeLicense.value:return"The requested license is not available";case Module.DisconnectCode.NoRemoteConnectionLicense.value:return"No remote connection license available";case Module.DisconnectCode.PreOrchestrationResponseError.value:case Module.DisconnectCode.PreOrchestrationResourceNotAvailableError.value:return"Pre-orchestration failed, check RDBroker errors for more information";case Module.DisconnectCode.GenericNetworkError.value:return"Network connection issue";case Module.DisconnectCode.ConnectionBroken.value:return"Connection between client and server is broken";case Module.DisconnectCode.PreAuthLogonFailed.value:return"Login failed due to invalid credentials";case Module.DisconnectCode.AutoReconnectFailed.value:return"Auto reconnect attempt rejected by server. Fresh credentials are needed";default:return a}},j=function(a){var b="ClientRDPConnect";return a!==Module.DisconnectCode.PreOrchestrationResponseError.value&&a!==Module.DisconnectCode.PreOrchestrationFailed.value&&a!==Module.DisconnectCode.PreOrchestrationResourceNotAvailableError.value&&a!==Module.DisconnectCode.PreAuthLogonFailed.value||(b="ClientPreOrchestration"),b},k=function(a){var b="Client";return a.startsWith("Server")||a.startsWith("AutoReconnect")?b="RDStack":(a.startsWith("Gateway")||a.startsWith("PreOrchestration"))&&(b="RDGateway"),b},l=function(a){return{Attributes:{Type:a,Timestamp:(new Date).toISOString(),Component:"Client",RoleInstance:"rdwebclient"}}},m={triggerFeedStartEvent:function(c,g){e.setActivityHintForCorrelationID(c,"ms-wvd-ws:"+g);var h=new l("Start");h.Attributes.ActivityType="Feed",h.Attributes.UserName=b.getUPN(),h.Attributes.ActivityId=c,h.Attributes.ClientType="HTML",h.Attributes.ClientOS=f,h.Attributes.ClientVersion=d.clientVersion,a.triggerEvent(h)},triggerFeedSuccessEvent:function(b,c,d){var e=new l("Final");e.Attributes.ActivityType="Feed",e.Attributes.ActivityId=b,c&&(e.Attributes.RDPTotal=c.total,e.Attributes.RDPDownload=c.download,e.Attributes.RDPFail=c.failed,e.Attributes.RDPCache=c.cache),d&&(e.Attributes.IconTotal=d.total,e.Attributes.IconDownload=d.download,e.Attributes.IconFail=d.failed,e.Attributes.IconCache=d.cache),a.triggerEvent(e)},triggerFeedFailedEvent:function(b,c,d,e,f){f=f||!1;var g=new l("Final");g.Attributes.ActivityType="Feed",g.Attributes.ActivityId=c,d&&(g.Attributes.RDPTotal=d.total,g.Attributes.RDPDownload=d.download,g.Attributes.RDPFail=d.failed,g.Attributes.RDPCache=d.cache),e&&(g.Attributes.IconTotal=e.total,g.Attributes.IconDownload=e.download,g.Attributes.IconFail=e.failed,g.Attributes.IconCache=e.cache),b&&(g.Attributes.ErrorSource=b.errorSource,g.Attributes.ErrorOperation=b.errorOperation,g.Attributes.ErrorCode=b.errorCode,g.Attributes.ErrorCodeSymbolic=b.errorCodeSymbolic,g.Attributes.ErrorMessage=b.errorMessage,g.Attributes.ErrorInternal=!0),a.triggerEvent(g,f)},triggerConnectionStartEvent:function(c){var g=c.correlationId.ToString();e.setActivityHintForCorrelationID(g,"ms-wvd-hp:"+c.hostPoolId);var h=new l("Start");h.Attributes.ActivityType="Connection",h.Attributes.UserName=b.getUPN(),h.Attributes.ActivityId=g,h.Attributes.ClientType="HTML",h.Attributes.ClientOS=f,h.Attributes.ClientVersion=d.clientVersion,c.lastSuccessConnectionId&&(h.Attributes.PredecessorConnectionId=c.lastSuccessConnectionId),a.triggerEvent(h)},triggerConnectionOnClientDisconnectedEvent:function(b){var c=new l("Checkpoint");c.Attributes.ActivityType="Connection",c.Attributes.ActivityId=b.correlationId.ToString(),c.Attributes.CheckpointName="OnClientDisconnected";var d=Module.GetDisconnectCodeString(b.disconnectReason.code);c.Attributes.DisconnectSource=k(d),c.Attributes.DisconnectOperation=j(b.disconnectReason.code.value),c.Attributes.DisconnectCode=b.disconnectReason.code.value,c.Attributes.DisconnectCodeSymbolic=d,c.Attributes.DisconnectMessage=i(d),a.triggerEvent(c)},triggerConnectionEndEvent:function(b,c){c=c||!1,m.triggerConnectionOnClientDisconnectedEvent(b);var d=new l("Final");if(d.Attributes.ActivityType="Connection",g(b.disconnectReason.code.value)){var e=Module.GetDisconnectCodeString(b.disconnectReason.code);d.Attributes.ErrorSource=k(e),d.Attributes.ErrorOperation=j(b.disconnectReason.code.value),d.Attributes.ErrorCode=b.disconnectReason.code.value,d.Attributes.ErrorCodeSymbolic=e,d.Attributes.ErrorMessage=i(e),d.Attributes.ErrorInternal=!h(b.disconnectReason.code.value)}d.Attributes.ActivityId=b.correlationId.ToString(),a.triggerEvent(d,c)},triggerConnectionCheckPointEvent:function(b,c,d){var e=new l("Checkpoint");e.Attributes.ActivityType="Connection",e.Attributes.ActivityId=b.correlationId.ToString(),e.Attributes.CheckpointName=c,d&&(e.Attributes.AppName=d),a.triggerEvent(e)}};return m}angular.module("rdStandalone").factory("rdDiagnostics",["rdDiagnosticsUpload","userAuthInfoService","$location","platformInfo","rdStandaloneActivityHintLookup",a])}(),function(){var a=function(a,b,c){var d=function(){this.displayName="",this.feedURL=""},e=function(a){function b(a,b){const c=a._TenantDisplayName.toUpperCase(),d=b._TenantDisplayName.toUpperCase();var e=0;return c>d?e=1:d>c&&(e=-1),e}var c=[],e=new X2JS,f=e.xml_str2json(a),g=e.asArray(f.TenantFeedURLs.TenantFeedURL);g.sort(b);var h,i;for(i=0;i<g.length;i++)h=new d,h.displayName=g[i]._TenantDisplayName,h.feedURL=g[i]._FeedURL,h.tenantID=g[i]._TenantId,c.push(h);return c};return{getFeedInfo:function(d,f){var g=a.defer(),h={withCredentials:!0,headers:{Accept:"application/x-msts-radc-discovery+xml,text/xml","x-ms-correlation-id":f,"X-MS-User-Agent":c.clientUserAgent}},i=function(a){b.get(d,h).then(function(a){try{g.resolve(e(a.data))}catch(a){g.reject("Discovery feed processing failed!")}},function(b){401!==b.status||a?g.reject(b):i(!0)})};return i(!1),g.promise}}};angular.module("rdStandalone").factory("rdStandaloneFeedDiscoverer",["$q","$http","platformInfo",a])}(),function(){function a(a,b,c,d,e){return{getWorkspace:function(f,g){var h=a.defer(),i=e.getActivityHintForCorrelationID(g),j={withCredentials:!0,headers:{Accept:"application/x-msts-radc+xml;radc_schema_version=2.0,text/xml","x-ms-correlation-id":g,"X-MS-User-Agent":d.clientUserAgent,"MS-WVD-Activity-Hint":i}};return b.get(f,j).then(function(a){200!==a.status&&h.reject("Unexpected HTTP status: "+a.status);try{h.resolve(c.parseWorkspaceFeed(a.data))}catch(a){h.reject("Web feed processing failed!")}},function(a){h.reject(a)}),h.promise}}}angular.module("rdStandalone").factory("rdStandaloneFeedRetriever",["$q","$http","feedParser","platformInfo","rdStandaloneActivityHintLookup",a])}(),function(){var a=function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n,o=new FeedData;o.multiTenant=!0;var p,q,r={},s={},t=!1,u=null,v=[],w=new Set,x=function(a,b,c){return this.errorMessage=a,this.errorCode=b,this.errorCodeSym=c,this},y=new x("Icon or RDP file download failed",201,"ICON_RTVL_FAIL"),z=!0,A=function(a){return!(403===a||429===a)},B=function(a){return z&&A(a)},C=function(){s={},z=!0,u=Module.CorrelationID.CreateRandomCorrelationID(),w=new Set},D=null,E=function(){for(var a=0;a<D.length;a++)if(w.has(v[a])&&!1!==D[a].workspaceRequestSuccessful&&D[a].iconCounts.total===D[a].iconCounts.download+D[a].iconCounts.failed&&D[a].rdpCounts.total===D[a].rdpCounts.download+D[a].rdpCounts.failed)if(w.delete(v[a]),j&&0===D[a].iconCounts.failed&&0===D[a].rdpCounts.failed)j.triggerFeedSuccessEvent(v[a],D[a].rdpCounts,D[a].iconCounts);else{var b;b=new Error(y.errorCode,y.errorMessage,y.errorCodeSym,"GetTenantResource"),j.triggerFeedFailedEvent(b,v[a],D[a].rdpCounts,D[a].iconCounts)}},F=function(){var a,c=!0,d=!1,e=!0,f=[],g=new FeedCounts(0,0,0),h=new FeedCounts(0,0,0);for(a=0;a<D.length;a+=1)D[a].loaded&&D[a].workspace&&f.push(D[a].workspace),e=e&&(D[a].loaded||D[a].failed),d=d||D[a].failed,c=c&&D[a].loaded,g.total+=D[a].iconCounts.total,g.download+=D[a].iconCounts.download,g.failed+=D[a].iconCounts.failed,h.total+=D[a].rdpCounts.total,h.download+=D[a].rdpCounts.download,h.failed+=D[a].rdpCounts.failed;E(),c&&(o.workspaces=f,o.loading=!1,o.loadFailed=!1,r=s,g.total===g.download+g.failed&&h.total===h.download+h.failed&&(b.$broadcast("rdFeedTracker:feedsLoaded",o),p())),d&&o.loading&&(o.loadFailed=!0),d&&e&&q()},G=function(c,e,f,g){var h=m.getActivityHintForCorrelationID(g),i={withCredentials:!0,responseType:"blob",headers:{"x-ms-correlation-id":g,"X-MS-User-Agent":l.clientUserAgent,"MS-WVD-Activity-Hint":h}};a.get(e,i).then(function(a){f.iconCounts.download+=1;var d=new FileReader;d.addEventListener("load",function(){b.$apply(function(){c.thumbnail=d.result,s[e]=d.result})}),d.readAsDataURL(a.data),F()},function(a){k&&k.onFeedResourceDownloadFailure(g,"GetIconFile",JSON.stringify(a)),y.errorMessage="Icon retrieval failed,"+JSON.stringify(a),y.errorCode=a.status,y.errorCodeSym="ICON_RTVL_FAIL",d.log(y.errorMessage),f.iconCounts.failed+=1,F()})},H=function(b,c,e){var f=m.getActivityHintForCorrelationID(e),g={withCredentials:!0,headers:{"x-ms-correlation-id":e,"X-MS-User-Agent":l.clientUserAgent,"MS-WVD-Activity-Hint":f}};a.get(b.rdpFileURL,g).then(function(a){b.rdpFileString=a.data,c.rdpCounts.download+=1,F()},function(a){k&&k.onFeedResourceDownloadFailure(e,"GetRDPFile",JSON.stringify(a)),y.errorMessage="RDP file retrieval failed,"+JSON.stringify(a),y.errorCode=a.status,y.errorCodeSym="RDPFILE_RTVL_FAIL",d.log(y.errorMessage),c.rdpCounts.failed+=1,F()})},I=function(a,b){j&&j.triggerFeedStartEvent(b,a.tenantID),k&&k.onFeedStart(b,"GetWorkspace"),h.getWorkspace(a.feedURL,b).then(function(c){d.log("Successfully retrieved tenant resources");var e,f;for(c.url=a.feedURL,a.rdpCounts.total=c.bookmarks.length,a.iconCounts.total=a.rdpCounts.total,a.workspaceRequestSuccessful=!0,k&&k.onFeedSuccess(b,"GetWorkspace"),e=0;e<c.bookmarks.length;e++)c.bookmarks[e].multiTenantMode=!0,c.bookmarks[e].tenantId=c.publisherId,f=c.bookmarks[e].thumbnail,r.hasOwnProperty(f)?c.bookmarks[e].thumbnail=r[f]:c.bookmarks[e].thumbnail="assets/images/defaultIcon.807effe8.png",G(c.bookmarks[e],f,a,b),H(c.bookmarks[e],a,b);a.loaded=!0,a.workspace=c,F()},function(c){var e=new x("Feed retrieval failed, reason:"+JSON.stringify(c),c.status,"FEED_RTVL_FAIL");if(d.error(e.errorMessage),a.failed=!0,j){var f=new ErrorInfo("RDWeb","GetTenantXML",e.errorCode,e.errorCodeSym,e.errorMessage);j.triggerFeedFailedEvent(f,b,new FeedCountswithCache(0,0,0,0),new FeedCountswithCache(0,0,0,0)),w.has(b)?w.delete(b):d.error("Key, "+b+"not found in the List "+w)}k&&k.onFeedFailure(b,"GetWorkspace",JSON.stringify(c)),F()})},J=function(){if(!t&&i.getCachedToken()){var a=function(){C(),k&&k.onFeedStart(u.ToString().slice(1,-1),"FeedDiscovery"),g.getFeedInfo(n,u.ToString().slice(1,-1)).then(function(a){if(k&&k.onFeedSuccess(u.ToString().slice(1,-1),"FeedDiscovery"),D=a,d.log("Successfully retrieved tenant information"),0===D.length)F();else for(var b=0;b<D.length;b++)D[b].loaded=!1,D[b].failed=!1,D[b].iconCounts=new FeedCountswithCache(0,0,0,0),D[b].rdpCounts=new FeedCountswithCache(0,0,0,0),D[b].workspaceRequestSuccessful=!1,u.IncrementConnectionID(),v[b]=u.ToString().slice(1,-1),w.add(v[b]),I(D[b],v[b])},function(a){a&&a.config&&a.config.headers&&a.config.headers.Authorization&&(a.config.headers.Authorization="<redacted>"),
k&&k.onFeedFailure(u.ToString().slice(1,-1),"FeedDiscovery",JSON.stringify(a)),d.error("Get tenant list failed, reason:"+JSON.stringify(a)),o.loading&&403===a.status?o.loading=!1:o.loadFailed=!0,A(a.status)||(z=!1),o.numRetry!==e.getFeedRetrivalMaxRetry()&&B(a.status)&&q(),429===a.status&&a.headers&&a.headers("retry-after")&&(q(1e3*a.headers("retry-after")),d.log("Will retry getFeedInfo upload after "+a.headers("retry-after")+" seconds"))}),p=function(){o.numRetry=0,c(a,e.getWorkspaceUpdateInterval())},q=function(b){b=b||e.getRetryInterval(),d.log("Retrying feed retrival, Current Retry count = "+o.numRetry),o.numRetry<e.getFeedRetrivalMaxRetry()?(c(a,b),o.numRetry++):o.loading=!1}};t=!0,n=f.getDiscoveryUrl(),n?a():(o.loading=!1,o.loadFailed=!0)}};if(window.addEventListener("beforeunload",function(){if(j)for(var a=0;a<v.length;a++)w.has(v[a])&&j.triggerFeedFailedEvent(new ErrorInfo("Client","UnknownClientOperation",Module.DisconnectCode.UserInitiated.value,"FEED_RTVL_FAIL","RD web client was unloaded while feed enumeration is in progress"),v[a],new FeedCountswithCache(0,0,0,0),new FeedCountswithCache(0,0,0,0),!0)}),i.getCachedToken())J();else{var K=b.$on("adal:acquireTokenSuccess",function(){K(),J()});b.$on("adal:acquireTokenFailure",function(a,b,c){o.loading&&"interaction_required"!==c&&"login required"!==c&&"login_required"!==c&&"access_denied"!==c&&(o.loadFailed=!0)})}return{getFeedData:function(){return o},getFeedFile:function(b,c){var d="ms-wvd-ws:"+c,e={withCredentials:!0,headers:{"X-MS-User-Agent":l.clientUserAgent,"MS-WVD-Activity-Hint":d}};return a.get(b,e)}}};angular.module("rdStandalone").factory("rdFeedTracker",["$http","$rootScope","$timeout","logger","rdCommonRuntimeParameters","rdStandaloneConfigParameters","rdStandaloneFeedDiscoverer","rdStandaloneFeedRetriever","userAuthInfoService","rdDiagnostics","rdDebuggingEvents","platformInfo","rdStandaloneActivityHintLookup",a])}(),function(){var a=function(a,b,c,d,e,f,g){var h,i=null,j=null,k=null,l=null,m=null,n=0,o=e.getDiscoveryUrl();h=-1!==o.search("api/arm/feeddiscovery")?"/api/arm/hubdiscovery":"/api/hubdiscovery/eventhubdiscovery.aspx";try{i=new URL(h,o).href}catch(a){d.error("Exception: "+a.message),d.error("Invalid debuggingEvent URL. Diagnostic events will not be sent.")}var p=function(a,c){m=null,d.log("Failed to get or parse token for logging debugging events"+a),n<1?(b(r,c),n++,d.log("Failed to get or parse token for logging debugging events, retrying"+a)):(n=0,b(r,72e5),d.log("Failed to get or parse token for logging debugging events,retrying after refresh interval"+a))},q={withCredentials:!0,headers:{"X-MS-User-Agent":g.clientUserAgent}},r=function(){a.get(i,q).then(function(a){try{var c=new X2JS,e=c.xml_str2json(a.data);k=e.EventHubSettings.EventHubName,l="https"+e.EventHubSettings.EventHubUrl.substring(2),m=e.EventHubSettings.GeneratedSaS,d.log("Got a SAS token"),j=l+k+"/messages?timeout=60&api-version=2014-01",n=0}catch(a){d.error("Error in parsing SAS token request: "+a)}finally{b(r,72e5)}},function(a){if(d.error("Failed to get SAS token, reason:"+JSON.stringify(a)),a&&a.status)switch(a.status){case 429:d.warn("Too many request to the server"),a.headers&&a.headers("retry-after")?(p(a,1e3*a.headers("retry-after")),d.log("Will retry SAS token retrival after "+a.headers("retry-after")+" seconds")):(d.error("Retry-After attribute is missing from the throtting request"),p(a,3e5));break;default:p(a,3e4)}else p(a,3e4)})};if(f.getCachedToken())r();else var s=c.$on("adal:acquireTokenSuccess",function(){s(),r()});return{getDebuggingEventInfoAndToken:function(){return{debuggingLogUploadUrl:j,debuggingLogSaSToken:m}}}};angular.module("rdStandalone").service("rdDebuggingEventUploadSaSTokenManager",["$http","$timeout","$rootScope","logger","rdStandaloneConfigParameters","userAuthInfoService","platformInfo",a])}(),function(){var a=function(a,b,c,d){var e=d.getDiscoveryUrl(),f=d.getAuthConfig(),g=!!(f&&f.authority&&f.clientID&&f.resourceUrl);if(g){c.log("authConfig found!");var h={};try{var i=new URL(e);i.pathname="/",h[i.href]=f.resourceUrl}catch(a){c.error("Endpoint configuration failed!")}b.init({instance:f.authority,clientId:f.clientID,endpoints:h,anonymousEndpoints:["app","assets"],tenant:".",cacheLocation:"localStorage",displayCall:function(a){var b=self.AuthenticationContext.prototype._singletonInstance;b.config.state+="|"+f.resourceUrl,b._saveItem(b.CONSTANTS.STORAGE.STATE_LOGIN,b.config.state),a=b._getNavigateUrl("id_token token",f.resourceUrl)+"&nonce="+encodeURIComponent(b._idTokenNonce),self.location.replace(a)}},a)}else c.warn("Token based authentication is not configured. Proceeding without it..."),b.init({clientId:"null",requireADLogin:!1});this.$get=["$rootScope","$window","logger","adalAuthenticationService",function(a,b,c,d){var e=function(){g&&d.acquireToken(f.resourceUrl)};return a.$on("$locationChangeStart",e),a.$on("adal:acquireTokenFailure",function(b,e,g){if("interaction_required"===g)c.log("Interactive token acquisition required (probably MFA). Redirecting..."),d.acquireTokenRedirect(f.resourceUrl),b.preventDefault();else if("login required"===g||"login_required"===g||"access_denied"===g){var h=d.userInfo.loginError;h&&-1!==h.toLowerCase().indexOf("aadsts65005")?(a.$broadcast("rdpClientUI:AADSTS65005ErrorMessage"),b.preventDefault()):(d.login(),b.preventDefault())}else c.error("adal:acquireTokenFailure "+e+", "+g),d.acquireToken(f.resourceUrl)}),a.$on("adal:loginFailure",function(a){c.error("adal:loginFailure "+a)}),a.$on("adal:stateMismatch",function(a){c.error("adal:stateMismatch "+a)}),{getCachedToken:function(){return d.getCachedToken(f.resourceUrl)}}}]};angular.module("rdStandalone").provider("rdStandaloneTokenManager",["$httpProvider","adalAuthenticationServiceProvider","loggerProvider","rdStandaloneConfigParametersProvider",a]).run(["rdStandaloneTokenManager",function(){}])}(),function(){var a=function(a,b,c,d){return{isAuthenticated:function(){return c.userInfo.isAuthenticated},isInteractiveLoginRequired:function(){return!1},getUserName:function(){return void 0!==c.userInfo.profile&&c.userInfo.profile.hasOwnProperty("name")?c.userInfo.profile.name:null},getUPN:function(){return c.userInfo.userName},getCachedToken:function(){return d.getCachedToken()},getPasswordResetLink:function(){return"https://account.activedirectory.windowsazure.com/r#/profile"},getPasswordChangeEnabled:function(){return!0},login:function(){var c=a.defer();return b(function(){c.reject({result:"NotSupported"})}),c.promise},logout:function(){c.logOut()}}};angular.module("rdStandalone").service("userAuthInfoService",["$q","$timeout","adalAuthenticationService","rdStandaloneTokenManager",a])}(),function(){"use strict";function a(a,b,c,d,e){Error.stackTraceLimit=1/0,c.decorator("$exceptionHandler",["$delegate","logger",function(a,b){return function(c,d){a(c,d),b.error("Exception: "+c+" Cause: "+d)}}]),a.html5Mode({enabled:!0,requireBase:!1}).hashPrefix("!"),d.debugInfoEnabled(!1),b.setTriggers({openTrigger:"closeTrigger"}),e.useStaticFilesLoader({prefix:"assets/loc/",suffix:"/strings.json"}).uniformLanguageTag("bcp47").registerAvailableLanguageKeys(["da-DK","de-DE","en-US","en-GB","es-ES","fi-FI","fr-FR","it-IT","ja-JP","nb-NO","nl-NL","pl-PL","pt-BR","ru-RU","sv-SE","zh-CN","zh-TW"],{da:"da-DK","da-*":"da-DK",de:"de-DE","de-*":"de-DE",es:"es-ES","es-*":"es-ES",fi:"fi-FI","fi-*":"fi-FI",fr:"fr-FR","fr-*":"fr-FR",it:"it-IT","it-*":"it-IT",ja:"ja-JP","ja-*":"ja-JP",nb:"nb-NO","nb-*":"nb-NO",no:"nb-NO",nl:"nl-NL","nl-*":"nl-NL",pl:"pl-PL","pl-*":"pl-PL",pt:"pt-BR","pt-*":"pt-BR",ru:"ru-RU","ru-*":"ru-RU",sv:"sv-SE","sv-*":"sv-SE",zh:"zh-CN","*":"en-US"}).fallbackLanguage("en-US").determinePreferredLanguage().useSanitizeValueStrategy("escapeParameters")}function b(a,b,c,d,e,f){try{Module.Tracing.Register(function(a,b,c,e){d.onRdCoreDebuggingEvent(e,a,b,c)},function(a){b.logWithoutTimestamp(a)},function(a){b.warnWithoutTimestamp(a)},function(a){b.errorWithoutTimestamp(a)})}catch(a){b.log("Tried to register debbugging event logger to collect trace function with RdCore but failed")}document.getElementById("rdcorelib")&&(Module.SetWebWorkerBasePath(""),Module.SetWebWorkerLibName(document.getElementById("rdcorelib").src));var g=document.getElementById("rdAppTitle");g&&e("REMOTE_DESKTOP_TITLE").then(function(a){g.textContent=a},function(a){g.textContent=a});var h="";e("BEFORE_UNLOAD_WARNING").then(function(a){h=a},function(a){h=a}),a.addEventListener("beforeunload",function(a){var b;return c.sessionList().length>0&&(b=h,a.returnValue=b),b});var i=e.getTranslationTable(),j=!1;i?(Module.UIStrings.RegisterTranslationTable(i),j=!0):f.$on("$translateChangeSuccess",function(){var a=e.getTranslationTable();!j&&a&&(Module.UIStrings.RegisterTranslationTable(a),j=!0)})}var c="rdMultiTenant"===DeploymentSettings.deploymentType?"rdStandalone":DeploymentSettings.deploymentType;angular.module("rdpClientUI",["ngAnimate","ngAside","ngAria","ui.bootstrap","pascalprecht.translate",c]).config(["$locationProvider","$uibTooltipProvider","$provide","$compileProvider","$translateProvider",a]).run(["$window","logger","sessionProvider","rdDebuggingEvents","$translate","$rootScope",b])}(),function(){"use strict";var a=function(a,b){var c=this;return c.isOpen=!1,a.enableHover(),c.focusSession=function(a){b.focusToSession(a.id,!0)},c.onTabClick=function(b){1===a.appGroup.sessionList.length?c.focusSession(a.appGroup.sessionList[0]):(a.isHoverEnabled()?c.isOpen=!0:c.isOpen=!c.isOpen,a.disableHover(),b.stopPropagation())},c.onToggle=function(b){b||a.enableHover()},c.onTabHover=function(){a.isHoverEnabled()&&(c.isOpen=!0)},c.onTabLeave=function(){a.isHoverEnabled()&&(c.isOpen=!1)},c};angular.module("rdpClientUI").directive("rdpApplicationTab",function(){return{templateUrl:"app/rdp-client-ui/application-tab.html",controller:["$scope","sessionProvider",a],controllerAs:"ctrl",restrict:"A",scope:{appGroup:"<",enableHover:"&",disableHover:"&",isHoverEnabled:"&"}}})}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){a.openThirdParty=function(){c.open({animation:!0,templateUrl:"app/rdp-client-ui/Common/ThirdPartyNotices.html",controller:"ThirdPartyNoticesCtrl",controllerAs:"modalController",windowClass:"rdhtml5-sidepanel session-modal",placement:"right",backdrop:!0,keyboard:!0,ariaLabelledBy:"thirdparty_modal_title"})},a.openTermsOfUse=function(){c.open({animation:!0,templateUrl:"app/rdp-client-ui/Common/TermsOfUse.html",controller:"TermsOfUseCtrl",controllerAs:"modalController",windowClass:"rdhtml5-sidepanel session-modal",placement:"right",backdrop:!0,keyboard:!0,ariaLabelledBy:"tou_modal_title"})},a.openPrivacyStatement=function(){d.open("https://go.microsoft.com/fwlink/?LinkId=521839","_blank")};var i=e&&e.platformInfo||{};a.appVersion=i.clientVersion,"Live"!==i.clientTarget&&(a.appVersion+=" ("+i.clientTarget+")"),a.supportID=f.getSupportID(),a.cancel=function(){b.dismiss("cancel")},a.consoleRecordingStatus=g.getConsoleRecordingStatus(),a.startConsoleRecording=function(){a.consoleRecordingStatus=!0,g.startRecording()},a.stopConsoleRecording=function(){a.consoleRecordingStatus=!1,g.stopRecording(),h.downloadLogs()}}angular.module("rdpClientUI").controller("AboutCtrl",["$scope","$uibModalInstance","$aside","$window","params","telemetry","logger","consoleLogDownloader",a])}(),function(){"use strict";function a(a){return{restrict:"A",scope:{},link:function(b,c){c.text(""),a.isAuthenticated()&&c.text(a.getUserName())}}}function b(a,b,c){return{restrict:"A",scope:{},link:function(d,e){e.text(""),a("SIGN_OUT_LABEL").then(function(a){e.text(a)},function(a){e.text(a)}),e.on("click",function(){c.disconnect(),setTimeout(b.logout,2e3)})}}}function c(a,b){function c(a,b,c){if(angular.isArray(a))for(var d=a.length;d--;)if(c(a[d],b))return!0;return!1}function d(a,b,d){return a=angular.isArray(a)?a:[],c(a,b,d)||a.push(b),a}function e(a,b,c){if(angular.isArray(a))for(var d=a.length;d--;)if(c(a[d],b)){a.splice(d,1);break}return a}function f(f,g,h){function i(a){f.checked=c(a,m,n)}b(g)(f);var j=a(h.checklistModel),k=j.assign,l=a(h.checklistChange),m=a(h.checklistValue)(f.$parent),n=angular.equals;h.hasOwnProperty("checklistComparator")&&(n=a(h.checklistComparator)(f.$parent)),f.$watch("checked",function(a,b){if(a!==b){var c=j(f.$parent);!0===a?k(f.$parent,d(c,m,n)):k(f.$parent,e(c,m,n)),l&&l(f)}}),angular.isFunction(f.$parent.$watchCollection)?f.$parent.$watchCollection(h.checklistModel,i):f.$parent.$watch(h.checklistModel,i,!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(a,b){if("INPUT"!==a[0].tagName||"checkbox"!==b.type)throw'checklist-model should be applied to `input[type="checkbox"]`.';if(!b.checklistValue)throw"You should provide `checklist-value`.";return a.removeAttr("checklist-model"),a.attr("ng-model","checked"),f}}}function d(){return{restrict:"EA",scope:{loaderType:"@"},templateUrl:"app/rdp-client-ui/Common/loadingSpinner.html",link:function(a,b){"sessionLoader"===a.loaderType&&b[0].removeChild(b.children()[1])}}}var e=function(a){return{restrict:"A",link:function(b,c){a(function(){c.focus()},0,!1)}}};angular.module("rdpClientUI").directive("checklistModel",["$parse","$compile",c]).directive("loadingSpinner",[d]).directive("navbarUsernameDisplay",["userAuthInfoService",a]).directive("navbarLogoutButton",["$translate","userAuthInfoService","sessionProvider",b]).directive("rdpGrabFocus",["$timeout",e])}(),function(){"use strict";function a(a,b,c,d){function e(a){return!0===DeploymentSettings.launchResourceInBrowser||DeploymentSettings.multiTenantConfig?"webclient"===a:!1!==DeploymentSettings.launchResourceInBrowser||"nativeclient"===a}a.telemetryEnabled=function(a){return arguments.length>=1&&!DeploymentSettings.suppressTelemetry&&(c.telemetryEnabled=a),c.telemetryEnabled&&!DeploymentSettings.suppressTelemetry},a.telemetryChoiceDisabled=DeploymentSettings.suppressTelemetry,a.onTelemetryChanged=function(){c.telemetryEnabled&&!DeploymentSettings.suppressTelemetry?d.enable():d.disable()},a.IMEEnabled=function(){return c.IMEEnabled},a.onIMEChanged=function(){c.IMEEnabled?c.IMEEnabled=!1:c.IMEEnabled=!0},a.resourceLaunchMethod=c.resourceLaunchMethod,a.hasResourceLaunchMethodSet="boolean"==typeof DeploymentSettings.launchResourceInBrowser||DeploymentSettings.multiTenantConfig,a.isDisabledResourceLaunchMethod=function(b){return a.hasResourceLaunchMethodSet&&a.resourceLaunchMethod!==b},a.showResourceLaunchMethod=function(){return!DeploymentSettings.multiTenantConfig},a.$watch("resourceLaunchMethod",function(a){e(a)&&(c.resourceLaunchMethod=a)}),a.cancel=function(){b.dismiss("cancel")}}angular.module("rdpClientUI").controller("SettingsCtrl",["$scope","$uibModalInstance","appSettingsStore","telemetry",a])}(),function(){"use strict";function a(a,b,c){this.cancel=function(){c.dismiss("cancel")},a.termsUrl="assets/loc/"+b.use()+"/termsofuse.html"}angular.module("rdpClientUI").controller("TermsOfUseCtrl",["$scope","$translate","$uibModalInstance",a])}(),function(){"use strict";function a(a){this.cancel=function(){a.dismiss("cancel")}}angular.module("rdpClientUI").controller("ThirdPartyNoticesCtrl",["$uibModalInstance",a])}(),function(){function a(a,b,c,d,e,f){var g=0,h=[],i=function(a){return h.filter(function(b){return b.connectionId===a})},j=function(a){var b=i(a);return 0===b.length?null:b[b.length-1]},k=function(b,c,g){var i=this,k=!0,l=null,m=function(){if(k){b.remove();for(var c=0;c<h.length;c++)if(h[c].dialogId===g){h.splice(c,1);break}k=!1,a.$broadcast("rdpClientUI:sessionTakeFocus")}};return i.onClose=null,i.onCancel=null,i.close=function(a){m(),i.onClose&&i.onClose(a)},i.cancel=function(){m(),i.onCancel&&i.onCancel()},i.focus=function(){e(function(){var a=l||b[0].querySelector("[autofocus]")||b[0].querySelector("input,button");a&&a.focus()})},i.onFocus=function(){l=angular.element(d[0].activeElement)},i.onKeyDown=function(a){27===a.keyCode&&(i.cancel(),a.preventDefault())},i.isVisible=function(){return k&&f.activeSession&&f.activeSession.getConnectionId()===c},i.isTopMost=function(){return i.isVisible()&&j(c).dialogId===g},i.getControlTabIndex=function(){return i.isTopMost()?"3":"-1"},i.labelID="connDialogLabel"+g,i};return{open:function(d,e){var f=angular.element(document.getElementById("dialog-container")),i=a.$new(),j={},l=angular.element("<div connection-dialog-instance></div>"),m=new k(l,d,g);if(i.dialog=m,l.attr("ng-show","dialog.isVisible()"),l.on("focusin",m.onFocus),l.on("keydown",m.onKeyDown),e.templateUrl&&l.attr("template-url",e.templateUrl),e.params&&(j=e.params),e.controller){var n=e.controller;e.controllerAs&&(n+=" as "+e.controllerAs),b(n,{$scope:i,params:j})}return l.addClass("rdp-connection-dialog"),e.windowClass&&l.addClass(e.windowClass),f.append(c(l)(i)),h.push({dialogId:g,connectionId:d,instance:m}),g++,m},isDialogVisible:function(){return f.activeSession&&i(f.activeSession.getConnectionId()).length>0},focusTopMostDialog:function(){if(f.activeSession){var a=j(f.activeSession.getConnectionId());a&&a.instance.focus()}}}}angular.module("rdpClientUI").factory("connectionDialog",["$rootScope","$controller","$compile","$document","$timeout","sessionProvider",a]).directive("connectionDialogInstance",function(){return{templateUrl:function(a,b){return b.templateUrl}}})}(),function(){"use strict";var a=0,b=function(b){var c=this,d=a++;return c.sessionTitle=function(){return c.session?c.session.connection.hadSuccessfulConnection?c.session.getBookmark().desktopLabel():c.session.getBookmark().label():null},c.errorMessage=function(){return c.session&&c.session.getDisconnectReason()},c.reconnect=function(){if(c.session){var a=angular.copy(c.session.getBookmark());c.session.connection.hadSuccessfulConnection&&(a.friendlyName=a.desktopLabel()),b.setReconnecting(!0),b.createSession(a,c.session.connection.hadSuccessfulConnection)}},c.dismissSession=function(){c.session&&c.session.id&&b.dismissSession(c.session.id)},c.onKeyUp=function(a){"Escape"!==a.key&&27!==a.keyCode||c.dismissSession()},c.labelID="connErrorLabel"+d,c};angular.module("rdpClientUI").component("connectionError",{templateUrl:"app/rdp-client-ui/connection-error.html",controller:["sessionProvider",b],controllerAs:"connErrController",bindings:{session:"<"}})}(),function(){var a=function(a,b,c,d,e,f){var g="Remote Print Job.pdf";return d("PRINT_JOB_FILE_NAME").then(function(a){g=a},function(a){g=a}),{onPrintStart:function(){c(function(){e.$broadcast("rdPrinting:printStart")})},onPrintUrl:function(d){c(function(){if(f.log("Saving printed document as a file"),b.navigator.msSaveBlob)a.get(d,{responseType:"blob"}).then(function(a){b.navigator.msSaveBlob(a.data,g)},function(a){f.error("Extracting the PDF print job failed unexpectedly, details="+angular.toJson(a))});else{var c=b.document.getElementById("printDownloadLink");c?(c.href=d,c.click()):f.error("The link for downloading printed documents could not be found.")}})}}};angular.module("rdpClientUI").factory("printing",["$http","$window","$timeout","$translate","$rootScope","logger",a])}(),function(){"use strict";angular.module("rdpClientUI").directive("rdResourceList",function(){return{restrict:"E",templateUrl:"app/rdp-client-ui/rd-resource-list.html",controller:["$scope","$aside",function(a,b){var c=this;c.isBookmarkDisplayed=function(b){return 0===b.folderNames.length&&"/"===a.displayFolder||b.folderNames.indexOf(a.displayFolder)>=0},c.setFolder=function(b){a.displayFolder=b,a.displayWorkspaceUrl=a.workspace.url},c.clearFolder=function(){a.displayFolder="/",a.displayWorkspaceUrl=null},c.showSupportModal=function(a){b.open({animation:!0,controller:"SupportController",templateUrl:"app/rdp-client-ui/SupportInformation.html",windowClass:"rdhtml5-sidepanel session-modal",placement:"right",backdrop:!0,keyboard:!0,ariaLabelledBy:"Support_modal_title",resolve:{params:function(){return{supportObj:a.supportObj}}}})}}],controllerAs:"resourceListController",scope:{launch:"&launchAction",displayFolder:"=",displayWorkspaceUrl:"=",workspace:"<"}}})}(),function(){"use strict";function a(a){return{prompt:function(){a.open({animation:!0,templateUrl:"app/rdp-client-ui/rdp-client-ui-AADError-modal.html",windowClass:"rdhtml5-sign-in dark",ariaDescribedBy:"AADErrorDescribedByID",backdrop:"static",keyboard:!0})}}}angular.module("rdpClientUI").factory("AADError",["$uibModal",a]).run(["AADError","$rootScope",function(a,b){b.$on("rdpClientUI:AADSTS65005ErrorMessage",a.prompt)}])}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){var k={displayFolder:"/",displayWorkspaceUrl:null},l=function(a){if(k.displayWorkspaceUrl&&"/"!==k.displayFolder){var b=a.find(function(a){return a.url===k.displayWorkspaceUrl});b&&-1!==b.folders.indexOf(k.displayFolder)||(k.displayFolder="/",k.displayWorkspaceUrl=null)}},m=function(){var a,b=!1,d=c.getFeedData();for(a=0;a<d.workspaces.length&&!b;a++)b=d.workspaces[a].bookmarks.length>=0;return!d.loading&&!d.loadFailed&&!b};return a.$watch(function(){return c.getFeedData().workspaces},l),k.launchBookmark=function(a){"webclient"===h.resourceLaunchMethod?e.createSession(a,null):a.rdpFileString?g.downloadRdpFile(a.rdpFileString,a.friendlyName):(i.debug("[RdpClientUiAllResourcesPane] Retrieving RDP file: "+a.rdpFileURL),c.getFeedFile(a.rdpFileURL,a.tenantId).then(function(b){a.rdpFileString=b.data,k.launchBookmark(a)}).catch(function(a){const b="Status: "+a.status+", StatusText: "+a.statusText+", url: "+a.config.url;i.error("Retrieving the RDP file for download failed. "+b)}))},k.unsupportedBrowserData=b.getBrowserSupportData(),k.showUnsupportedBrowser=function(){const a=h.dismissedUnsupportedBrowser;return!!k.unsupportedBrowserData.value&&!a},k.setDismissedUnsupportedBrowser=function(){h.dismissedUnsupportedBrowser=!0},k.showAudioUnsupported=function(){const a=h.dismissedAudioUnsupported;return!k.unsupportedBrowserData.value&&!b.isAudioSupported()&&!a},k.setDismissedAudioUnsupported=function(){h.dismissedAudioUnsupported=!0},k.showGDPRBanner=function(){return!h.dismissedGDPRBanner},k.setDismissedGDPRBanner=function(){h.dismissedGDPRBanner=!0},k.showResourceList=function(){return!(k.showFeedLoader()||m()||k.displayWorkspaceUrl&&k.workspace.url!==k.displayWorkspaceUrl)},k.showFeedLoader=function(){var a=c.getFeedData();return a.loading&&!a.loadFailed},k.showFirstRetryMessage=function(){var a=c.getFeedData();return a.loadFailed&&a.loading&&1===a.numRetry&&!k.showResourceList()},k.showFeedFailedRecoverable=function(){var a=c.getFeedData();return a.loadFailed&&a.loading&&a.numRetry>1&&a.numRetry<f.getFeedRetrivalMaxRetry()&&!k.showResourceList()},k.showFeedFailedIrrecoverable=function(){var a=c.getFeedData();return a.loadFailed&&(!a.loading||a.numRetry>=f.getFeedRetrivalMaxRetry())&&!k.showResourceList()},k.getUPN=function(){return j.getUPN()},k.showFeedEmptyOnPrem=function(){return null===k.getUPN()&&m()},k.showFeedEmptyWVD=function(){return k.getUPN()&&m()},k.getWorkspaces=function(){return c.getFeedData().workspaces},k}angular.module("rdpClientUI").component("rdpAllResourcesPane",{templateUrl:"app/rdp-client-ui/rdp-client-ui-all-resources-pane.html",controller:["$rootScope","browserCapabilities","rdFeedTracker","viewManager","sessionProvider","rdCommonRuntimeParameters","rdpFileDownloader","appSettingsStore","logger","userAuthInfoService",a],controllerAs:"allResourcesCtrl"})}(),function(){"use strict";function a(a,b,c,d){var e=[],f={},g=null,h=function(){e=c.desktopSessionList(),f=c.sessionListGrouped()};c.events.subscribe(SessionProviderEvent.SessionCreated,h),c.events.subscribe(SessionProviderEvent.SessionDestroyed,h),c.events.subscribe(SessionProviderEvent.SessionOrderChanged,h),c.events.subscribe(SessionProviderEvent.SessionGroupingChanged,h),c.events.subscribe(SessionProviderEvent.SessionIconChanged,h);var i,j,k,l;return a("FULLSCREEN_LABEL").then(function(a){i=a},function(a){i=a}),a("EXIT_FULLSCREEN_LABEL").then(function(a){j=a},function(a){j=a}),a("NAVBAR_PIN_LABEL").then(function(a){k=a},function(a){k=a}),a("NAVBAR_UNPIN_LABEL").then(function(a){l=a},function(a){l=a}),{isAuthenticated:function(){return b.isAuthenticated()},isDesktopSessionActive:function(a){return!(!d.isSessionPaneActive()||c.activeSession.id!==a.id)},isAppGroupActive:function(a){return!(!d.isSessionPaneActive()||c.activeSession.getApplicationId()!==a)},isSessionConnected:function(a){return!(!a.connection||a.connection.getState()!==ConnectionState.Connected)},isSessionDisconnected:function(a){return!(!a.connection||a.connection.getState()!==ConnectionState.Disconnected)},getUserName:function(){return b.getUserName()},getRemoteDesktopSessions:function(){return e},getAppGroups:function(){return f},focusSession:function(a){c.focusToSession(a.id,!0)},dismissSession:function(a){c.dismissSession(a.id)},showDesktopDivider:function(){return e.length>0},showAppsDivider:function(){return Object.keys(f).length>0},disableHover:function(a){g=a},enableHover:function(a){g===a&&(g=null)},isHoverEnabled:function(){return!g||!f.hasOwnProperty(g)},getFullscreenButtonText:function(){return d.inFullscreen()?j:i},getPinButtonText:function(){return d.isNavbarPinned()?l:k},isPrintingActive:function(){for(var a=d.isPrintJobAlertActive(),b=c.connectionList(),e=0;!a&&e<b.length;e++)a=b[e].getPendingPrintJobCount()>0;return a},setFocusMoreOptionsEscape:function(a){if(27===a.keyCode){var b=document.querySelector("#MoreOptionMenuButton");b&&b.focus()}},setFocusUserAccountEscape:function(a){if(27===a.keyCode){var b=document.querySelector("#UserAccountMenuButton");b&&b.focus()}},isMoreMenuOpen:!1,isUserMenuOpen:!1,getMyAccountLink:function(){return b.getPasswordResetLink()},getPasswordChangeEnabled:function(){return b.getPasswordChangeEnabled()},viewManager:d}}angular.module("rdpClientUI").component("rdpClientNavbar",{templateUrl:"app/rdp-client-ui/rdp-client-ui-navbar.html",controller:["$translate","userAuthInfoService","sessionProvider","viewManager",a],controllerAs:"ctrl"})}(),function(){function a(a){var b,c=a.localStorage,d={};if(!c)throw new Error("Local storage is not supported");try{b=!!JSON.parse(c.getItem("rdpClientUI.suppressClipHelpGlobally"))}catch(a){b=!1}return{getSuppressClipHelpForConnection:function(a){return!(!b&&!d[a])},setSuppressClipHelpForConnection:function(a,b){d[a]=!!b},setSuppressClipHelpGlobally:function(a){b=!!a,c.setItem("rdpClientUI.suppressClipHelpGlobally",JSON.stringify(b))}}}angular.module("rdpClientUI").factory("rdpClientUIProperties",["$window",a])}(),function(){"use strict";function a(a,b,c){return b.isInteractiveLoginRequired()&&a.prompt(),{viewManager:c}}angular.module("rdpClientUI").component("rdpClientTopView",{templateUrl:"app/rdp-client-ui/rdp-client-ui-top-view.html",controller:["signInModal","userAuthInfoService","viewManager",a],controllerAs:"topViewCtrl"})}(),function(){var a=function(a,b,c,d,e,f,g){var h,i=!0,j={HIDDEN:0,VISIBLE:1,PINNED:2},k=j.PINNED,l=null,m=!0,n=e!==e.top,o=function(){i=!0},p=function(){i=!1},q=function(){0===f.sessionList().length&&o()},r=function(){0!==f.sessionList().length&&f.activeSession&&p()},s=function(){return b[0].fullscreenEnabled||b[0].webkitFullscreenEnabled||b[0].mozFullScreenEnabled||b[0].msFullscreenEnabled},t=function(){return b[0].fullscreenElement||b[0].webkitFullscreenElement||b[0].mozFullScreenElement||b[0].msFullscreenElement},u=function(){t()?b[0].exitFullscreen?b[0].exitFullscreen():b[0].webkitExitFullscreen?b[0].webkitExitFullscreen():b[0].mozCancelFullScreen?b[0].mozCancelFullScreen():b[0].msExitFullscreen&&b[0].msExitFullscreen():b[0].documentElement.webkitRequestFullscreen?b[0].documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):b[0].documentElement.requestFullscreen?b[0].documentElement.requestFullscreen():b[0].documentElement.mozRequestFullScreen?b[0].documentElement.mozRequestFullScreen():b[0].documentElement.msRequestFullscreen&&b[0].documentElement.msRequestFullscreen()},v=function(){l&&(c.cancel(l),l=null)},w=function(){l&&(c.cancel(l),l=null),k===j.VISIBLE&&m&&(l=c(h,3e3))},x=!1,y=null,z=function(){x?c(function(){x=!1,y&&(c.cancel(y),y=null),c(z,500)}):(x=!0,y=c(function(){x=!1,y=null},6e3).catch(function(){}))},A=function(a){k===j.HIDDEN&&(k=j.VISIBLE,"keydown"===a.type&&c(function(){var a=b.find("#rdp-navbar-pin");a.length>0&&a[0].focus()},0)),w()};h=function(){k===j.VISIBLE&&m&&(k=j.HIDDEN)};var B=function(){k=k===j.PINNED?j.HIDDEN:j.PINNED,w()},C=function(){return k!==j.HIDDEN},D=function(){return k===j.PINNED},E=function(){d.open({animation:!0,templateUrl:"app/rdp-client-ui/Common/About.html",controller:"AboutCtrl",windowClass:"rdhtml5-sidepanel session-modal",placement:"right",backdrop:!0,keyboard:!0,ariaLabelledBy:"about_modal_title",resolve:{params:function(){return{platformInfo:g}}}}).result.finally(function(){m=!0,w()}),m=!1},F=function(){d.open({animation:!0,templateUrl:"app/rdp-client-ui/Common/Settings.html",controller:"SettingsCtrl",windowClass:"rdhtml5-sidepanel session-modal",placement:"right",backdrop:!0,keyboard:!0,ariaLabelledBy:"settings_modal_title"}).result.finally(function(){m=!0,w()}),m=!1};return a.$watch(function(){return f.sessionList().length},q),a.$watch(function(){return f.activeSession},r),a.$on("rdPrinting:printStart",z),b.on("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(){a.$digest()}),{isClientEmbedded:function(){return n},isAllResourcesPaneActive:function(){return i},isSessionPaneActive:function(){return!i},activateAllResourcesPane:o,activateSessionPane:p,showNavbar:A,toggleNavbarPinState:B,isNavbarVisible:C,isNavbarPinned:D,onNavbarEnter:v,onNavbarLeave:w,isFullscreenSupported:s,inFullscreen:t,toggleFullscreen:u,openAboutModal:E,openSettingsModal:F,isPrintJobAlertActive:function(){return x},dismissPrintJobAlert:function(){x=!1}}};angular.module("rdpClientUI").factory("viewManager",["$rootScope","$document","$timeout","$aside","$window","sessionProvider","platformInfo",a])}(),angular.module("rdpClientUI").factory("sessionProvider",["rdFeedTracker","sessionStore","logger","trustedCollections","telemetry","printing","platformInfo","rdDiagnostics","rdDebuggingEvents","$injector",function(a,b,c,d,e,f,g,h,i,j){var k;try{k=new(window.AudioContext||window.webkitAudioContext)}catch(a){c.warn("Failed to create audio context")}var l=null;j.has("rdStandaloneCertLogonTokenService")&&(l=j.get("rdStandaloneCertLogonTokenService"));var m=new ConnectionFactory(ConnectionFactoryType.RdpConnection,c,k,e,f,g,h,l,i),n=new SessionFactory(m,c,a,d);return new SessionProvider(n,m,b,null,null,c)}]),angular.module("rdpClientUI").factory("sessionStore",[function(){return new SessionStore}]),function(){"use strict";function a(a,b){a.getRetryCount=function(){return b.retryState[b.sessionId]&&b.retryState[b.sessionId].retryCount},a.cancel=function(){a.dialog.cancel()}}angular.module("rdpClientUI").controller("autoreconCtrl",["$scope","params",a])}(),function(){"use strict";function a(a){a.dontShowAgain=!1,a.isMac=navigator.platform.indexOf("Mac")>-1,a.close=function(){a.dialog.close(a.dontShowAgain)}}angular.module("rdpClientUI").controller("ClipHelptipCtrl",["$scope",a])}(),function(){"use strict";function a(a,b,c){a.ok=function(){try{document.execCommand("copy")}catch(a){}b.close()},a.copyAlertDescribedByID=c.copyAlertDescribedByID}angular.module("rdpClientUI").controller("copyAlertCtrl",["$scope","$uibModalInstance","params",a])}(),function(){"use strict";function a(a,b){b&&b.credRequest&&b.credRequest.cred&&(a.user=b.credRequest.cred),a.userPrefilled=a.user&&!!a.user.userName,a.cancel=function(){a.dialog.cancel()},a.submit=function(c,d){a.dialog.close({username:c,password:d||"",params:b})}}angular.module("rdpClientUI").controller("credPromptCtrl",["$scope","params",a])}(),function(){"use strict";function a(a,b){a.displayShowDetails=b.displayShowDetails,a.cancel=function(){a.dialog.cancel()},a.isSessionConnected=function(){return b.desktopBackgroundHandler.isSessionConnected(b.sessionId)},a.displayDesktopBackground=function(){b.desktopBackgroundHandler.displayDesktopBackground(!0,b.sessionId)},a.getConnState=function(){
return b.connState[b.sessionId]&&b.connState[b.sessionId].state},a.appPackageName=b.appPackageName}angular.module("rdpClientUI").controller("loaderTemplateCtrl",["$scope","params",a])}(),function(){"use strict";function a(a,b,c){c&&c.redirectionRequest&&c.redirectionRequest.properties&&(a.redirectionsRequested=[],c.redirectionRequest.properties.connectionSettings.EnableClipboard&&a.redirectionsRequested.push({id:"clipboard",locKey:"REDIRECTION_DIALOG_CLIPBOARD_LABEL"}),c.redirectionRequest.properties.connectionSettings.EnablePrinting&&a.redirectionsRequested.push({id:"printer",locKey:"REDIRECTION_DIALOG_PRINTER_LABEL"}),a.redirections={clipboard:!0,printer:!0},a.rememberCollection=!1,a.redirDialogDescribedByID=c.redirDialogDescribedByID),a.cancel=function(){b.dismiss("cancel")},a.submit=function(a,d){b.close({clipboard:a.clipboard,printer:a.printer,rememberCollection:d,params:c})}}angular.module("rdpClientUI").controller("redirectionPromptCtrl",["$scope","$uibModalInstance","params",a])}(),function(){"use strict";function a(a,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(){}function t(b,c){var d=r.getSavedCreds();d?b.complete(d):a.openCredentialPromptModal(b,c.id)}function u(b){a.openRedirectionPromptModal(b,o)}function v(b,c){a.vm.disconnectSession(b,c)}function w(a){var b=o.find(a);return!(!b||!b.connection||b.connection.getState()!==ConnectionState.Connected)}function x(b,c){a.vm.displayDesktopBackground(b,c)}function y(a,b,c,d){if(!J.hasOwnProperty(a)){var e={isSessionConnected:w,displayDesktopBackground:x},f=o.find(a);const g=f&&f.getBookmark()&&f.getBookmark().bookmarkType===BookmarkType.RemoteApp;var h=q.open(b,{templateUrl:"app/rdp-client-ui/Session/loaderTemplate.html",controller:"loaderTemplateCtrl",windowClass:"rdhtml5-loader session-modal dark",params:{appPackageName:d,sessionId:a,connState:c,desktopBackgroundHandler:e,displayShowDetails:g}});h.onClose=function(b){b&&v(a,!1),J.hasOwnProperty(a)&&delete J[a]},h.onCancel=function(){h.onClose(!0)},J[a]=h}}function z(a){J.hasOwnProperty(a)&&(J[a].close(!1),delete J[a])}function A(a,b,c){if(!K.hasOwnProperty(a)){var d=q.open(b,{templateUrl:"app/rdp-client-ui/Session/autoreconDialogTemplate.html",controller:"autoreconCtrl",windowClass:"rdhtml5-loader session-modal dark",params:{sessionId:a,retryState:c}});d.onClose=function(b){b&&v(a,!0),K.hasOwnProperty(a)&&delete K[a]},d.onCancel=function(){d.onClose(!0)},K[a]=d}}function B(a){K.hasOwnProperty(a)&&(K[a].close(!1),delete K[a])}function C(a,b){return e.open({animation:!0,templateUrl:"app/rdp-client-ui/Session/toast.html",windowClass:"rdhtml5-toast",controller:"toastCtrl",resolve:{params:function(){return{message:a,toastType:b}}}})}function D(a,b){var c=C(a,b);g(function(){c.close()},3e3)}function E(c){var d=b++,f="copyAlertDescribedBy"+d,h=e.open({animation:!0,templateUrl:"app/rdp-client-ui/Session/copyAlert.html",windowClass:"rdhtml5-copyInstance",controller:"copyAlertCtrl",backdrop:"static",ariaDescribedBy:f,keyboard:!0,resolve:{params:function(){return{copyAlertDescribedByID:f}}}}),i=g(function(){h.dismiss()},I);h.result.then(function(){c&&c()}).finally(function(){g.cancel(i),a.vm.postCopyDialogCleanup(),a.$broadcast("rdpClientUI:sessionTakeFocus")})}function F(b){q.open(b,{templateUrl:"app/rdp-client-ui/Session/clipHelptipTemplate.html",controller:"ClipHelptipCtrl",windowClass:"rdhtml5-cliphelptip session-modal dark"}).onClose=function(b){a.vm.setDontShowHelpTipValue(b)}}function G(a){var b=d++,c="noGatewayDescribedBy"+b;e.open({animation:!0,templateUrl:"app/rdp-client-ui/Session/noGatewayErrorTemplate.html",windowClass:"rdhtml5-nogatewayerror session-modal dark",backdrop:"static",keyboard:!0,ariaDescribedBy:c,controller:["$scope",function(b){b.describedByID=c,b.sessionTitle=a.bookmark.label()}]})}var H,I=6e3,J={},K={};H=new SessionViewModel(g,o,n,m,l,k,function(){return j("<canvas rd-input />")(a)[0]},p,i),h.trustAsUrl("app/rdp-client-ui/Session/clipHelptipTemplate.html"),o&&o.events&&o.events.subscribe(SessionProviderEvent.RedirectionsRequest,u),a.connectionDialog=q,a.vm=H,a.vm.delegate.allSessionsDisconnected=s,a.vm.delegate.onCredentialsNeeded=t,a.vm.delegate.onTrustChallenge=function(a){a.complete(0)},a.vm.delegate.openLoaderModal=y,a.vm.delegate.closeLoaderModal=z,a.vm.delegate.openAutoreconDialog=A,a.vm.delegate.closeAutoreconDialog=B,a.vm.delegate.sessionTakeFocus=function(){a.$broadcast("rdpClientUI:sessionTakeFocus")},a.vm.delegate.showToast=D,a.vm.delegate.showCopyConfirmationDialog=E,a.vm.delegate.showClipHelptip=F,a.vm.delegate.showNoGatewayError=G,a.currentOpenAppGroup=[],a.vm.init(),a.$on("$destroy",function(){a.vm.dismissed()}),a.disconnectAllSessions=function(){a.vm.disconnectAllSessions()},a.focusToSession=function(b){a.vm.focusToSession(b)},a.closeAppGroup=function(b){a.vm.closeAppGroup(b)},a.openPopover=function(b){g(function(){a.vm.openPopover(b),a.currentOpenAppGroup=a.vm.getAppListForId(b)})},a.closePopover=function(b){g(function(){a.vm.closePopover(b)})},a.isAuthenticated=function(){return p.isAuthenticated()},a.getUserName=function(){return p.getUserName()},a.openCredentialPromptModal=function(a,b){var c=q.open(b,{templateUrl:"app/rdp-client-ui/Session/credentialPromptTemplate.html",controller:"credPromptCtrl",windowClass:"rdhtml5-credPrompt session-modal dark",params:{credRequest:a}}),d=new Credential;c.onClose=function(b){d.userName=b.username,d.password=b.password,a.complete(d)},c.onCancel=function(){a.cancel()}},a.openRedirectionPromptModal=function(a,b){var d=c++,f="redirDialogDescribedBy"+d,g=e.open({animation:!0,templateUrl:"app/rdp-client-ui/Session/redirectionPromptTemplate.html",windowClass:"rdhtml5-redirectionPrompt session-modal dark",controller:"redirectionPromptCtrl",backdrop:"static",keyboard:!0,ariaDescribedBy:f,resolve:{params:function(){return{redirectionRequest:a,redirDialogDescribedByID:f}}}}),h=new Redirections;g.result.then(function(b){h.clipboard=b.clipboard,h.printer=b.printer,h.rememberCollection=b.rememberCollection,a.complete(h)},function(){b.setReconnecting(!1),a.cancel()})},a.hasBookmarks=function(b){return a.vm.hasBookmarks(b.id)},a.getActiveSession=function(){return o.activeSession},a.getReconnecting=function(){return o.getReconnecting()}}var b=0,c=0,d=0;angular.module("rdpClientUI").component("sessionView",{templateUrl:"app/rdp-client-ui/Session/Session.html",controller:["$scope","$uibModal","$aside","$timeout","$sce","$window","$compile","platformInfo","logger","rdpClientUIProperties","sessionStore","sessionProvider","userAuthInfoService","connectionDialog","credentialStore",a]})}(),function(){"use strict";function a(){return{restrict:"A",link:function(a,b){a.vm.canvas=b[0]}}}function b(){return{restrict:"A",link:function(){}}}function c(){return{restrict:"A",scope:!0,link:function(a,b){b.on({dragenter:function(a){a.stopPropagation(),a.preventDefault()},dragover:function(a){a.stopPropagation(),a.preventDefault()},drop:function(b){b.stopPropagation(),b.preventDefault(),a.vm.handleFilePasteEvent(b.originalEvent)},mousedown:function(b){a.vm.mouseDown(b.pageX,b.pageY,b.which),b.preventDefault()},mouseup:function(b){a.vm.mouseUp(b.pageX,b.pageY,b.which),b.preventDefault()},mousemove:function(b){a.vm.mouseMove(b.pageX,b.pageY),b.preventDefault()},mouseleave:function(b){a.vm.mouseLeave(b.pageX,b.pageY)},mouseenter:function(){a.vm.mouseEnter()},wheel:function(b){a.vm.mouseWheel(-b.originalEvent.deltaX,-b.originalEvent.deltaY),b.preventDefault()},contextmenu:function(a){a.preventDefault()},touchstart:function(b){a.vm.touchStart(b.originalEvent.changedTouches)},touchmove:function(b){a.vm.touchMove(b.originalEvent.changedTouches)},touchend:function(b){a.vm.touchEnd(b.originalEvent.changedTouches)},touchcancel:function(b){a.vm.touchCancel(b.originalEvent.changedTouches)}})}}}function d(a,b,c,d,e,f){return{restrict:"A",link:function(g,h){var i=!0,j=!1,k=function(){return a(function(){i=!0},550)};g.vm.textBox=h[0];var l=function(){a(function(){d.isSessionPaneActive()&&(e.isDialogVisible()?e.focusTopMostDialog():h.focus())})};g.vm.canvasContainer.addEventListener("click",l),g.$on("rdpClientUI:sessionTakeFocus",l),g.$on("$destroy",function(){g.vm.canvasContainer.removeEventListener("click",l)}),h.on({blur:function(){g.vm.canvasLostFocus()},keypress:function(a){g.vm.keyPress(a.which,a,f.IMEEnabled)&&a.preventDefault()},keydown:function(a){if("Home"===a.key&&a.altKey&&a.ctrlKey&&!a.metaKey){var b;b=d.isNavbarVisible()?c.find("#rdp-all-resources-link"):c.find("#rdp-collapsed-toolbar"),b.length>0&&b[0].focus(),a.preventDefault()}else g.vm.keyDown(a,f.IMEEnabled)&&a.preventDefault()},keyup:function(a){g.vm.executeCopy(),g.vm.keyUp(a,f.IMEEnabled)&&a.preventDefault()},cut:function(){g.vm.sendCutEvent(),j=!0},copy:function(){!j&&i?(g.vm.sendCopyEvent(),i=!1):j=!1,k()},paste:function(a){var c=b.clipboardData||a.originalEvent.clipboardData,d=c.getData("text")||"";g.vm.handleTextPasteEvent(d),a.preventDefault()}})}}}function e(a,b,c,d){return{restrict:"A",scope:!0,link:function(e,f){function g(){var a={width:f[0].offsetWidth,height:f[0].offsetHeight};if(i.width!==a.width||i.height!==a.height){var b,c=d.connectionList();for(b=0;b<c.length;b++)c[b].updateMonitorLayout()}i.width=a.width,i.height=a.height}var h=angular.element(a),i={width:null,height:null},j=_.debounce(function(){g()},125);e.$watch(function(){return c.isNavbarPinned()},function(a,b){a!==b&&j()}),h.on("resize",j),b.on("webkitfullscreenchange mozfullscreenchange fullscreenchange",j),e.$on("$destroy",function(){h.off("resize",j),b.off("webkitfullscreenchange mozfullscreenchange fullscreenchange",j)})}}}function f(a){return{restrict:"A",scope:{modalType:"@",closeModal:"&",textContent:"@"},link:function(b,c){function d(){a(function(){b.closeModal({result:"showToast"})},e)}var e=50;switch(b.modalType){case"copy":a(function(){angular.element(c).attr("readonly","readonly"),c[0].select()},e);break;case"paste":c.on("paste",d)}}}}function g(a,b){return{scope:!1,restrict:"A",link:function(c,d){function e(c){var d=0,e=0,f=c||b.event;return f.pageX||f.pageY?(d=f.pageX,e=f.pageY):(f.clientX||f.clientY)&&(d=f.clientX+a[0].body.scrollLeft+a[0].documentElement.scrollLeft,e=f.clientY+a[0].body.scrollTop+a[0].documentElement.scrollTop),{x:d,y:e}}function f(a){l=e(a),m=l.x,n=l.y,o=u[0].offsetWidth+4,p=u[0].offsetHeight+4,q=window.innerWidth,r=window.innerHeight,u[0].style.left=q-m<o?q-o-y+"px":m-y+"px",u[0].style.top=r-n<p?r-p-y+"px":n-y+"px"}function g(){w!==v.menuOn?(w=v.menuOn,u.addClass(x)):w!==v.menuOff&&(s.removeClass("hover-class-dup"),w=v.menuOff,u.removeClass(x))}function h(a){s=angular.element(a.srcElement||a.target),t=s.attr("id")||s.parent().attr("id"),s.is("img")?s.addClass("hover-class-dup"):s.children().first().addClass("hover-class-dup"),z=t,t&&(a.preventDefault(),g(),f(a))}function i(a){27===a.keyCode&&0!==w&&g()}function j(a){z&&(angular.element(a.target).hasClass("context-menu__link")||angular.element(a.target).hasClass("mdl-Cancel"))?(c.closeAppGroup(z),g()):0!==w&&g()}function k(){0!==w&&g()}var l,m,n,o,p,q,r,s,t,u=angular.element(a[0].getElementById("context-menu")),v={menuOn:1,menuOff:0},w=0,x="context-menu--active",y=2,z=null;a.on("click",j),d.on("contextmenu",h),u.on("mouseleave",k),angular.element(b).on("keyup",i),c.$on("$destroy",function(){a.off("click",j),d.off("contextmenu",h),u.off("mouseleave",g),angular.element(b).off("keyup",i)})}}}angular.module("rdpClientUI").directive("canvasSizeHandler",["$window","$document","viewManager","sessionProvider",e]).directive("connectionIndicator",[b]).directive("contextmenuHandler",["$document","$window",g]).directive("clipTextbox",["$timeout","$window","$document","viewManager","connectionDialog","appSettingsStore",d]).directive("rdCanvas",[a]).directive("rdInput",[c]).directive("textareaHandler",["$timeout",f])}();var SessionViewModelDelegate=function(){"use strict";this.allSessionsDisconnected=null,this.onCredentialsNeeded=null,this.onTrustChallenge=null,this.openLoaderModal=null,this.closeLoaderModal=null,this.openAutoreconDialog=null,this.closeAutoreconDialog=null,this.sessionTakeFocus=null,this.showToast=null,this.showCopyConfirmationDialog=null,this.showClipHelptip=null,this.showNoGatewayError=null},ClipTipHelper=function(a,b){"use strict";var c=this;return c.showCliphelpTip=function(c,d,e){try{a.getSuppressClipHelpForConnection(d)||!c.isChrome&&!c.isIE||e&&e(d),a.setSuppressClipHelpForConnection(d,!0)}catch(a){b.error("[CliptipHelper] Unable to show the helptip template "+a.message)}},c.setDontShowHelpTipValue=function(b){a.setSuppressClipHelpGlobally(b)},c},KbHelper=function(a,b){"use strict";var c=this;c.nonCharKeySet=new Set;for(var d in KeyCodes)KeyCodes.hasOwnProperty(d)&&c.nonCharKeySet.add(KeyCodes[d]);return c.isNonCharacterKey=function(a){return c.nonCharKeySet.has(a)},c.isCmdPressed=function(){return a.isMac&&(void 0!==b[KeyCodes.Cmd1]&&b[KeyCodes.Cmd1]||void 0!==b[KeyCodes.Cmd2]&&b[KeyCodes.Cmd2]||void 0!==b[KeyCodes.Cmd3]&&b[KeyCodes.Cmd3])},c.isCtrlPressed=function(a){return a.ctrlKey||void 0!==b[KeyCodes.Ctrl]&&b[KeyCodes.Ctrl]},c.convertToCRLF=function(a){return a.replace(/\r?\n/g,"\r\n")},c.isNumericPadKey=function(a){return a in NumericPadKeyCodes},c.isCtrlAltCharacterShortCuts=function(a){return a in CtrlAltCharacterShortCuts},c},SessionViewModel=function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l={sessionList:{},events:new EventProvider,canvas:null,canvases:{},canvasContainer:document.getElementById("canvas-container"),textBox:null,clipboard:{}},m=!1,n=null,o=!1,p=[100,250,500],q=[],r=!1,s={},t={},u=!1,v={},w=new ClipTipHelper(d,e),x=new KbHelper(f,v),y={},z=null,A="",B=_.throttle(function(){a()},100),C=function(a){return l.canvases.hasOwnProperty(a)||(l.canvases[a]=g()),l.canvases[a]},D=function(){l.canvas.width>l.canvasContainer.offsetWidth||l.canvas.height>l.canvasContainer.offsetHeight?l.canvasContainer.style.overflow="auto":l.canvasContainer.style.overflow="visible"},E=function(a){var b=C(a);b&&(b!==l.canvas&&(l.canvas&&l.canvasContainer.removeChild(l.canvas),l.canvas=b,l.canvasContainer.appendChild(l.canvas),D()),l.delegate.sessionTakeFocus&&l.delegate.sessionTakeFocus())},F=function(){l.sessionList=b.sessionListGrouped(l.sessionList),B()},G=function(){b.hasActiveConnections()||l.delegate.allSessionsDisconnected()},H=function(a,b,d){var e="";switch(b){case ConnectionState.OpeningRemotePort:e="CONNECTION_OPENING_REMOTE_PORT";break;case ConnectionState.EstablishingSecureConnection:e="CONNECTION_ESTABLISHING_SECURE_CONNECTION";break;case ConnectionState.ConfiguringRemoteConnection:e="CONNECTION_CONFIGURING_REMOTE_CONNECTION";break;case ConnectionState.DetectingNetworkQuality:e="CONNECTION_DETECTING_NETWORK_QUALITY";break;case ConnectionState.SessionBrokerFindingDestination:e="CONNECTION_SESSION_BROKER_FINDING_DESTINATION";break;case ConnectionState.SessionBrokerLoadingDestination:e="CONNECTION_SESSION_BROKER_LOADING_DESTINATION";break;case ConnectionState.SessionBrokerBringingSessionOnline:e="CONNECTION_SESSION_BROKER_BRINGING_SESSION_ONLINE";break;case ConnectionState.SessionBrokerRedirectingToDestination:e="CONNECTION_SESSION_BROKER_REDIRECTING_TO_DESTINATION";break;case ConnectionState.VirtualMachineLoading:e="CONNECTION_VIRTUAL_MACHINE_LOADING";break;case ConnectionState.VirtualMachineWaking:e="CONNECTION_VIRTUAL_MACHINE_WAKING";break;case ConnectionState.VirtualMachineStarting:e="CONNECTION_VIRTUAL_MACHINE_STARTING";break;case ConnectionState.VirtualMachineRetryingSessionMonitoring:e="CONNECTION_VIRTUAL_MACHINE_RETRYING_SESSION_MONITORING";break;case ConnectionState.VirtualMachineStartingSessionMonitoring:e="CONNECTION_VIRTUAL_MACHINE_STARTING_SESSION_MONITORING"}if(s.hasOwnProperty(a)?s[a].state=e:s[a]={state:e},0!==d){t.hasOwnProperty(a)?t[a].retryCount=d:t[a]={retryCount:d};var f=c.find(a);l.delegate.openAutoreconDialog&&f&&l.delegate.openAutoreconDialog(a,f.getConnectionId(),t)}B()},I=function(a){e.debug("[SessionViewModel] Received didConnect event on UI layer for session "+a);var c=b.find(a);c.getBookmark()&&c.getBookmark().bookmarkType!==BookmarkType.RemoteApp&&l.delegate.closeLoaderModal&&l.delegate.closeLoaderModal(a),l.delegate.closeAutoreconDialog&&l.delegate.closeAutoreconDialog(a),F(),E(j.getConnectionId())},J=function(a){e.debug("[SessionViewModel] Received didDisconnect event on UI layer");var b=c.find(a);!l.delegate.closeLoaderModal||b&&0!==b.getSiblingCount()||l.delegate.closeLoaderModal(a),!l.delegate.closeAutoreconDialog||b&&0!==b.getSiblingCount()||l.delegate.closeAutoreconDialog(a),F(),G()},K=function(a,b){e.error("[SessionViewModel] Session "+a+" had error: "+b)},L=function(a){e.debug("[SessionViewModel] Received canvasNeeded event on UI layer, connectionID="+a);var b=C(a);return e.debug(b),b},M=function(a){e.debug("[SessionViewModel] Received retireCanvas event on UI layer, connectionID="+a),delete l.canvases[a]},N=function(){return e.debug("[SessionViewModel] Received monitorBound event on UI layer"),l.getMonitorBounds()},O=function(a,b){if(!0===a.isTokenRequired){e.debug("[SessionViewModel] Credentials requested (token)");var c=h.getCachedToken();c?(e.debug("[SessionViewModel] Token found, completing credential request with token"),a.completeWithToken("Bearer "+c)):a.cancel()}else e.debug("[SessionViewModel] Credentials requested (username/password)"),l.delegate.onCredentialsNeeded&&l.delegate.onCredentialsNeeded(a,b)},P=function(a){e.debug("[SessionViewModel] Certificate trust challenge"),l.delegate.onTrustChallenge&&l.delegate.onTrustChallenge(a)},Q=function(a){e.debug("[SessionViewModel] Mouse pointer changed to "+a),l.canvas.style.cursor='url("'+a+'"), auto'},R=function(a){switch(e.debug("[SessionViewModel] Default mouse pointer value changed to "+a),a){case!0:l.canvas.style.cursor="auto";break;case!1:f.isMac&&f.isFirefox||(l.canvas.style.cursor="none")}},S=function(a,b){z=j.getConnectionId(),l.setLocalClipboardContent(a,b),l.setRemoteClipboardFormats(),o=!0,A=b,l.textBox.value=b,e.log("[SessionViewModel] Setting textbox value to "+b)},T=function(a){var b=l.clipboard[a.GetFormat()];b?a.complete(b):a.cancel(),a.delete()},U=function(a){a.value===Module.ClipboardResponse.ResponseOk.value&&e.log("[SessionViewModel] Set remote clipboard formats complete")},V=function(){F()},W=function(){F()},X=function(){F()},Y=function(){F()},Z=function(a,b,c){a.getConnectionId()===j.getConnectionId()&&(l.canvas.width=b,l.canvas.height=c,D())},$=function(a){j=c.find(a),e.log("[SessionViewModel] Session focused event received in view model session id: "+j.id),F(),E(j.getConnectionId())},aa=function(a){e.debug("[SessionViewModel] Session destroy event received for: "+a),F(),G()},ba=function(a){e.log("[SessionViewModel] Session created event received for: "+a),(j=c.find(a))&&(k(j,!0),j.state===SessionState.Initialized&&(j.connect(),l.delegate.openLoaderModal&&j&&0===j.getSiblingCount()&&l.delegate.openLoaderModal(a,j.getConnectionId(),s,j.getLabel())),F(),E(j.getConnectionId()))},ca=function(a){e.debug("[SessionViewModel] SessionCreateFailed event received in view model"),a&&a.propertiesRejectedReason===ConnectionPropertiesRejectedReason.GatewayNotSpecified&&l.delegate.showNoGatewayError&&l.delegate.showNoGatewayError(a)},da=function(){e.debug("[SessionViewModel] Session order changed event received in view model"),F()},ea=function(){e.debug("[SessionViewModel] Sessions loaded event received in view model"),F()},fa=function(){var a=l.canvas.getBoundingClientRect();return{x:a.x+i.pageXOffset,y:a.y+i.pageYOffset,width:a.width,height:a.height,top:a.top+i.pageYOffset,bottom:a.bottom+i.pageYOffset,left:a.left+i.pageXOffset,right:a.right+i.pageXOffset}},ga=function(a,b){var c,d,e=0,f=0,g=fa();return e+=g.left,f+=g.top,c=l.canvas.offsetWidth/l.canvas.width,d=l.canvas.offsetHeight/l.canvas.height,a=(a-e)/c,b=(b-f)/d,{x:a,y:b}},ha=function(a,b){var c=fa(),d=l.canvas.width/(c.right-c.left),e=l.canvas.height/(c.bottom-c.top);return{clientX:(a-c.left)*d,clientY:(b-c.top)*e}},ia=function(a){var b;return 1===a?b=MouseButton.Left:2===a?b=MouseButton.Middle:3===a?b=MouseButton.Right:4===a?b=MouseButton.Button4:5===a&&(b=MouseButton.Button5),b},ja=!1,ka=function(a,b){return!f.isMac||a.keyCode!==KeyCodes.Cmd1&&a.keyCode!==KeyCodes.Cmd2&&a.keyCode!==KeyCodes.Cmd3?"End"===a.key&&a.altKey&&a.ctrlKey&&!a.metaKey&&!a.shiftKey?(a.key="Delete",a.keyCode=KeyCodes.Delete,!1):!("Meta"!==a.key&&"Win"!==a.key&&"OS"!==a.key||a.altKey||a.ctrlKey||a.shiftKey)||!("F3"!==a.key||!a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)&&(j.keyUp(KeyCodes.Alt),!1===ja&&(ja=!0,a.key="Meta",a.keyCode=KeyCodes.Cmd1),!1===b&&(ja=!1,a.key="Meta",a.keyCode=KeyCodes.Cmd1),!1):(a.key="Ctrl",a.keyCode=KeyCodes.Ctrl,a.metaKey=!1,a.ctrlKey=!0,!1)},la=function(a){if("code"in a.originalEvent){var b=a.originalEvent.code;if(CodesToKeycodes.hasOwnProperty(b))return CodesToKeycodes[b]}return a.keyCode},ma=function(a,b){if(ka(a,b))return!1;var c=a.keyCode;if((x.isNonCharacterKey(c)||a.altKey||a.metaKey||x.isCtrlPressed(a)||x.isCmdPressed())&&(v[c]=b),b){if(setTimeout(function(){j.keyDown(la(a))},25),(x.isCmdPressed()||x.isCtrlPressed(a))&&(c===ASCIICodes.c||c===ASCIICodes.C||c===ASCIICodes.v||c===ASCIICodes.V||c===ASCIICodes.x||c===ASCIICodes.X))return m=!0,!1}else setTimeout(function(){j.keyUp(la(a))},25);return!!(x.isNonCharacterKey(c)||a.altKey||a.metaKey||x.isCtrlPressed(a)||x.isCmdPressed())&&(!f.isMac&&c!==KeyCodes.Ctrl||f.isMac&&c!==KeyCodes.Cmd1&&c!==KeyCodes.Cmd2&&c!==KeyCodes.Cmd3)},na=function(a,b){if(ka(a,b))return!1;var c=a.keyCode;if(x.isNonCharacterKey(c)||a.altKey||a.metaKey||x.isCtrlPressed(a)||x.isCmdPressed()){v[c]=b;var d=String.fromCharCode(c);if(!x.isNumericPadKey(c)){if(!f.isMac&&!x.isNonCharacterKey(c)&&d.toLowerCase()!==a.key&&d.toUpperCase()!==a.key)return!1;if(f.deviceInfo.isWindows()&&a.altKey&&x.isCtrlPressed(a)&&!x.isNonCharacterKey(c)&&!x.isCtrlAltCharacterShortCuts(c))return!1}if(b){if(setTimeout(function(){j.keyDown(c)},25),(x.isCmdPressed()||x.isCtrlPressed(a))&&(c===ASCIICodes.c||c===ASCIICodes.C||c===ASCIICodes.v||c===ASCIICodes.V||c===ASCIICodes.x||c===ASCIICodes.X))return m=!0,!1}else setTimeout(function(){j.keyUp(c)},25);return!f.isMac&&c!==KeyCodes.Ctrl||f.isMac&&c!==KeyCodes.Cmd1&&c!==KeyCodes.Cmd2&&c!==KeyCodes.Cmd3}return!1},oa=function(){for(;q.length>0;)clearTimeout(q.shift())},pa=function(){if(o){oa();var a=document.activeElement;l.textBox.select();try{document.execCommand("copy")?(e.log("[SessionViewModel] '"+l.textBox.value+"' successfully copied to local clipboard"),o=!1,a.focus()):(e.log("[SessionViewModel] Unable to copy to local clipboard because execcommand returned false."),a.focus(),l.delegate.showCopyConfirmationDialog&&!u&&(u=!0,r=!0,l.delegate.showCopyConfirmationDialog(pa)))}catch(b){e.log("[SessionViewModel] Unable to copy to local clipboard because execcommand failed."),a.focus(),l.delegate.showCopyConfirmationDialog&&!u&&(u=!0,r=!0,l.delegate.showCopyConfirmationDialog(pa))}}},qa=function(a,c){var d=b.find(c);if(d.getBookmark()&&d.getBookmark().bookmarkType===BookmarkType.RemoteApp){a&&l.delegate.closeLoaderModal&&l.delegate.closeLoaderModal(c);const f=!0===a?"block":"none";var g=C(d.getConnectionId());g.style.display!==f&&(g.style.display=f,e.log("[SessionViewModel] Session "+c+" changed canvas display to "+f))}};return k=function(a,b){b?(a.events.subscribe(SessionEvent.DisplayDesktopBackground,qa),a.events.subscribe(SessionEvent.WillConnect,H),a.events.subscribe(SessionEvent.DidDisconnect,J),a.events.subscribe(SessionEvent.DidConnect,I),a.events.subscribe(SessionEvent.ViewSizeChanged,Z),a.events.subscribe(SessionEvent.WindowIconChanged,V),a.events.subscribe(SessionEvent.WindowTitleChanged,W),a.events.subscribe(SessionEvent.WindowLaunched,X),a.events.subscribe(SessionEvent.ApplicationIdChanged,Y),a.events.subscribe(SessionEvent.CredentialsNeeded,O),a.events.subscribe(SessionEvent.TrustChallenge,P),a.events.subscribe(SessionEvent.MousePointerChanged,Q),a.events.subscribe(SessionEvent.ShowDefaultMousePointer,R),a.events.subscribe(SessionEvent.GetRemoteClipboardContent,S),a.events.subscribe(SessionEvent.ClipboardContentRequest,T),a.events.subscribe(SessionEvent.SetRemoteClipboardFormatsComplete,U),a.events.subscribe(SessionEvent.Error,K)):(a.events.unsubscribe(SessionEvent.DisplayDesktopBackground,qa),a.events.unsubscribe(SessionEvent.WillConnect,H),a.events.unsubscribe(SessionEvent.DidDisconnect,J),a.events.unsubscribe(SessionEvent.DidConnect,I),a.events.unsubscribe(SessionEvent.ViewSizeChanged,Z),a.events.unsubscribe(SessionEvent.WindowIconChanged,V),a.events.unsubscribe(SessionEvent.WindowTitleChanged,W),a.events.unsubscribe(SessionEvent.WindowLaunched,X),a.events.unsubscribe(SessionEvent.ApplicationIdChanged,Y),a.events.unsubscribe(SessionEvent.CredentialsNeeded,O),a.events.unsubscribe(SessionEvent.TrustChallenge,P),a.events.unsubscribe(SessionEvent.MousePointerChanged,Q),a.events.unsubscribe(SessionEvent.ShowDefaultMousePointer,R),a.events.unsubscribe(SessionEvent.GetRemoteClipboardContent,S),a.events.unsubscribe(SessionEvent.ClipboardContentRequest,T),a.events.unsubscribe(SessionEvent.SetRemoteClipboardFormatsComplete,U),a.events.unsubscribe(SessionEvent.Error,K))},l.displayDesktopBackground=qa,l.isIdTypeOrgId=function(){return!1},l.setDontShowHelpTipValue=function(a){w.setDontShowHelpTipValue(a)},l.runExeccommandOnKey=function(){r=!0},l.sendCutEvent=function(){w.showCliphelpTip(f,j.getConnectionId(),l.delegate.showClipHelptip)},l.sendCopyEvent=function(){w.showCliphelpTip(f,j.getConnectionId(),l.delegate.showClipHelptip)},l.executeCopy=function(){m&&(m=!1,p.map(function(a){setTimeout(pa,a)}))},l.init=function(){b.events.subscribe(SessionProviderEvent.SessionCreated,ba),b.events.subscribe(SessionProviderEvent.SessionCreateFailed,ca),b.events.subscribe(SessionProviderEvent.SessionFocused,$),b.events.subscribe(SessionProviderEvent.SessionDestroyed,aa),b.events.subscribe(SessionProviderEvent.SessionOrderChanged,da),b.events.subscribe(SessionProviderEvent.SessionsLoaded,ea),b.delegate.canvasNeeded=L,b.delegate.retireCanvas=M,b.delegate.monitorBounds=N},l.delegate=new SessionViewModelDelegate,l.handleTextPasteEvent=function(a){var b=a;f.isMac&&(b=x.convertToCRLF(a)),w.showCliphelpTip(f,j.getConnectionId(),l.delegate.showClipHelptip),l.isClipboardReady()&&(a!==A&&(z=null,l.setLocalClipboardContent(Module.ClipboardFormatType.Text,b),l.setLocalClipboardContent(Module.ClipboardFormatType.UnicodeText,b),l.setRemoteClipboardFormats()),A=a)},l.handleFilePasteEvent=function(a){var b,c=[];if(a.dataTransfer.items)for(b=0;b<a.dataTransfer.items.length;b++)"file"===a.dataTransfer.items[b].kind&&(c[b]=a.dataTransfer.items[b].getAsFile(),console.log("file["+b+"].name = "+c[b].name));else if(a.dataTransfer.files)for(b=0;b<a.dataTransfer.files.length;b++)c[b]=a.dataTransfer.files[b],console.log("file["+b+"].name = "+a.dataTransfer.files[b].name)},l.setLocalClipboardContent=function(a,b){l.clipboard[a]=b},l.setRemoteClipboardFormats=function(){var a,c=b.connectionList(),d=new Module.ClipboardFormatList;for(d.push_back(new Module.ClipboardFormat(Module.ClipboardFormatType.Text)),d.push_back(new Module.ClipboardFormat(Module.ClipboardFormatType.UnicodeText)),a=0;a<c.length;a++){var e=c[a];e.id!==z&&e.clipboardHandler.setRemoteClipboardFormats(d)}d.delete()},l.isClipboardReady=function(){return!!j&&j.isClipboardReady()},l.getMonitorBounds=function(){var a,b;return a=l.canvasContainer.offsetWidth,b=l.canvasContainer.offsetHeight,a=Math.max(a,800),a=Math.min(a,3840),b=Math.max(b,600),b=Math.min(b,2160),a=16*Math.floor(a/16),b=16*Math.floor(b/16),{width:a,height:b}},l.postCopyDialogCleanup=function(){o=!1,u=!1,r=!1},l.disconnectAllSessions=function(){b.disconnect(),F(),G()},l.disconnectSession=function(a,c){var d=b.find(a);d&&d.disconnect(c)},l.cancelAutoreconnect=function(){},l.openPopover=function(a){var b=null;try{b=new i.Event("openTrigger")}catch(a){b=document.createEvent("Event"),b.initEvent("openTrigger",!0,!0)}document.getElementById(a).dispatchEvent(b)},l.closePopover=function(a){var b=null;try{b=new i.Event("closeTrigger")}catch(a){b=document.createEvent("Event"),b.initEvent("closeTrigger",!0,!0)}document.getElementById(a).dispatchEvent(b)},l.getConnectionStateForId=function(a){return s[a]},l.getAppListForId=function(a){return l.sessionList[a]},l.closeAppGroup=function(a){var b=l.getAppListForId(a);if(b&&b.sessionList)for(var c=0;c<b.sessionList.length;c++)b.sessionList[c].disconnect()},l.hasBookmarks=function(a){return l.bookmarkList(a).length>0},l.shown=function(){var a,c;e.log("[SessionViewModel] Session shown"),F();for(a in l.sessionList)if(l.sessionList.hasOwnProperty(a)){var d=l.sessionList[a].sessionList;for(a in d)d.hasOwnProperty(a)&&(c=d[a],k(c,!0))}j=b.activeSession,setTimeout(function(){b.invalidateCanvasForActiveConnections()},500)},l.dismissed=function(){var a,c;e.log("[SessionViewModel] Session dissmissed"),b.events.unsubscribe(SessionProviderEvent.SessionCreated,ba),b.events.unsubscribe(SessionProviderEvent.SessionCreateFailed,ca),b.events.unsubscribe(SessionProviderEvent.SessionFocused,$),b.events.unsubscribe(SessionProviderEvent.SessionDestroyed,aa),b.events.unsubscribe(SessionProviderEvent.SessionOrderChanged,da),b.events.unsubscribe(SessionProviderEvent.SessionsLoaded,ea);for(a in l.sessionList)if(l.sessionList.hasOwnProperty(a)){var d=l.sessionList[a].sessionList;for(a in d)d.hasOwnProperty(a)&&(c=d[a],k(c,!1))}},l.mouseDown=function(a,b,c){var d=ga(a,b);c=ia(c),j.mouseDown(d.x,d.y,c),y[c]=!0},l.mouseUp=function(a,b,c){var d=ga(a,b);c=ia(c),j.mouseUp(d.x,d.y,c),c===MouseButton.Left&&n===MouseButton.Right&&(m=!0,l.executeCopy()),n=c,delete y[c]},l.mouseMove=function(a,b){var c=ga(a,b);j.mouseMove(c.x,c.y)},l.mouseWheel=function(a,b){j.mouseWheel(a,b)},l.mouseEnter=function(){},l.mouseLeave=function(a,b){var c,d=ga(a,b);e.debug("[SessionViewModel] Mouse left canvas mouse position: "+d.x+":"+d.y),d.x<0?d.x=0:d.x>l.canvas.width&&(d.x=l.canvas.width),d.y<0?d.y=0:d.y>l.canvas.height&&(d.y=l.canvas.height);for(c in y)y.hasOwnProperty(c)&&y[c]&&(e.debug("[SessionViewModel Resetting key state for mouse button: "+c),j.mouseUp(d.x,d.y,parseInt(c)),delete y[c])},l.addAdjustedTouchPos=function(a){for(var b=0;b<a.length;b++)a[b].adjustedTouchPos=ha(a[b].clientX,a[b].clientY)},l.touchStart=function(a){l.addAdjustedTouchPos(a),j.sendTouchEvents(TouchState.Start,a)},l.touchMove=function(a){l.addAdjustedTouchPos(a),j.sendTouchEvents(TouchState.Move,a)},l.touchEnd=function(a){l.addAdjustedTouchPos(a),j.sendTouchEvents(TouchState.End,a)},l.touchCancel=function(a){l.addAdjustedTouchPos(a),j.sendTouchEvents(TouchState.Cancel,a)},l.keyPress=function(a,b,c){if(!x.isCmdPressed()&&!x.isCtrlPressed(b)||!b||"KeyV"!==b.code&&"KeyC"!==b.code&&"KeyX"!==b.code&&(!f.isSafari||a!==ASCIICodes.c&&a!==ASCIICodes.v&&a!==ASCIICodes.x)){var d=b.altKey;return d&&!f.isMac&&j.keyUp(KeyCodes.Alt),c||(j.keyUnicodeDown(a),j.keyUnicodeUp(a)),d&&!f.isMac&&j.keyDown(KeyCodes.Alt),!0}return!1},l.keyDown=function(a,b){return r&&document.execCommand("copy"),b?ma(a,!0):na(a,!0)},l.keyUp=function(a,b){return b?ma(a,!1):na(a,!1)},l.canvasFocus=function(){e.debug("[SessionViewModel] Canvas gains focus")},l.canvasLostFocus=function(){var a;e.debug("[SessionViewModel] Canvas lost focus"),setTimeout(function(){for(a in v)v.hasOwnProperty(a)&&v[a]&&(j.keyUp(parseInt(a)),v[a]=!1)},26)},l.activeSessionId=function(){return j?j.id:null},l.getAppIdForActiveSession=function(){return j?j.getApplicationId():null},l.getSessionListForAppId=function(a){return l.sessionList[a]},l.checkAndSwitchActiveWindow=function(a,b){if(b.is("img")){var c;c=l.getSessionListForAppId(a).sessionList[0].id,l.focusToSession(c)}},l.focusToSession=function(a){e.debug("[SessionViewModel] Session switched to "+a),b.focusToSession(a)},l};!function(){"use strict";function a(a,b){switch(a.message=b.message,b.toastType){case"pasteToast":a.type=1;break;case"infoToast":a.type=2}}angular.module("rdpClientUI").controller("toastCtrl",["$scope","params",a])}(),function(){"use strict"
;function a(a,b){var c={userName:null,password:null};a.user=c,a.signInPending=!1,a.signIn=function(){a.loginFailMessage=null,a.passwordResetLink=null,a.signInPending=!0,b.login(c.userName,c.password).then(function(){a.$close()},function(b){a.loginFailMessage=b.message,a.passwordResetLink=b.passwordResetLink,a.signInPending=!1})},a.loginFailMessage=null,a.passwordResetLink=null}angular.module("rdpClientUI").controller("signInModalCtrl",["$scope","userAuthInfoService",a])}(),function(){"use strict";function a(a){return{prompt:function(){a.open({animation:!0,templateUrl:"app/rdp-client-ui/sign-in-modal.html",windowClass:"rdhtml5-sign-in dark",controller:"signInModalCtrl",backdrop:"static",ariaDescribedBy:"signInTitle",keyboard:!1})}}}angular.module("rdpClientUI").factory("signInModal",["$uibModal",a])}(),function(){"use strict";var a=function(a,b){var c=b&&b.supportObj||null;null===c&&(c={logoURL:null,supportURL:null,supportPhone:null,privacyURL:null}),a.supportObj=c};angular.module("rdpClientUI").controller("SupportController",["$scope","params",a])}(),function(){function a(a){var c=a.localStorage;if(!c)throw new Error("Persistent storage is not available!");var d=function(){try{return JSON.parse(c.getItem("RdWebAppTrustedCollections"))||[]}catch(a){return[]}},e={clearTrustedCollections:function(){c.removeItem("RdWebAppTrustedCollections")},isCollectionTrusted:function(a){var c=d(),e=new b(a);for(var f in c){var g=c[f];if(e.isEqual(g))return!0}return!1},trustCollection:function(a){if(!e.isCollectionTrusted(a)){var f=d(),g=new b(a);f.push(g),c.setItem("RdWebAppTrustedCollections",JSON.stringify(f))}}};return e}var b=function(a){var b={},c=a&&a.connectionSettings;return c&&(b.HostName=c.HostName.toLowerCase(),b.Port=c.Port,b.LBInfo=c.LBInfo,b.GatewayHostName=c.GatewayHostName.toLowerCase(),b.GatewayPort=c.GatewayPort,b.Redirections={Clipboard:c.EnableClipboard}),b.isEqual=function(a){var c=b.Redirections||{},d=a.Redirections||{};return b.HostName===a.HostName&&b.Port===a.Port&&b.LBInfo===a.LBInfo&&b.GatewayHostName===a.GatewayHostName&&b.GatewayPort===a.GatewayPort&&c.Clipboard===d.Clipboard},b};angular.module("rdpClientUI").factory("trustedCollections",["$window",a])}(),angular.module("rdpClientUI").run(["$templateCache",function(a){"use strict";a.put("app/rdp-client-ui/application-tab.html",'<div class="rdp-appgroup-tab dropdown" uib-dropdown is-open=ctrl.isOpen ng-mouseenter=ctrl.onTabHover() ng-mouseleave=ctrl.onTabLeave() on-toggle=ctrl.onToggle(open)><a href=javascript:void(0) ng-click=ctrl.onTabClick($event) tabindex=1 ng-attr-aria-label={{appGroup.sessionList[0].getLabel()}} role=menuitem><img class=rdp-app-large-icon ng-src={{appGroup.thumbnail}} ng-if=appGroup.thumbnail> <span class="mdl mdl-fw mdl-AppIconDefault rdp-app-large-icon" ng-if=!appGroup.thumbnail></span> <span class=badge ng-if="appGroup.sessionList.length > 1">{{appGroup.sessionList.length}}</span></a><ul class=dropdown-menu role=menu><li ng-repeat="app in appGroup.sessionList"><a href=javascript:void(0) ng-click=ctrl.focusSession(app) tabindex=1 role=menuitem><img class=rdp-app-small-icon ng-src={{app.getThumbnail()}} ng-if=app.getThumbnail()> <span class="mdl mdl-fw mdl-AppIconDefault rdp-app-small-icon" ng-if=!app.getThumbnail()></span> <span class=rdp-app-label>{{app.getLabel()}}</span></a></li></ul></div>'),a.put("app/rdp-client-ui/Common/About.html","<div class=sidepanel-header><h4 id=about_modal_title class=sidepanel-header-title translate=ABOUT_LABEL></h4><a href=javascript:void(0) class=\"close close-button qoe-close\" ng-click=cancel() rdp-grab-focus translate-attr=\"{ 'title': 'BUTTON_CLOSE', 'ng-attr-aria-label': 'BUTTON_CLOSE'}\" role=button><i class=\"mdl mdl-fw mdl-20x mdl-Cross\"></i></a></div><div class=sidepanel-content><p translate=ABOUT_PANE_APP_TITLE></p><p translate=ABOUT_PANE_VERSION translate-values=\"{'appVersion': appVersion}\"></p><div translate=ABOUT_PANE_COPYRIGHT></div></div><div class=sidepanel-content><div ng-if=supportID translate=ABOUT_PANE_SUPPORT_ID translate-values=\"{'supportID': supportID}\"></div><div ng-if=!supportID translate=ABOUT_PANE_TELEMETRY_DISABLED></div></div><div class=sidepanel-content><p translate=ABOUT_PANE_CONSOLE_RECORDING><br></p><p><button id=startConsoleRecording ng-show=!consoleRecordingStatus ng-click=startConsoleRecording() translate=ABOUT_PANE_START_RECORDING_CONSOLE></button></p><p><button id=stopConsoleRecording ng-show=consoleRecordingStatus ng-click=stopConsoleRecording() translate=ABOUT_PANE_STOP_RECORDING_CONSOLE></button></p></div><div class=sidepanel-content><p><a href=javascript:void(0) ng-click=openTermsOfUse() translate-attr=\"{'ng-attr-aria-label': 'TERMS_OF_USE_LABEL'}\" translate=TERMS_OF_USE_LABEL></a></p><p><a href=javascript:void(0) ng-click=openThirdParty() translate-attr=\"{'ng-attr-aria-label': 'THIRD_PARTY_LABEL'}\" translate=THIRD_PARTY_LABEL></a></p><p><a href=javascript:void(0) ng-click=openPrivacyStatement() translate-attr=\"{'ng-attr-aria-label': 'ABOUT_PANE_PRIVACY_LABEL'}\" translate=ABOUT_PANE_PRIVACY_LABEL></a></p></div>"),a.put("app/rdp-client-ui/Common/loadingSpinner.html","<div id=circularG><div id=circularG_1 class=circularG></div><div id=circularG_2 class=circularG></div><div id=circularG_3 class=circularG></div><div id=circularG_4 class=circularG></div><div id=circularG_5 class=circularG></div><div id=circularG_6 class=circularG></div><div id=circularG_7 class=circularG></div><div id=circularG_8 class=circularG></div></div><span class=loader-text>Loading...</span>"),a.put("app/rdp-client-ui/Common/Settings.html","<div class=sidepanel-header><h4 id=settings_modal_title class=sidepanel-header-title translate=SETTINGS_LABEL></h4><a href=javascript:void(0) class=\"close close-button qoe-close\" ng-click=cancel() rdp-grab-focus translate-attr=\"{ 'title': 'BUTTON_CLOSE', 'aria-label': 'BUTTON_CLOSE'}\" role=button><i class=\"mdl mdl-fw mdl-20x mdl-Cross\"></i></a></div><div class=sidepanel-content><div class=sidepanel-content-wrapper><div class=sidepanel-content-title id=settings_modal_data_gathering_label translate=SETTINGS_PANE_DATA_GATHERING_TITLE_LABEL translate-attr=\"{'ng-attr-aria-label': 'SETTINGS_PANE_DATA_GATHERING_TITLE_LABEL'}\"></div><div class=sidepanel-content-subtitle translate=SETTINGS_PANE_DATA_GATHERING_SUBTITLE_LABEL translate-attr=\"{'ng-attr-aria-label': 'SETTINGS_PANE_DATA_GATHERING_SUBTITLE_LABEL'}\"></div><div ng-show=telemetryChoiceDisabled class=sidepanel-content-admin-setting-message translate=SETTINGS_PANE_ADMIN_SETTING_MESSAGE_LABEL></div><div class=form-group><label class=checkbox-toggle-label><input type=checkbox ng-model=telemetryEnabled ng-model-options=\"{ getterSetter:true }\" ng-change=onTelemetryChanged() ng-attr-aria-labelledby=settings_modal_data_gathering_label ng-disabled=telemetryChoiceDisabled style=\"position: absolute\"> <i class=checkbox-toggle></i><span translate=ON_LABEL ng-show=telemetryEnabled()></span><span translate=OFF_LABEL ng-show=!telemetryEnabled()></span></label></div></div></div><div class=sidepanel-content ng-show=showResourceLaunchMethod()><div class=sidepanel-content-wrapper><div class=sidepanel-content-title translate=SETTINGS_PANE_LAUNCH_METHOD_TITLE_LABEL translate-attr=\"{'ng-attr-aria-label': 'SETTINGS_PANE_LAUNCH_METHOD_TITLE_LABEL'}\"></div><div class=sidepanel-content-subtitle translate=SETTINGS_PANE_LAUNCH_METHOD_SUBTITLE_LABEL translate-attr=\"{'ng-attr-aria-label': 'SETTINGS_PANE_LAUNCH_METHOD_SUBTITLE_LABEL'}\"></div><div ng-show=hasResourceLaunchMethodSet class=sidepanel-content-admin-setting-message translate=SETTINGS_PANE_ADMIN_SETTING_MESSAGE_LABEL></div><div class=form-group role=radiogroup><label class=rdp-radio-container ng-disabled=\"isDisabledResourceLaunchMethod('webclient')\"><input type=radio ng-model=resourceLaunchMethod value=webclient ng-disabled=\"isDisabledResourceLaunchMethod('webclient')\" translate-attr=\"{'ng-attr-aria-label': 'SETTINGS_PANE_LAUNCH_METHOD_WEBCLIENT_RADIO_LABEL'}\"><div class=rdp-radio-container-focused></div><span translate=SETTINGS_PANE_LAUNCH_METHOD_WEBCLIENT_RADIO_LABEL></span> <span class=rdp-radio-checkmark></span></label><label class=rdp-radio-container ng-disabled=\"isDisabledResourceLaunchMethod('nativeclient')\"><input type=radio ng-model=resourceLaunchMethod value=nativeclient ng-disabled=\"isDisabledResourceLaunchMethod('nativeclient')\" translate-attr=\"{'ng-attr-aria-label': 'SETTINGS_PANE_LAUNCH_METHOD_NATIVECLIENT_RADIO_LABEL'}\"><div class=rdp-radio-container-focused></div><span translate=SETTINGS_PANE_LAUNCH_METHOD_NATIVECLIENT_RADIO_LABEL></span> <span class=rdp-radio-checkmark></span></label></div></div></div><div class=sidepanel-content><div class=sidepanel-content-wrapper><div class=sidepanel-content-title id=settings_modal_ime_label translate=SETTINGS_PANE_IME_TITLE_LABEL translate-attr=\"{'ng-attr-aria-label': 'SETTINGS_PANE_IME_TITLE_LABEL'}\"></div><div class=sidepanel-content-subtitle translate=SETTINGS_PANE_IME_SUBTITLE_LABEL translate-attr=\"{'ng-attr-aria-label': 'SETTINGS_PANE_IME_SUBTITLE_LABEL'}\"></div><div class=form-group><label class=checkbox-toggle-label><input type=checkbox ng-model=IMEEnabled ng-model-options=\"{ getterSetter:true }\" ng-change=onIMEChanged() ng-attr-aria-labelledby=settings_modal_ime_label style=\"position: absolute\"> <i class=checkbox-toggle></i> <span translate=ON_LABEL ng-show=IMEEnabled()></span> <span translate=OFF_LABEL ng-show=!IMEEnabled()></span></label></div></div></div>"),a.put("app/rdp-client-ui/Common/TermsOfUse.html","<div class=sidepanel-header><h4 id=tou_modal_title class=sidepanel-header-title translate=TERMS_OF_USE_LABEL></h4><a href=javascript:void(0) class=\"close close-button qoe-close\" ng-click=modalController.cancel() rdp-grab-focus translate-attr=\"{ 'title': 'BUTTON_CLOSE', 'aria-label': 'BUTTON_CLOSE'}\" role=button><i class=\"mdl mdl-fw mdl-20x mdl-Cross\"></i></a></div><div class=sidepanel-text-content><div ng-include=termsUrl class=terms-of-use></div></div>"),a.put("app/rdp-client-ui/Common/ThirdPartyNotices.html","<div class=sidepanel-header><h4 id=thirdparty_modal_title class=sidepanel-header-title translate=THIRD_PARTY_LABEL></h4><a href=javascript:void(0) class=\"close close-button qoe-close\" ng-click=modalController.cancel() rdp-grab-focus translate-attr=\"{ 'title': 'BUTTON_CLOSE', 'aria-label': 'BUTTON_CLOSE'}\" role=button><i class=\"mdl mdl-fw mdl-20x mdl-Cross\"></i></a></div><div class=sidepanel-text-content><div ng-include=\"'assets/license/thirdpartynotices.29fa8fd5.html'\"></div></div>"),a.put("app/rdp-client-ui/connection-error.html",'<div class=error-container ng-keyup=connErrController.onKeyUp($event)><div class="error-content dark" role=dialog ng-attr-aria-labelledby={{connErrController.labelID}}><div class=modal-header><h3 ng-attr-id={{connErrController.labelID}} translate=CONNECTION_ERROR_DIALOG_TITLE translate-values="{\'sessionTitle\': connErrController.sessionTitle()}"></h3></div><div class=modal-body><span translate={{connErrController.errorMessage()}}></span><div ng-if="!!(connErrController.session.connection.disconnectReason && connErrController.session.connection.disconnectReason.certInfo)" class=cert-info><h4 translate=CONNECTION_ERROR_CERTIFICATE_HEADING></h4><div class=cert-details><div class=cert-field-name translate=CONNECTION_ERROR_SERVER_NAME_LABEL></div><div class=cert-field-value>{{connErrController.session.connection.disconnectReason.certInfo.subject}}</div><div class=cert-field-name translate=CONNECTION_ERROR_THUMBPRINT_LABEL></div><div class=cert-field-value>{{connErrController.session.connection.disconnectReason.certInfo.fingerprintSha1}}</div></div></div></div><div class=modal-footer><button class="btn btn-primary reconnect-button" ng-click=connErrController.reconnect() translate=BUTTON_RECONNECT rdp-grab-focus></button> <button class="btn btn-default" ng-click=connErrController.dismissSession() translate=BUTTON_CANCEL></button></div></div></div>'),a.put("app/rdp-client-ui/print-alert-popover.html","<div><a href=javascript:void(0) role=button class=close translate-attr=\"{ 'title': 'BUTTON_CLOSE', 'aria-label': 'BUTTON_CLOSE'}\" ng-click=ctrl.viewManager.dismissPrintJobAlert();><span class=\"mdl mdl-fw mdl-Cross\" aria-hidden=true tabindex=-1></span></a><div role=alert translate=PRINTING_START_NOTIFICATION_TEXT></div></div>"),a.put("app/rdp-client-ui/rd-resource-list.html",'<div class=rdhtml5-workspace-group ng-init="status = {open:true}">\x3c!-- Heading for the root display folder --\x3e<div role=heading aria-level=1><div class="rdhtml5-workspace-title supportRow"><div class=supportCell ng-show="displayFolder === \'/\'"><i class="mdl mdl-fw mdl-ChevronRightSmall chevron-rotate" ng-class="{\'chevron-rotate-down\': status.open, \'chevron-rotate-right\': !status.open}" ng-click="status.open = !status.open" tabindex=3 role=button ng-attr-aria-expanded={{!!status.open}} ng-attr-aria-controls=resource-list-{{workspace.url}} ng-attr-aria-label={{workspace.publisher}}></i></div><div class="supportCell tenantName" ng-show="displayFolder === \'/\'" ng-click="status.open = !status.open" tabindex=-1 role=button ng-attr-aria-expanded={{!!status.open}} ng-attr-aria-controls=resource-list-{{workspace.url}}>{{workspace.publisher}}</div><div class=supportCell><img class="img img-responsive supportInfoMainImage" style="transform: scale(.58)" src="assets/images/ChatInviteFriend (ECFE).2a37ac7c.png" alt="" ng-click=resourceListController.showSupportModal(workspace) ng-show={{workspace.supportInfoPresent}} role=button tabindex=3 translate-attr="{ \'title\': \'SUPPORT\', \'aria-label\': \'SUPPORT\'}"></div></div></div>\x3c!-- Heading for subfolder display --\x3e<ol class=breadcrumb ng-show="displayFolder !== \'/\'" role=heading aria-level=1><li><a ng-click=resourceListController.clearFolder() translate=ALL_RESOURCES_TAB_LABEL tabindex=3 href=javascript:void(0)></a></li><li>{{workspace.publisher}}</li><li>{{displayFolder}}</li></ol><div uib-collapse=!status.open ng-attr-id=resource-list-{{workspace.url}}>\x3c!-- Folder icons --\x3e<div ng-repeat="folder in workspace.folders" ng-show="displayFolder === \'/\'" class="rdhtml5-folder rdhtml5-tooltip" ng-click=resourceListController.setFolder(folder) title={{folder}} tabindex=3 role=link><span class="mdl mdl-fw mdl-FolderHorizontal rdhtml5-foldericons"></span><div class=rdhtml5-folderlabel>{{folder}}</div></div>\x3c!-- App and desktop icons --\x3e<div ng-repeat="bookmark in workspace.bookmarks" ng-show=resourceListController.isBookmarkDisplayed(bookmark) class="rdhtml5-app rdhtml5-tooltip" ng-click="launch({bookmark: bookmark})" title={{bookmark.label()}} tabindex=3 role=link><img class="img img-responsive rdhtml5-appicons" ng-src="{{bookmark.thumbnail ||\n                bookmark.defaultThumbnai}}" alt=""><div class=rdhtml5-applabel>{{bookmark.clippedDisplayLabel()}}</div></div></div></div>'),a.put("app/rdp-client-ui/rdp-client-ui-AADError-modal.html",'<div class=modal-header><h4 class="modal-title centered" style="text-transform: none; margin-bottom: 10px; font-size: 15px" translate=ERROR_AADSTS65005_TITLE ng-attr-id={{AADErrorDescribedByID}}></h4></div><div class=modal-body><span translate=ERROR_AADSTS65005_TEXT></span></div><div class=modal-footer><button class="btn btn-primary" ng-click=$close(0) translate=BUTTON_CLOSE rdp-grab-focus></button></div>'),a.put("app/rdp-client-ui/rdp-client-ui-all-resources-pane.html",'<div class=container>\x3c!-- Show GDPR compliance banner--\x3e<div class="alert alert-warning alert-dismissible banner" role=alert ng-if=allResourcesCtrl.showGDPRBanner()><a class=banner-text translate=GDPR_COMPLIANCE_MESSAGE></a> <a class=banner-link href="https://go.microsoft.com/fwlink/?linkid=2083433" translate=GDPR_LINK_TEXT target=_blank></a> <a href=javascript:void(0) class="close banner-close banner-text" data-dismiss=alert rdp-grab-focus translate-attr="{ \'title\': \'BUTTON_CLOSE\', \'ng-attr-aria-label\': \'BUTTON_CLOSE\'}" role=button ng-click=allResourcesCtrl.setDismissedGDPRBanner()>&times;</a></div>\x3c!-- Show an alert for an unsupported browser or capability --\x3e<div class="alert alert-warning alert-dismissible" role=alert ng-if=allResourcesCtrl.showUnsupportedBrowser()><a class=banner-text translate=UNSUPPORTED_BROWSER_MESSAGE></a> <a href=javascript:void(0) class="close banner-close banner-text" data-dismiss=alert rdp-grab-focus translate-attr="{ \'title\': \'BUTTON_CLOSE\', \'ng-attr-aria-label\': \'BUTTON_CLOSE\'}" role=button ng-click=allResourcesCtrl.setDismissedUnsupportedBrowser()>&times;</a></div><div class="alert alert-warning alert-dismissible" role=alert ng-if=allResourcesCtrl.showAudioUnsupported()><a class=banner-text translate=AUDIO_UNSUPPORTED_MESSAGE></a> <a href=javascript:void(0) class="close banner-close banner-text" data-dismiss=alert rdp-grab-focus translate-attr="{ \'title\': \'BUTTON_CLOSE\', \'ng-attr-aria-label\': \'BUTTON_CLOSE\'}" role=button ng-click=allResourcesCtrl.setDismissedAudioUnsupported()>&times;</a></div><div class=inner><div class=cc-loader ng-if=allResourcesCtrl.showFeedLoader()><div class="dark loading-animation" style="margin-left: -160px"><div></div><div></div><div></div><div></div><div></div></div><div style="text-align: center" translate=LOADING_MESSAGE></div></div><div class="col-lg-6 col-lg-offset-3 centered rdhtml5-nocontent" ng-show=allResourcesCtrl.showFeedEmptyOnPrem() translate=NO_RESOURCES_MESSAGE role=alert></div><div class="col-lg-6 col-lg-offset-3 centered rdhtml5-nocontent" ng-show=allResourcesCtrl.showFeedEmptyWVD() translate=NO_RESOURCES_MESSAGE_WVD translate-values="{\'UPN\': allResourcesCtrl.getUPN()}" role=alert></div><div class="col-lg-6 col-lg-offset-3 centered rdhtml5-nocontent" ng-show=allResourcesCtrl.showFeedFailedRecoverable() translate=RESOURCE_LOAD_FAILED role=alert></div><div class="col-lg-6 col-lg-offset-3 centered rdhtml5-nocontent" ng-show=allResourcesCtrl.showFirstRetryMessage() translate=FETCHING_RESOURCES role=alert></div><div class="col-lg-6 col-lg-offset-3 centered rdhtml5-nocontent" ng-show=allResourcesCtrl.showFeedFailedIrrecoverable() translate=RESOURCE_LOAD_FAILED_IRRECOVERABLE role=alert></div><rd-resource-list display-folder=allResourcesCtrl.displayFolder display-workspace-url=allResourcesCtrl.displayWorkspaceUrl launch-action=allResourcesCtrl.launchBookmark(bookmark) ng-repeat="workspace in allResourcesCtrl.getWorkspaces()" workspace=workspace ng-if=allResourcesCtrl.showResourceList()></div><a href=javascript:void(0) id=rdpFileDownloadLink aria-hidden=true tabindex=-1></a></div>'),a.put("app/rdp-client-ui/rdp-client-ui-navbar.html",'<nav class="navbar navbar-rdp-client navbar-static-top" ng-if=ctrl.viewManager.isNavbarVisible() ng-mouseenter=ctrl.viewManager.onNavbarEnter() ng-mouseleave=ctrl.viewManager.onNavbarLeave() role=menubar><div class=rdp-tabgroup><ul class="nav navbar-nav">\x3c!-- The "All Resources" tab --\x3e<li ng-class="{\'active\':ctrl.viewManager.isAllResourcesPaneActive()}"><a id=rdp-all-resources-link href=javascript:void(0) class=rdp-all-resources-tab ng-click=ctrl.viewManager.activateAllResourcesPane() tabindex=1><span class="mdl mdl-fw mdl-Waffle"></span> <span translate=ALL_RESOURCES_TAB_LABEL></span></a></li><li class=navbar-separator ng-show=ctrl.showDesktopDivider() role=separator aria-orientation=vertical></li>\x3c!-- The desktop session tabs --\x3e<li ng-class="{\'active\':ctrl.isDesktopSessionActive(desktopSession)}" ng-repeat="desktopSession in ctrl.getRemoteDesktopSessions()"><div class=rdp-desktop-tab ng-click=ctrl.focusSession(desktopSession) tabindex=1 role=menuitem ng-attr-aria-label={{desktopSession.getBookmark().desktopLabel()}}><span class="mdl mdl-fw mdl-Desktop"></span> {{desktopSession.getBookmark().desktopLabel()}} <span class="badge mdl" ng-class="{\'success mdl-StatusCheckmark\': ctrl.isSessionConnected(desktopSession),\n                                                       \'error mdl-StatusError\': ctrl.isSessionDisconnected(desktopSession),\n                                                       \'info mdl-StatusInfo\': !ctrl.isSessionConnected(desktopSession) && !ctrl.isSessionDisconnected(desktopSession) }"></span> <a href=javascript:void(0) class=rdp-session-close translate-attr="{ \'title\': \'CLOSE_CONNECTION_LABEL\', \'aria-label\': \'CLOSE_CONNECTION_LABEL\'}" ng-class="{\'rdp-hidden\':!ctrl.isDesktopSessionActive(desktopSession)}" ng-click=ctrl.dismissSession(desktopSession) tabindex=1 role=button><span class="mdl mdl-fw mdl-Cross"></span></a></div></li><li class=navbar-separator ng-show=ctrl.showAppsDivider() role=separator aria-orientation=vertical></li>\x3c!-- The app window icons --\x3e<li ng-class="{\'active\':ctrl.isAppGroupActive(appId)}" ng-repeat="(appId, appGroup) in ctrl.getAppGroups()" rdp-application-tab app-group=appGroup disable-hover=ctrl.disableHover(appId) enable-hover=ctrl.enableHover(appId) is-hover-enabled=ctrl.isHoverEnabled()></li></ul></div><div class="nav navbar-right"><div class=rdp-navitem ng-if=ctrl.isPrintingActive() translate-attr="{ \'title\': \'PRINTING_IN_PROGRESS_LABEL\', \'aria-label\': \'PRINTING_IN_PROGRESS_LABEL\'}" uib-popover-template="\'app/rdp-client-ui/print-alert-popover.html\'" popover-is-open=ctrl.viewManager.isPrintJobAlertActive() popover-placement=bottom popover-trigger="\'none\'"><span aria-hidden=true tabindex=-1 class="mdl mdl-20x mdl-fw mdl-Printer"></span></div><div class=fullscreen ng-if=ctrl.viewManager.isFullscreenSupported()><a class="rdp-navitem rdhtml5-tooltip navbar-link" href=javascript:void(0) ng-click=ctrl.viewManager.toggleFullscreen() ng-attr-title={{ctrl.getFullscreenButtonText()}} ng-attr-aria-label={{ctrl.getFullscreenButtonText()}} role=button tabindex=2><span class="mdl mdl-20x mdl-fw" ng-class="{\'mdl-ExitFullScreen\':ctrl.viewManager.inFullscreen(),\n                                                            \'mdl-EnterFullScreen\':!ctrl.viewManager.inFullscreen()}"></span></a></div><div class=settings><a class="rdp-navitem rdhtml5-tooltip navbar-link" href=javascript:void(0) ng-click=ctrl.viewManager.openSettingsModal() translate-attr="{ \'title\': \'SETTINGS_LABEL\', \'aria-label\': \'SETTINGS_LABEL\'}" role=button tabindex=2><span class="mdl mdl-Gear mdl-20x mdl-fw"></span></a></div><div class="dropdown more-options" uib-dropdown keyboard-nav is-open=ctrl.isMoreMenuOpen><a id=MoreOptionMenuButton href=javascript:void(0) class="rdp-navitem rdhtml5-tooltip navbar-link" translate-attr="{ \'title\': \'MOREOPTIONS_LABEL\', \'aria-label\': \'MOREOPTIONS_LABEL\'}" role=button ng-attr-aria-expanded={{!!ctrl.isMoreMenuOpen}} tabindex=2 ng-click="ctrl.isMoreMenuOpen = !ctrl.isMoreMenuOpen; $event.stopPropagation();"><span class="o365 o365-ellipsis o365-20x o365-fw"></span></a><ul class="dropdown-menu more-options" role=menu><li role=none><a href=javascript:void(0) ng-click=ctrl.viewManager.openAboutModal() translate-attr="{\'ng-attr-aria-label\': \'ABOUT_LABEL\'}" translate=ABOUT_LABEL tabindex=2 role=menuitem ng-keydown=ctrl.setFocusMoreOptionsEscape($event)></a></li><li role=none><a href="https://go.microsoft.com/fwlink/?linkid=872108" translate-attr="{\'ng-attr-aria-label\': \'FEEDBACK_LABEL\'}" translate=FEEDBACK_LABEL tabindex=2 role=menuitem target=_blank ng-keydown=ctrl.setFocusMoreOptionsEscape($event)></a></li><li role=none><a href="https://go.microsoft.com/fwlink/?linkid=872109" translate-attr="{\'ng-attr-aria-label\': \'HELP_LABEL\'}" translate=HELP_LABEL tabindex=2 role=menuitem target=_blank ng-keydown=ctrl.setFocusMoreOptionsEscape($event)></a></li></ul></div><div class="dropdown more-options" uib-dropdown keyboard-nav is-open=ctrl.isUserMenuOpen><a id=UserAccountMenuButton class="rdp-navitem rdp-navitem-useraccount rdhtml5-tooltip navbar-link" href=javascript:void(0) ng-click="ctrl.isUserMenuOpen = !ctrl.isUserMenuOpen; $event.stopPropagation();" translate-attr="{ title: \'USERACCOUNT_LABEL\', \'aria-label\': \'USERACCOUNT_LABEL\'}" aria-labelledby=navbarUsernameDisplay role=button tabindex=2 ng-attr-aria-expanded={{!!ctrl.isUserMenuOpen}} ng-if="ctrl.isAuthenticated() && !ctrl.getUserName()"><span class="mdl mdl-Contact mdl-fw"></span> </a><a id=UserAccountMenuButton class="rdp-navitem rdhtml5-tooltip navbar-link" href=javascript:void(0) ng-click="ctrl.isUserMenuOpen = !ctrl.isUserMenuOpen; $event.stopPropagation();" translate-attr="{ title: \'USERACCOUNT_LABEL\'}" aria-labelledby=navbarUsernameDisplay role=button tabindex=2 ng-attr-aria-expanded={{!!ctrl.isUserMenuOpen}} ng-if="ctrl.isAuthenticated() && ctrl.getUserName()"><div id=navbarUsernameDisplay navbar-username-display></div></a><ul class=dropdown-menu role=menu><li role=none ng-if="ctrl.getPasswordChangeEnabled() && ctrl.getUserName()"><a href={{ctrl.getMyAccountLink()}} translate-attr="{\'ng-attr-aria-label\': \'MY_ACCOUNT_LABEL\'}" translate=MY_ACCOUNT_LABEL tabindex=2 role=menuitem target=_blank ng-keydown=ctrl.setFocusUserAccountEscape($event)></a></li><li role=none ng-if="ctrl.getPasswordChangeEnabled() && !ctrl.getUserName()"><a href={{ctrl.getMyAccountLink()}} translate-attr="{\'ng-attr-aria-label\': \'CHANGE_PASSWORD_LABEL\'}" translate=CHANGE_PASSWORD_LABEL tabindex=2 role=menuitem target=_blank ng-keydown=ctrl.setFocusUserAccountEscape($event)></a></li><li role=none><a href=javascript:void(0) navbar-logout-button tabindex=2 role=menuitem ng-keydown=ctrl.setFocusUserAccountEscape($event)></a></li></ul></div><a id=rdp-navbar-pin class="navbar-rdp-client-pinning-button navbar-link" href=javascript:void(0) role=button ng-click=ctrl.viewManager.toggleNavbarPinState() tabindex=2 ng-attr-title={{ctrl.getPinButtonText()}} ng-attr-aria-label={{ctrl.getPinButtonText()}}><i ng-class="{\'mdl mdl-ChevronUpBold\': ctrl.viewManager.isNavbarPinned(),\n'+"                            'o365 o365-pin': !ctrl.viewManager.isNavbarPinned()}\"></i></a></div></nav>\x3c!-- Collapsed navbar --\x3e<div ng-if=!ctrl.viewManager.isNavbarVisible()><div id=rdp-collapsed-toolbar class=navbar-rdp-client-collapsed ng-click=ctrl.viewManager.showNavbar($event) tabindex=3 rdp-grab-focus translate-attr=\"{ 'title': 'EXPAND_NAVBAR_LABEL', 'aria-label': 'EXPAND_NAVBAR_LABEL'}\"><i class=\"mdl mdl-fw mdl-ThreeLines\"></i></div></div>"),a.put("app/rdp-client-ui/rdp-client-ui-top-view.html","<div ng-if=!topViewCtrl.viewManager.isClientEmbedded()><rdp-client-navbar></rdp-client-navbar><div class=rdp-content-pane-container ng-class=\"{'maximized': !topViewCtrl.viewManager.isNavbarPinned()}\"><session-view autoscroll ng-style=\"{'visibility' : topViewCtrl.viewManager.isSessionPaneActive() ? 'visible' : 'hidden'}\"></session-view><rdp-all-resources-pane ng-show=topViewCtrl.viewManager.isAllResourcesPaneActive()></div><div style=\"display: none\">\x3c!-- Hidden link to enable printing support --\x3e <a translate-attr=\"{download: 'PRINT_JOB_FILE_NAME'}\" href=javascript:void(0) id=printDownloadLink tabindex=-1 aria-hidden=true></a>\x3c!-- Hidden link to enable downloading console logs--\x3e <a translate-attr=\"{download: 'CONSOLE_LOG_FILE_NAME'}\" href=javascript:void(0) id=logDownloadLink tabindex=-1 aria-hidden=true></a></div></div>"),a.put("app/rdp-client-ui/Session/autoreconDialogTemplate.html",'<div class=modal-dialog ng-init=dialog.focus() role=dialog ng-attr-aria-labelledby={{dialog.labelID}} ng-attr-aria-hidden={{!dialog.isTopMost()}}><div class=modal-content><div class=loading-animation><div></div><div></div><div></div><div></div><div></div></div><div class=modal-header><h3 translate=AUTORECONNECT_DIALOG_MESSAGE ng-attr-id={{dialog.labelID}}></h3></div><div class=modal-body><span translate=AUTORECONNECT_DIALOG_RETRY_LABEL></span> {{getRetryCount()}}</div><div class=modal-footer><button class="btn btn-default" ng-click=cancel() translate=BUTTON_CANCEL ng-attr-tabindex={{dialog.getControlTabIndex()}}></button></div></div></div>'),a.put("app/rdp-client-ui/Session/clipHelptipTemplate.html",'<div class=modal-dialog ng-init=dialog.focus() role=dialog ng-attr-aria-labelledby={{dialog.labelID}} ng-attr-aria-hidden={{!dialog.isTopMost()}}><div class=modal-content><div class=modal-header><h3 translate=CLIPHELPTIP_TITLE ng-attr-id={{dialog.labelID}}></h3></div><form><div class=modal-body><p><span translate=CLIPBOARD_SHORTCUT_MESSAGE_MAC ng-if=isMac></span> <span translate=CLIPBOARD_SHORTCUT_MESSAGE_NON_MAC ng-if=!isMac></span></p><p><span translate=CLIPHELPTIP_BODYTEXTP2></span></p><div class=form-group><label class=checkbox-label><input type=checkbox ng-model=dontShowAgain ng-attr-tabindex={{dialog.getControlTabIndex()}}> <i class=checkbox-tick></i><span translate=CLIPHELPTIP_DONOTSHOWAGAIN></span></label></div></div><div class=modal-footer><button class="btn btn-primary" ng-click=close() translate=BUTTON_GOTIT autofocus ng-attr-tabindex={{dialog.getControlTabIndex()}}></button></div></form></div></div>'),a.put("app/rdp-client-ui/Session/copyAlert.html",'\x3c!--Raw HTML template to show a modal whose content is clipboard copy confirmation dialog--\x3e<div class=modal-header style="padding-bottom: 0"><h4 class="modal-title centered" style="text-transform: none; margin-bottom: 10px; font-size: 15px" translate=CLIPCONFIRMATION_TITLE ng-attr-id={{copyAlertDescribedByID}}></h4></div><div class=modal-body style="padding: 0 15px 0 15px"><button class="btn btn-primary skip-button" style="margin-bottom: 15px; margin-left:\n  42%;padding: 0 22px; width: 65px; height: 30px" ng-click=ok() translate=BUTTON_OK rdp-grab-focus></button></div>'),a.put("app/rdp-client-ui/Session/credentialPromptTemplate.html",'<div class=modal-dialog ng-init=dialog.focus() role=dialog ng-attr-aria-labelledby={{dialog.labelID}} ng-attr-aria-hidden={{!dialog.isTopMost()}}><div class=modal-content><div class=modal-header><h3 translate=CREDENTIAL_DIALOG_HEADER ng-attr-id={{dialog.labelID}}></h3></div><form><div class=modal-body style="padding: 20px 40px 40px 40px"><div class=form-group style="display: block"><label style="display: block"><span translate=USER_NAME_LABEL></span> <input class=form-control style="width: 100%" ng-model=user.userName ng-attr-autofocus="{{!userPrefilled || undefined}}" spellcheck=false translate-attr="{placeholder: \'USER_NAME_LABEL\'}" ng-attr-tabindex={{dialog.getControlTabIndex()}}></label><label style="margin-top: 20px; display: block"><span translate=PASSWORD_LABEL></span> <input type=password class=form-control style="width: 100%" ng-model=user.password ng-attr-autofocus="{{userPrefilled || undefined}}" translate-attr="{placeholder: \'PASSWORD_LABEL\'}" ng-attr-tabindex={{dialog.getControlTabIndex()}}></label></div></div><div class=modal-footer><button class="btn btn-primary" ng-click="submit(user.userName, user.password)" translate=BUTTON_SUBMIT ng-attr-tabindex={{dialog.getControlTabIndex()}}></button> <button class="btn btn-default" ng-click=cancel() translate=BUTTON_CANCEL ng-attr-tabindex={{dialog.getControlTabIndex()}}></button></div></form></div></div>'),
a.put("app/rdp-client-ui/Session/loaderTemplate.html","<div class=modal-dialog ng-init=dialog.focus() role=dialog ng-attr-aria-labelledby={{dialog.labelID}} ng-attr-aria-hidden={{!dialog.isTopMost()}}><div class=modal-content><div class=loading-animation><div></div><div></div><div></div><div></div><div></div></div><div class=modal-header><h3 translate=LOADER_DIALOG_CONNECTING_MESSAGE translate-values=\"{'appPackageName': appPackageName}\" ng-attr-id={{dialog.labelID}}></h3></div><div class=modal-body aria-live=assertive translate={{getConnState()}}></div><div class=rdp-connection-dialog__footer><div ng-style=\"{'visibility': displayShowDetails ? 'visible' : 'hidden'}\" aria-live=assertive class=rdp-connection-dialog__footer-details><a class=\"disabled no-text-decoration\" href=javascript:void(0) translate=SHOW_DETAILS_LABEL aria-disabled=\"{{isSessionConnected() ? 'false' : 'true'}}\" ng-attr-tabindex={{dialog.getControlTabIndex()}} ng-class=\"isSessionConnected() ? '' : 'disabled'\" ng-click=displayDesktopBackground()></a></div><div class=\"modal-footer modal-footer--no-left-padding\"><button class=\"btn btn-default\" ng-click=cancel() translate=BUTTON_CANCEL ng-attr-tabindex={{dialog.getControlTabIndex()}}></button></div></div></div></div>"),a.put("app/rdp-client-ui/Session/noGatewayErrorTemplate.html",'<div class=modal-header><h3><span translate=CONNECTION_ERROR_DIALOG_TITLE ng-attr-id={{describedByID}} translate-values="{\'sessionTitle\': sessionTitle}"></span></h3></div><div class=modal-body><span translate=NO_GATEWAY_ERROR_TEXT></span></div><div class=modal-footer><button class="btn btn-primary" ng-click=$close(0) translate=BUTTON_CLOSE rdp-grab-focus></button></div>'),a.put("app/rdp-client-ui/Session/redirectionPromptTemplate.html",'<div class=modal-header><h3><span class="mdl mdl-fw mdl-Warning" style="font-size: 40px; position: relative; top: 9px; color: white"></span> <span translate=REDIRECTION_DIALOG_HEADER ng-attr-id={{redirDialogDescribedByID}}></span></h3></div><form><div class=modal-body><div class=form-group translate=REDIRECTION_DIALOG_MESSAGE></div><div class=form-group><div style="display: inline-block; width: 250px" ng-repeat="redirection in redirectionsRequested"><label class=checkbox-label><input type=checkbox ng-disabled=rememberCollection ng-checked="rememberCollection || redirections[redirection.id]" ng-model=redirections[redirection.id]> <i class=checkbox-tick></i><span translate={{redirection.locKey}}></span></label></div></div><div class=form-group><label class=checkbox-label><input id=remember-server type=checkbox ng-model=rememberCollection> <i class=checkbox-tick></i><span translate=REDIRECTION_DIALOG_DONT_ASK_AGAIN></span></label></div></div><div class=modal-footer><button class="btn btn-default" ng-click="submit(redirections, rememberCollection)" translate=BUTTON_ALLOW></button> <button class="btn btn-default" ng-click=cancel() translate=BUTTON_CANCEL></button></div></form>'),a.put("app/rdp-client-ui/Session/Session.html",'<div><div class=top-layer id=background-loader><loading-spinner class=top-spinner loader-type=sessionLoader></loading-spinner></div><textarea id=hiddenClipboardBox style="position:fixed; left:-10000px; top: -500px" clip-textbox tabindex=-1 role=none aria-hidden=true translate-attr="{\'aria-label\': \'SESSION_PANEL_LABEL\'}"></textarea><div class=main-container><div class=canvas-container id=canvas-container canvas-size-handler aria-hidden=true tabindex=-1></div><div class="dialog-container rdp-dialog-backdrop" id=dialog-container ng-show=connectionDialog.isDialogVisible()></div></div><connection-error session=getActiveSession() ng-if="getActiveSession().getDisconnectReason() && !getReconnecting()"></connection-error></div>'),a.put("app/rdp-client-ui/Session/toast.html",'\x3c!--Raw HTML template to show a modal whose content is the list of invitations--\x3e<div class=modal-body style="padding: 16px 24px 20px 20px"><i class="mdl mdl-fw mdl-CheckMark" ng-class="{\'mdl-CheckMark\': type === 1, \'mdl-Info\': type === 2}" style="font-size: 20px; position: relative; top: 4px; color: white"></i> <span style="font-size: 20px; color: white; margin-left: 12px">{{message}}</span></div>'),a.put("app/rdp-client-ui/sign-in-modal.html",'<div class=modal-header><h3 translate=SIGNIN_DIALOG_TITLE id=signInTitle></h3></div><form><div class=modal-body><div class=form-group><label style=display:block><span translate=USER_NAME_LABEL class=rdp-field-label></span><br><input class=form-control style="width: 100%" ng-disabled=signInPending translate-attr="{placeholder: \'USER_NAME_LABEL\'}" ng-model=user.userName autofocus spellcheck=false ng-attr-tabindex=3></label><label style="margin-top: 20px; display:block"><span translate=PASSWORD_LABEL class=rdp-field-label></span><br><input type=password class=form-control style="width: 100%" ng-disabled=signInPending translate-attr="{placeholder: \'PASSWORD_LABEL\'}" ng-model=user.password ng-attr-tabindex=3></label></div><div role=alert ng-show=loginFailMessage class=sign-in-warning style="display:table-row; color:yellow"><span class="mdl mdl-fw mdl-Warning" style="font-size:25px; margin-right:5px; display:inline-block; position:relative; top:5px"></span><div style="display:table-cell; align-items: center"><span translate={{loginFailMessage}}></span> <a ng-show="loginFailMessage && passwordResetLink " ng-href={{passwordResetLink}} target=_blank translate=SESSION_DISCONNECT_CODE_PASSOWORD_CHANGE_LINK></a></div></div></div><div class=modal-footer style=position:relative><button class="btn btn-primary" ng-click=signIn() translate=BUTTON_SIGNIN ng-attr-tabindex=3 ng-disabled=signInPending></button><div style="position:absolute; bottom:20px"><a href="https://go.microsoft.com/fwlink/?LinkId=521839" target=_blank translate=PRIVACY_POLICY_LABEL ng-attr-tabindex=3></a></div></div></form>'),a.put("app/rdp-client-ui/SupportInformation.html","\x3c!-- Support information --\x3e<div><div class=sidepanel-header><h4 id=Support_modal_title class=sidepanel-header-title translate=SUPPORT translate-attr=\"{ 'title': 'SUPPORT', 'ng-attr-aria-label': 'SUPPORT'}\"></h4><a href=javascript:void(0) class=\"close close-button qoe-close\" ng-click=$close(0) rdp-grab-focus translate-attr=\"{ 'title': 'BUTTON_CLOSE', 'ng-attr-aria-label': 'BUTTON_CLOSE'}\" role=button><i class=\"mdl mdl-fw mdl-20x mdl-Cross\"></i></a></div><div ng-show=supportObj.logoURL class=sidepanel-content><img class=\"img supportIconImage\" ng-src={{supportObj.logoURL}} alt=\"\"></div><div style=\"display: table\" class=sidepanel-content><div ng-show=supportObj.supportURL class=supportRow><div class=supportCell><img class=\"img img-responsive supportImage\" src=\"assets/images/Globe (E774).03f2790f.png\" translate-attr=\"{ 'title': 'SUPPORT_URL'}\" alt=\"\"></div><div class=supportCell><a role=button translate-attr=\"{ 'title': 'SUPPORT_URL', 'ng-attr-aria-label': 'SUPPORT_URL'}\" ng-href={{supportObj.supportURL}} target=_blank>{{supportObj.supportURL}}</a></div></div><div ng-show=supportObj.supportPhone class=supportRow><div class=supportCell><img class=\"img img-responsive supportImage\" src=\"assets/images/Phone (E717).97ff6f38.png\" translate-attr=\"{ 'title': 'SUPPORT_PHONE'}\" alt=\"\"></div><div class=supportCell><a role=button translate-attr=\"{ 'title': 'SUPPORT_PHONE', 'ng-attr-aria-label': 'SUPPORT_PHONE'}\" href=tel: {{supportobj.supportphone}} target=_blank>{{supportObj.supportPhone}}</a></div></div><div ng-show=supportObj.privacyURL class=supportRow><div class=supportCell><img class=\"img img-responsive supportImage\" src=\"assets/images/MobSIMLock (E875).4e720678.png\" translate-attr=\"{ 'title': 'PRIVACY_INFO'}\" alt=\"\"></div><div class=supportCell><a role=button translate-attr=\"{ 'title': 'PRIVACY_INFO', 'ng-attr-aria-label': 'PRIVACY_INFO'}\" ng-href={{supportObj.privacyURL}} target=_blank translate=PRIVACY_INFO></a></div></div></div></div>")}]);